<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="http://localhost:4000/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/blog/" rel="alternate" type="text/html" /><updated>2020-03-18T16:01:11+08:00</updated><id>http://localhost:4000/blog/feed.xml</id><title type="html">Authing 官方博客</title><subtitle>Authing 为个人和企业提供安全的云端身份认证服务，是行业领先的身份认证云。</subtitle><entry><title type="html">Authing 移动端登录方式, 10 行代码实现 App 扫码登录</title><link href="http://localhost:4000/blog/Authing%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%99%BB%E5%BD%95%E6%96%B9%E5%BC%8F/" rel="alternate" type="text/html" title="Authing 移动端登录方式, 10 行代码实现 App 扫码登录" /><published>2020-03-01T00:00:00+08:00</published><updated>2020-03-01T00:00:00+08:00</updated><id>http://localhost:4000/blog/Authing%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%99%BB%E5%BD%95%E6%96%B9%E5%BC%8F</id><content type="html" xml:base="http://localhost:4000/blog/Authing%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%99%BB%E5%BD%95%E6%96%B9%E5%BC%8F/">&lt;p&gt;Authing 新增四种移动端登录方式：移动应用微信登录、移动应用支付宝登录、App 拉起小程序登录、App 扫码登录。&lt;/p&gt;

&lt;p&gt;Authing 新增了对四种移动端登录方式的支持，可以让开发者在 Web 端、移动端、小程序端同时接入 Authing:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;移动应用微信登录&lt;/li&gt;
  &lt;li&gt;移动应用支付宝登录&lt;/li&gt;
  &lt;li&gt;App 拉起小程序登录&lt;/li&gt;
  &lt;li&gt;App 扫码登录&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/Authing/AuthingIOSDemo&quot;&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302110009.png&quot; height=&quot;600px&quot; style=&quot;align:center&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;点击上图跳转到 GitHub Demo 页面。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;其中，「App 拉起小程序登录」指的是在 App 中，借助微信开放能力，唤起微信小程序「小登录」，获取用户微信授权进行登录。此方法可以获取到用户手机号。&lt;/p&gt;

&lt;p&gt;下面分别介绍一下如何快速接入这四种登录方式。&lt;/p&gt;

&lt;h1 id=&quot;app-拉起小程序登录&quot;&gt;App 拉起小程序登录&lt;/h1&gt;

&lt;p&gt;接入 App 拉起小程序登录，你需要做如下准备工作：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/quickstart/create-authing-account&quot;&gt;注册 Authing 开发者账号&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://open.weixin.qq.com/cgi-bin/frame?t=home/app_tmpl&amp;amp;lang=zh_CN&quot;&gt;申请微信移动应用&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;私有化部署用户，需要在 Authing 控制台填入你的小程序信息。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302104816.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302104826.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;非私有化部署用户，需要将你的移动应用关联小登录。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;可在微信开放平台 “管理中心-移动应用-应用详情-关联小程序信息”，为通过审核的移动应用发起关联小程序操作。小登录的 AppID 为 &lt;code class=&quot;highlighter-rouge&quot;&gt;wxa0435021fd7a3af2&lt;/code&gt; .&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302104734.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在你做好这些准备工作之后，先使用微信 SDK 拉起小程序(具体的接入流程请见&lt;a href=&quot;https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Launching_a_Mini_Program/Launching_a_Mini_Program.html&quot;&gt;微信官方文档&lt;/a&gt;):&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;小程序 userName 为 gh_a781a791e29e&lt;/li&gt;
  &lt;li&gt;path 为 &lt;code class=&quot;highlighter-rouge&quot;&gt;/routers/explore&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;path query 参数为：
    &lt;ul&gt;
      &lt;li&gt;userPoolId: 你的用户池 ID&lt;/li&gt;
      &lt;li&gt;getPhone: 是否需要获取用户手机号，1 表示需要，不填或者其他表示不需要&lt;/li&gt;
      &lt;li&gt;fromApp: 1，此参数必填。&lt;/li&gt;
      &lt;li&gt;useSelfWxapp: 此参数必填。私有化用户填 1，非私有化用户填 0.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;下面是 Swift 代码示例：&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;userPoolId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;5e4cdd055df3df65dc58b97d&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;WXLaunchMiniProgramReq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;gh_a781a791e29e&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/routes/explore?userPoolId=&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPoolId&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;amp;getPhone=1&amp;amp;fromApp=1&amp;amp;useSelfWxapp=0&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;miniProgramType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;WXMiniProgramType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;release&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;WXApi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;用户同意授权之后，会携带 &lt;code class=&quot;highlighter-rouge&quot;&gt;ticket&lt;/code&gt; 跳回你的 App，之后你可以使用此 ticket 换取用户信息：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;POST https://oauth.authing.cn/oauth/app2wxapp/auth/:userPoolId&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Path 参数 userPoolId: 你的 Authing 用户池 ID。&lt;/li&gt;
  &lt;li&gt;Post Body 参数:
    &lt;ul&gt;
      &lt;li&gt;ticket: 得到的 ticket&lt;/li&gt;
      &lt;li&gt;secret: 用户池密钥。默认情况下，出于安全考虑，ticket 换取用户信息需要提供用户池密钥，这意味着不能直接在 App 内直接换取用户信息。开发者可以在用户池基础配置页面修改此选项：&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302105735.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;下面是演示示例：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/app2wxapp.gif&quot; height=&quot;600px&quot; style=&quot;align:center&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此方式可以获取用户手机号。你可以扫描下方的小程序二维码体验一下「小登录」：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302103133.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;如果你想私有化部署自己的小程序，可以联系我们。手机号：18616699123。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;详细接入流程请见：&lt;a href=&quot;https://docs.authing.cn/authing/social-login/miniprogram/app2wxapp&quot;&gt;接入APP 拉起小程序登录&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;app-扫码登录&quot;&gt;App 扫码登录&lt;/h1&gt;

&lt;p&gt;和其他三种登录方式不同，你不需要做任何准备工作。同时，我们提供 Web 端的 SDK，可以让你在 Web 端使用 10 行代码实现一个完整的扫码登录表单：&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Authing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'authing-js-sdk'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 初始化 Authing SDK for JavaScript&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;authing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Authing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;userPoolId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'YOUR_USERPOOL_ID'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 调用 APP 扫码登录的方法，此方法将生成一个用于扫码登录的图片和相关提示信息&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;authing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrlogin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;startScanning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ticket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 存储 token 到 localStorage 中&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;localStorage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'token'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/扫码登录.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;That’s it! 就这么简单!&lt;/p&gt;

&lt;p&gt;下面是 startScanning 支持的完整参数，你可以掌控扫码登录的所有流程，实现高度自定义：&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;authing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrlogin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;startScanning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 可选，二维码挂载点，如不写则默认漂浮在文档中间&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 可选，轮询间隔时间，默认为 800 ms &lt;/span&gt;

    &lt;span class=&quot;na&quot;&gt;onPollingStart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;intervalNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onScanned&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ticket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;userInfo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onExpired&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;

    &lt;span class=&quot;na&quot;&gt;onQRCodeShow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onQRCodeLoad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;onQRCodeLoadFaild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    
    &lt;span class=&quot;na&quot;&gt;tips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'使用 &amp;lt;strong&amp;gt; APP &amp;lt;/strong&amp;gt; 扫码登录'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;scannedTips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'用户已扫码，等待确认'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;canceledTips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'用户取消授权'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;expiredTips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'二维码已过期'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;successTips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'扫码成功'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;retryTips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'重试'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;failedTips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'网络出错，请重试'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;参数&lt;/th&gt;
      &lt;th&gt;可选/必选&lt;/th&gt;
      &lt;th&gt;说明&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;mount&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;挂载点 Dom ID，如不写则默认漂浮在文档中间。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;interval&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;轮询时间间隔，单位为 ms，默认为 800 ms。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onPollingStart&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;轮询开始时会被回调，只会回调一次。回调参数 intervalNum 为 setInterval 返回的数值，可使用 clearInterval 停止轮询。如：clearInterval(intervalNum)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onResult&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;每次查询获取到数据都会回调&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onScanned&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;用户扫码时会被回调，只会回调一次。回调参数 userInfo 只包含了用户昵称和头像，开发者可以将其展示在扫码框中。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onSuccess&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;用户同意授权之后将会被回调，只会回调一次，之后轮询结束。参数 data 是一个字典，包含两个字段：ticket 和 userInfo。出于安全性考虑，默认情况下，userInfo 只会包含昵称（nickname）和头像（photo）两个字段，开发者也可以在后台配置使其返回完整用户信息，详情见自定义配置。 ticket 可以用来换取完整的用户信息，相关接口见下文。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onCancel&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;用户取消授权只会会被回调，只回调一次，之后轮询结束。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onExpired&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;二维码失效时被回调，只回调一次，之后轮询结束。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onError&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;每次查询失败时都会回调。回调参数 data 示例如 {“code”: 2241,”message”: “二维码不存在”,”data”: null}。完整错误代码请见完整错误代码页。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onQRCodeLoad&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;二维码首次成功加载时回调。回调参数 qrcode 是一个字典，包含两个字段：qrcodeId、qrcodeUrl。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onQRCodeShow&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;二维码首次出现在页面上时回调。回调参数 qrcode 同上。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;onQRCodeLoadFaild&lt;/td&gt;
      &lt;td&gt;可选&lt;/td&gt;
      &lt;td&gt;二维码加载失败时会被回调。&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;在移动端，开发者可以调用 iOS/Android 相关接口解析二维码，二维码包含原始数据如下：&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;scene&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;APP_AUTH&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;qrcodeId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;5e05f0c57fde537d950f7da5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;userPoolId&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;5e04ae0d5f3cee22fb37612b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;createdAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;2019-12-27T11:53:41.260Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;expireAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;2019-12-27T11:55:41.260Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;userDefinedData&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;hello&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;world&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;scene: 二维码场景值，APP_AUTH 表示 APP 扫码登录。&lt;/li&gt;
  &lt;li&gt;qrcodeId: 二维码 ID。&lt;/li&gt;
  &lt;li&gt;qrcodeId: 用户池 ID。&lt;/li&gt;
  &lt;li&gt;userDefinedData: 用户自定义数据。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;接着可以调用 Authing API，进行标记已扫码、同意授权、取消授权操作，如同意授权的 API 如下：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;POST https://oauth.authing.cn/oauth/scan-qrcode/confirm&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;请求头 Authorization: 已登录用户的 token&lt;/li&gt;
  &lt;li&gt;Body 参数 qrcodeId: 二维码 ID。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以下是一个对应的 Swift 代码示例：&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Alamofire&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;confirmQRLogin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;qrcodeId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;api&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://oauth.authing.cn/oauth/scan-qrcode/confirm&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;HTTPHeaders&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;USER_TOKEN&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;Accept&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;application/json&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Encodable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;qrcodeId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;qrcodeId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qrcodeId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;AF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;responseString&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;// 将 response.value 转化成字符串，示例如下：&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// [&quot;code&quot;: 200, &quot;message&quot;: &quot;二维码扫描确认成功&quot;, data: &quot;&quot; ]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;resp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;convertToDictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;code&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as!&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;debugPrint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;确认授权失败: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;详细接入方式请见：&lt;a href=&quot;https://docs.authing.cn/authing/scan-qrcode/app-qrcode&quot;&gt;接入 App 扫码登录&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;微信登录与支付宝登录&quot;&gt;微信登录与支付宝登录&lt;/h1&gt;

&lt;p&gt;接入移动应用微信登录和支付宝登录，你需要做如下准备工作：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/quickstart/create-authing-account&quot;&gt;注册 Authing 开发者账号&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;申请微信、支付宝移动应用&lt;/li&gt;
  &lt;li&gt;在 Authing 控制台填入微信、支付宝移动应用信息&lt;/li&gt;
  &lt;li&gt;接入微信、支付宝移动端 SDK&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在你做好这些准备工作之后，先使用微信/支付宝 SDK 拉起微信/支付宝，用户同意授权之后，你会得到一个 code。此 code 可通过 Authing 的接口换取用户信息。&lt;/p&gt;

&lt;p&gt;以微信登录 API 为例：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;GET https://oauth.authing.cn/oauth/wechatmobile/auth/:userPoolId?code=&amp;lt;YOUR_CODE&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;path 参数 userPoolId: 你的用户池 ID。&lt;/li&gt;
  &lt;li&gt;query 参数 code: 拉起微信得到的 code。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;下面是 Swift 示例代码：&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Alamofire&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;https://oauth.authing.cn/oauth/wechatmobile/auth/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;UserPoolId&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;?code=&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;AF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;responseString&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;debugPrint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Response: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;详细的接入流程请见：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/social-login/mobile/wechat&quot;&gt;接入移动应用微信登录&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/social-login/mobile/alipay&quot;&gt;接入移动应用支付宝登录&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;获取用户信息之后&quot;&gt;获取用户信息之后&lt;/h1&gt;

&lt;p&gt;获取到用户信息之后，你可以得到登录凭证 token，你可以在后续的 API 请求中携带上此 token, 然后在后端接口中根据此 token 区分不同用户。&lt;/p&gt;

&lt;p&gt;设置 Authorization 请求头为 “Bearer “ + token, 例如：&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Authorization: &quot;Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InVuaW9uaWQiOiJvaVBiRHVHNFM3bXNyS0hQS0RjOE1FQ1NlOGpNIiwiaWQiOiI1ZGMxMGJjYjZmOTRjMTc4YzZmZmZmYjkiLCJjbGllbnRJZCI6IjVkYTdlZGFiNTAzOTZjMWFkOTYyMzc4YSJ9LCJpYXQiOjE1NzI5NTY0MjUsImV4cCI6MTU3NDI1MjQyNX0.OTgl72WZS8So3R5DbWCJ7I_Bd0LaZa4S0TAVMg9qaYQ&quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;如果你使用的是 Swift 的 Alamofire, 可以这样写：&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;api&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;YOUR_SERVICE_URL&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;HTTPHeaders&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;USER_TOKEN&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;Accept&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;application/json&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;qrcodeId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qrcodeId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;AF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;responseString&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
  &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;你可以在后端调用 Authing 的 API 验证通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;Authorization&lt;/code&gt; 判断该用户是否具备相关权限。&lt;/p&gt;

&lt;p&gt;详情请见&lt;a href=&quot;https://docs.authing.cn/authing/advanced/verify-jwt-token&quot;&gt;验证 token&lt;/a&gt;。&lt;/p&gt;

&lt;h1 id=&quot;总结&quot;&gt;总结&lt;/h1&gt;

&lt;p&gt;你可以在这个 GitHub 项目找到完整的示例代码：&lt;a href=&quot;https://github.com/Authing/AuthingIOSDemo&quot;&gt;https://github.com/Authing/AuthingIOSDemo&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;以下是 Authing 目前支持的社会化登录方式，国内主流的第三方身份提供商目前都已经支持了:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200302112935.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;同时我们接下来会继续不断完善，让有身份认证的地方就有 Authing !&lt;/p&gt;</content><author><name>cj</name></author><category term="移动端" /><category term="社会化登录" /><summary type="html">Authing 新增四种移动端登录方式：移动应用微信登录、移动应用支付宝登录、App 拉起小程序登录、App 扫码登录。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/20200302113736.png" /></entry><entry><title type="html">#ShapeIdentity 001 期：国产 Serverless Identity 开源组件工作坊</title><link href="http://localhost:4000/blog/%E5%9B%BD%E4%BA%A7-Serverless-Identity-%E5%BC%80%E6%BA%90%E7%BB%84%E4%BB%B6%E5%B7%A5%E4%BD%9C%E5%9D%8A/" rel="alternate" type="text/html" title="#ShapeIdentity 001 期：国产 Serverless Identity 开源组件工作坊" /><published>2020-02-27T00:00:00+08:00</published><updated>2020-02-27T00:00:00+08:00</updated><id>http://localhost:4000/blog/%E5%9B%BD%E4%BA%A7-Serverless-Identity-%E5%BC%80%E6%BA%90%E7%BB%84%E4%BB%B6%E5%B7%A5%E4%BD%9C%E5%9D%8A</id><content type="html" xml:base="http://localhost:4000/blog/%E5%9B%BD%E4%BA%A7-Serverless-Identity-%E5%BC%80%E6%BA%90%E7%BB%84%E4%BB%B6%E5%B7%A5%E4%BD%9C%E5%9D%8A/">&lt;p&gt;我们发起 &lt;strong&gt;# Shape Identity 系列线上技术公开课，旨在倡议：在阻击物理世界「新冠」病毒的同时，不要忽视数字空间的安全。&lt;/strong&gt;我们将定期邀请业界 Identity 专家一起探讨 Identity 技术的发展！主题涵盖：IDaaS/IAM、Serverless、ZeroTrust、Cloud Native 等开源技术。第一期本周六，2月29日，四年独一无二的日子，本次线上直播 Authing 联合腾讯云、Serverless Framework中文社区，与大家共同探讨：Serverless Framework 组件的开发及应用。&lt;/p&gt;

&lt;p&gt;疫情肆虐，不仅对老百姓生命健康造成重大威胁，对各行各业的发展也造成重大影响。同时，开学、复工在即，疫情防控进入了关键阶段，「居家隔离、远程办公」是当下遏制疫情扩散的最佳防控措施。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/flu.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1918年的西班牙流感席卷全球的模拟&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;2019 新型冠状病毒（2019-nCoV）使得中国一夜之间成了「全球最大的远程办公数字社会」，但是如此大规模的，敦刻尔克式的“数字化转型”，对「企业协同」、「企业 VPN 性能及安全性」、网络信息安全迎来重要考验， 也难免会出现大量次生安全问题，尤其在春节假期延长，大量企事业单位启动「远程办公」，原本在防火墙内，使用公司设备办公的员工，使用家用 PC 开始办公，并通过公共 WiFi 访问企业内部的数据和应用时，&lt;strong&gt;企业网络安全部门面临着空前的安全威胁，其中，「身份安全」是至关重要的一环。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;于是，我们发起 &lt;strong&gt;# Shape Identity 系列线上技术公开课，旨在倡议：在阻击物理世界「新冠」病毒的同时，不要忽视数字空间的安全。&lt;/strong&gt;我们将定期邀请业界 Identity 专家一起探讨 Identity 技术的发展！主题涵盖：IDaaS/IAM、Serverless、ZeroTrust、Cloud Native 等开源技术。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第 001 期，定在本周六，2月29日，四年独一无二的日子，也是 2020年的第60天。&lt;/strong&gt;
本次线上直播 Authing 联合腾讯云、Serverless Framework中文社区，与大家共同探讨：Serverless Framework 组件的开发及应用。本周六（2020-02-29 ）13:00——17:00，&lt;strong&gt;通过「腾讯会议」 300人在线分享及 Q&amp;amp;A 视频互动、B站直播弹幕互动，&lt;/strong&gt; 参与互动将送出「腾讯云」赞助纪念品。&lt;/p&gt;

&lt;p&gt;近些年 Serverless 风起云涌，它正在深刻的改变未来软件开发的模式和流程，对于大多数应用而言，借助 Serverless 服务，开发者可以将绝大多数精力投入在业务逻辑的开发整合上，大大缩短开发周期，降低运维成本。Serverless Framework 当属时下最火热的开源框架。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200225160838.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;主持人：晋剑  Authing 联合创始人兼COO&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;一如何开发自己的第一个-serverless-component&quot;&gt;一、如何开发自己的第一个 Serverless Component？&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200225160933.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;陈涛：Serverless Framework 社区专家&lt;/strong&gt;
参与 Serverless 社区及开源的相关研发工作。拥有丰富前端、JavaScript 技术经验，以及网站及小程序等项目开发经验，腾讯云 Serverless 系列课程特约讲师。
&lt;strong&gt;内容简介：&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Serverless Component 运行机制&lt;/li&gt;
  &lt;li&gt;Serverless Component 开发步骤（功能需求，组建配置）&lt;/li&gt;
  &lt;li&gt;Serverless Component 组件开发（default 函数，remove 函数）&lt;/li&gt;
  &lt;li&gt;Serverless Component 运行，调试与发布&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;二authing-是如何开发-serverless-oidc-组件&quot;&gt;二、Authing 是如何开发 Serverless-OIDC 组件？&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200225161143.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;高鹏洋：Authing 全栈工程师&lt;/strong&gt;
曾就职于中科红旗，负责容器云研发。曾参与中国移动 HA 系统研发，CNCF 贡献者，郑州 TFUG 组织者。热爱创造，喜欢探索未知，乐于与人交流，是一名 Acmer 。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;内容简介：&lt;/strong&gt;
OIDC 是 OAuth 2.0 的超集，同时是 Authing 推荐的身份认证最佳实践。在没有 Serverless 的情况下，开发者需要架设一个服务器用来在后端处理 OIDC code 换 Token 和 Token 换用户信息的流程，有了 Serverless 之后，开发者不需要编写任何路由就可以获取用户信息。本次主题将分享如何通过使用腾讯提供的 SCF 和 API 网关 Serverless Component 来快速创造一个 由多个原生 SCF 组成的  Serverless Component：https://github.com/Authing/serverless-oidc &lt;/p&gt;

&lt;h3 id=&quot;三基于serverless-framework和oidc-组件设计一个图床应用&quot;&gt;三、基于Serverless Framework和OIDC 组件设计一个图床应用&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200225162249.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：Authing 创始人，SoLiD 中文社区（learnsolid.cn）发起人&lt;/strong&gt;
曾任职字节跳动 LarkCloud 云服务部门核心 Hacker，负责⽇活过亿 Serverless 平台产品设计和技术研发，该平台支撑来头条系全产品矩阵：今日头条、抖音、西瓜视频、飞书等。 ⻓期关注生产⼒科技，以提⾼社会生产⼒为个⼈使命。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;内容简介：&lt;/strong&gt;
基于 Serverless Framework 和 Authing 完成一个可以共享和配置访问权限的图床管理应用。&lt;/p&gt;

&lt;h3 id=&quot;四线上自由-q--a-环节&quot;&gt;四、线上自由 Q &amp;amp; A 环节&lt;/h3&gt;

&lt;h3 id=&quot;火速扫码报名&quot;&gt;火速扫码报名&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200225162025.png&quot; style=&quot;zoom: 30%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;火速扫码，回复 “ID”入群
抢占「腾讯会议」 席位，仅300席
&lt;code class=&quot;highlighter-rouge&quot;&gt;提示：尽量提前下载安装「腾讯会议」客户端，群内获取会议链接&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;其他朋友们也可通过B站直播链接参与互动&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200225161910.png&quot; style=&quot;zoom: 50%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Authing Live 直播间（https://live.bilibili.com/4850077 ）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/tencent.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;相关阅读&quot;&gt;相关阅读&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/qVlqwA2ZhZeKsl0RdVsojQ&quot;&gt;Authing 的故事：我为什么开发 Authing？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/WGL7n9D1L0UG71276Wn6Iw&quot;&gt;如何在远程办公中保持高效的&lt;/a&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/WGL7n9D1L0UG71276Wn6Iw&quot;&gt;研发效率？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/KkUhNuXnrsWa5Q-ucmIlqA&quot;&gt;一份普通人能理解的关于 Authing 的介绍&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/TlYmDRg1q_glJ7Icsj0arw&quot;&gt;Authing 是什么以及为什么需要 Authing？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/TlYmDRg1q_glJ7Icsj0arw&quot;&gt;为什么身份认证值得上云？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/6SsGcgoesVGaLT19auK7yg&quot;&gt;Authing &lt;/a&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/6SsGcgoesVGaLT19auK7yg&quot;&gt;@ 2019 总结&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/Xd3SR2WaB15a250RxEZWpg&quot;&gt;Authing 开发资源最全合集&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;重磅：Authing 将于2020 Q1 开源，欢迎&lt;/strong&gt;  &lt;a href=&quot;https://github.com/Authing/authing&quot;&gt;Star 关注&lt;/a&gt;&lt;/p&gt;</content><author><name>jackjin</name></author><category term="ShapeIdentity" /><category term="Serverless" /><category term="OIDC" /><summary type="html">我们发起 # Shape Identity 系列线上技术公开课，旨在倡议：在阻击物理世界「新冠」病毒的同时，不要忽视数字空间的安全。我们将定期邀请业界 Identity 专家一起探讨 Identity 技术的发展！主题涵盖：IDaaS/IAM、Serverless、ZeroTrust、Cloud Native 等开源技术。第一期本周六，2月29日，四年独一无二的日子，本次线上直播 Authing 联合腾讯云、Serverless Framework中文社区，与大家共同探讨：Serverless Framework 组件的开发及应用。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/tencent.jpeg" /></entry><entry><title type="html">Introduce Pipeline: Authing 的可扩展性达到了新高度</title><link href="http://localhost:4000/blog/Introduce-Authing-Pipeline/" rel="alternate" type="text/html" title="Introduce Pipeline: Authing 的可扩展性达到了新高度" /><published>2020-02-20T00:00:00+08:00</published><updated>2020-02-20T00:00:00+08:00</updated><id>http://localhost:4000/blog/Introduce-Authing-Pipeline</id><content type="html" xml:base="http://localhost:4000/blog/Introduce-Authing-Pipeline/">&lt;p&gt;Authing Pipeline 是一组运行在云端的用户自定义 JavaScript 代码，属于 Authing 扩展能力的重要部分，可以让开发者无限制扩展、自定义 Authing 的能力。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220202545.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;演示&quot;&gt;演示&lt;/h2&gt;

&lt;p&gt;开始具体介绍之前，我们先看一下 Pipeline 的使用效果。&lt;/p&gt;

&lt;h3 id=&quot;使用-pipeline-开启注册白名单&quot;&gt;使用 Pipeline 开启注册白名单&lt;/h3&gt;

&lt;p&gt;此示例我们创建了一个 Pipeline 函数，此函数只允许邮箱后缀为 &lt;code class=&quot;highlighter-rouge&quot;&gt;@authing.cn&lt;/code&gt; 的用户注册。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/pipeline/1.gif&quot; alt=&quot;assets/images/pipeline/1.gif&quot; /&gt;&lt;/p&gt;

&lt;p&gt;再由下图可得：邮箱 test@qq.com 注册失败，并且返回了 Access Denied! 提示，而 test@authing.cn 邮箱注册成功。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/pipeline/2.gif&quot; alt=&quot;assets/images/pipeline/2.gif&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;使用-pipline-推送飞书群通知&quot;&gt;使用 Pipline 推送飞书群通知&lt;/h3&gt;

&lt;p&gt;此示例创建了一个用户注册之后发送飞书群通知的 Pipeline 函数，飞书群 webhook 通过环境变量读取。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/pipeline/3.gif&quot; alt=&quot;assets/images/pipeline/3.gif&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/pipeline/4.gif&quot; alt=&quot;assets/images/pipeline/4.gif&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;使用-pipeline-自定义-token&quot;&gt;使用 Pipeline 自定义 Token&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/pipeline/5.gif&quot; alt=&quot;assets/images/pipeline/5.gif&quot; /&gt;&lt;/p&gt;

&lt;p&gt;使用 authing-js-sdk 验证效果，可以看到用户的  token 中有了对应的字段和值。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/pipeline/6.gif&quot; alt=&quot;assets/images/pipeline/6.gif&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Pipeline 的运行架构图如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203521.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如上可知，Pipeline 作为一组函数，整个流程中的函数数据可以相互传递，实现工业流水线一样的效果。这种设计模式，可以使得开发者的自定义函数更加模块化，便于管理。&lt;/p&gt;

&lt;p&gt;同时我们还提供了&lt;a href=&quot;https://github.com/authing/pipeline&quot;&gt;丰富的函数模版&lt;/a&gt;，帮助开发者快速上手开发。&lt;/p&gt;

&lt;p&gt;Authing Pipeline 后端使用  Serverless 架构，所有的用户自定义代码均运行在云端，保证不同租户之间的隔离性，同时能弹性伸缩，既保证了安全性，又提升了运行效率。&lt;/p&gt;

&lt;h2 id=&quot;应用场景&quot;&gt;应用场景&lt;/h2&gt;

&lt;p&gt;借助 Authing Pipeline，开发者可以实现以下功能：
‌&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;白名单机制&lt;/strong&gt;：如注册邮箱域名白名单、注册 IP 白名单、手机号白名单等。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;事件通知&lt;/strong&gt;：如用户注册之后发送通知到钉钉、飞书或 Slack 中。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;权限控制&lt;/strong&gt;：如用户登录之后根据邮箱将其加入某用户组等。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;扩展用户字段&lt;/strong&gt;：如往修改默认头像、添加自定义 metadata、加入身份证号等。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;自定义 token&lt;/strong&gt;：如往 token 中加入自定义字段、删除自定义字段等。&lt;/li&gt;
  &lt;li&gt;… 还有更多，想象空间是无穷的。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;接下来，我们一起看看如何创建一个 Pipeline 函数。&lt;/p&gt;

&lt;h2 id=&quot;创建第一个-pipeline-函数&quot;&gt;创建第一个 Pipeline 函数&lt;/h2&gt;

&lt;p&gt;创建 Pipeline 函数之前，你需要拥有一个 &lt;a href=&quot;https://authing.cn/&quot;&gt;Authing 开发者账号&lt;/a&gt;，注册之后在控制台中依次点击 &lt;strong&gt;用户池&lt;/strong&gt; -&amp;gt; &lt;strong&gt;扩展能力&lt;/strong&gt; -&amp;gt; &lt;strong&gt;自定义 Pipeline&lt;/strong&gt; 页面，你会看到如下提示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203747.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;点击右上角 “创建 Pipeline 函数“，选择一个函数模版用来开发：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203802.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在本示例中，我们选择访问控制模版中的「注册邮箱域名白名单」。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;P.S. 示例中设置的域名白名单是 「example.com」，你也可以改成自己的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203824.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;点击左下角的“保存“按钮，我们会将此函数部署到云端，需要一定时间，请耐心等待。&lt;/p&gt;

&lt;p&gt;回到  Pipeline 函数列表页面，可以看到我们刚刚添加的那个函数。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203841.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;接下来我们验证一下此注册白名单是否有效：&lt;/p&gt;

&lt;p&gt;这里我们使用 Authing 提供的表单进行登录，进入&lt;strong&gt;用户池&lt;/strong&gt; -&amp;gt; &lt;strong&gt;社会化登录&lt;/strong&gt; -&amp;gt; &lt;strong&gt;OIDC 应用&lt;/strong&gt;页面，你可以看到你的所有 OIDC 应用。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203905.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;点击右边第一个按钮 「体验登录」，你会跳转到 Authing 的登录表单页面。&lt;/p&gt;

&lt;p&gt;首先我们使用非 example.com 后缀的邮箱注册，看到返回了「&lt;strong&gt;Access Denied&lt;/strong&gt;」 提示，这是我们默认指定的提示信息。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203929.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;之后再使用后缀为 example.com 的邮箱注册，注册成功，如下所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220203940.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;由此可见，使用 Authing 的 Pipeline 可以帮助你不受限制的拓展 Authing 的能力。&lt;/p&gt;

&lt;h2 id=&quot;开发和调试&quot;&gt;开发和调试&lt;/h2&gt;

&lt;p&gt;在 Pipeline 函数中，开发者可以获取到几乎所有有关此次认证的数据，包括用户资料、IP、地理位置、认证方式、用户池配置等。&lt;/p&gt;

&lt;p&gt;为了方便 Pipeline 的开发和调试，Authing 精心准备了以下工具供开发者使用。&lt;/p&gt;

&lt;h3 id=&quot;1-函数模版&quot;&gt;1. 函数模版&lt;/h3&gt;

&lt;p&gt;Authing Pipeline 提供了&lt;a href=&quot;https://github.com/authing/pipeline&quot;&gt;丰富的函数模版&lt;/a&gt; 供开发者选择以满足不同的场景，且列表还在不断增加中，同时也欢迎你为我们&lt;a href=&quot;https://github.com/authing/pipeline/blob/master/CONTRIBUTING.md&quot;&gt;贡献模版&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220204056.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2-工具函数&quot;&gt;2. 工具函数&lt;/h3&gt;

&lt;p&gt;在 Pipeline 函数中，可以直接使用 Authing SDK ！这意味着你在 Pipeline 中具备了所有 Authing 已有能力！除了 authing-js-sdk，我们还内置了一些其他的 node modules 以及工具函数，方便开发者调用，&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/available-node-modules&quot;&gt;点此了解更多&lt;/a&gt;。&lt;/p&gt;

&lt;h3 id=&quot;3-环境变量&quot;&gt;3. 环境变量&lt;/h3&gt;
&lt;p&gt;在 Pipeline 函数中，可以通过环境变量的方式保持链接、密钥等数据，避免硬编码，环境变量的增加方式如下所图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220204139.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在 Pipeline 函数中读取环境变量的方法为：&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;webhook&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;LARK_WEBHOOK&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这里的 env 是一个全局变量，LARK_WEBHOOK 是存储的一个环境变量值，&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/env&quot;&gt;点击&lt;/a&gt;了解更多关于环境变量的信息。&lt;/p&gt;

&lt;h3 id=&quot;4-调试代码&quot;&gt;4. 调试代码&lt;/h3&gt;

&lt;p&gt;Authing Pipeline 支持在线调试，如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220204235.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此外，还支持查询 log 日志：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200220204251.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;有关更多调试窗口的使用方法请见&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/how-to-debug&quot;&gt;如何调试 Authing Pipeline 函数&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;Authing Pipeline 使 Authing 的扩展能力达到了新的高度，借助于此，开发者可以毫无限制的扩展 Authing 的能力，我们迫不及待的想知道你以什么样的方式拓展 Authing 的能力！&lt;/p&gt;

&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/write-your-first-pipeline-function&quot;&gt;创建你的第一个 Pipeline 函数&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/pipeline-function-api-doc&quot;&gt;了解 Authing Pipeline 函数的完整 API 文档&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/user-object&quot;&gt;user 对象完整 API&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/context-object&quot;&gt;context 对象完整 API&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/env&quot;&gt;了解如何在 Authing Pipeline 函数中使用环境变量？&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/available-node-modules&quot;&gt;在 Authing Pipeline 函数中有哪些开箱即用的 Node Modules &lt;/a&gt;?&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/how-to-debug&quot;&gt;了解如何使用 Authing 的在线调试器调试代码 ?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/node-sdk&quot;&gt;了解如何使用 Authing Node SDK 管理自定义 Pipeline 函数?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.authing.cn/authing/extensibility/pipeline/node-sdk&quot;&gt;非 JS 开发者，如何使用 GraphQL API 管理自定义 Pipeline 函数?&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content><author><name>cj</name></author><category term="Pipeline" /><category term="扩能能力" /><summary type="html">Authing Pipeline 是一组运行在云端的用户自定义 JavaScript 代码，属于 Authing 扩展能力的重要部分，可以让开发者无限制扩展、自定义 Authing 的能力。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/20200220203521.png" /></entry><entry><title type="html">五分钟理解什么是 OIDC</title><link href="http://localhost:4000/blog/5-%E5%88%86%E9%92%9F%E7%90%86%E8%A7%A3%E4%BB%80%E4%B9%88%E6%98%AF-OIDC/" rel="alternate" type="text/html" title="五分钟理解什么是 OIDC" /><published>2020-02-18T00:00:00+08:00</published><updated>2020-02-18T00:00:00+08:00</updated><id>http://localhost:4000/blog/5%20%E5%88%86%E9%92%9F%E7%90%86%E8%A7%A3%E4%BB%80%E4%B9%88%E6%98%AF%20OIDC</id><content type="html" xml:base="http://localhost:4000/blog/5-%E5%88%86%E9%92%9F%E7%90%86%E8%A7%A3%E4%BB%80%E4%B9%88%E6%98%AF-OIDC/">&lt;p&gt;OIDC 的全称是 OpenID Connect，是一套基于 OAuth 2.0 的认证 + 授权协议，用于用户身份认证，将用户数据安全地暴露给第三方。&lt;/p&gt;

&lt;h1 id=&quot;oidc-与-oauth-20-有何不同&quot;&gt;OIDC 与 OAuth 2.0 有何不同？&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://oauth.net/2/&quot;&gt;OAuth 2.0&lt;/a&gt;&lt;/strong&gt; 是用于&lt;strong&gt;授权&lt;/strong&gt;的行业标准协议。 OAuth 2.0 致力于简化客户端开发人员的工作，同时为 Web 应用程序，桌面应用程序，移动电话和物联网设备提供特定的授权流程。&lt;/p&gt;

&lt;p&gt;以上是 OAuth 2.0 的官方定义。我们举一个实际的例子，你在登录京东的时候，会发现在京东的登录框中有使用 QQ 登录、使用微信登录的按钮，这些地方就是 OAuth 2.0 协议的用武之地。京东希望从 QQ 获取你的 QQ 用户数据，从而完成在京东的注册，这就需要数据的主人——你的授权。完成授权之后， QQ 会给京东一个 access_token，京东携带这个凭证，就能&lt;strong&gt;以你的名义&lt;/strong&gt;，以及&lt;strong&gt;你授予此网站的权限&lt;/strong&gt;（例如你授权京东能够访问你的个人信息而不是转账能力），访问&lt;strong&gt;你在 QQ 服务器上的数据&lt;/strong&gt;，从而获取你的信息，在此过程中，你&lt;strong&gt;无须告诉&lt;/strong&gt;京东你的 QQ &lt;strong&gt;账号和密码&lt;/strong&gt;，你输入账密信息的时候，是在腾讯的服务器完成的认证。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;OIDC&lt;/strong&gt; 与 &lt;strong&gt;OAuth 2.0&lt;/strong&gt; 相比，多了&lt;strong&gt;认证&lt;/strong&gt;的能力。不但能够返回用户的 access_token，让第三方通过 access_token 调用用户授权过的接口（用户&lt;strong&gt;授权&lt;/strong&gt;），还可以返回用户的 &lt;strong&gt;id_token&lt;/strong&gt;，第三方可以将 id_token 用作用户身份标识（用户&lt;strong&gt;认证&lt;/strong&gt;）。&lt;/p&gt;

&lt;p&gt;回到刚才的例子，京东获取到 QQ 颁发的 access_token（是一个随机字符串）之后确实能够获取到你的信息，但是如果不借助其他手段，是&lt;strong&gt;不具备用户身份认证功能&lt;/strong&gt;的。而在 OIDC 协议中，获取 access_token 的同时，会返回一个 JWT 格式的 id_token，可直接用作身份标识，供第三方确认用户身份。&lt;/p&gt;

&lt;p&gt;JWT Token 是这个样子的：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;eyJ0eXAiOiJKV1QiLA0KICJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJqb2UiLA0KICJleHAiOjEzMDA4MTkzODAsDQogImh0dHA6Ly9leGFtcGxlLmNvbS9pc19yb290Ijp0cnVlfQ.dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;格式为“点分 base64 编码”，一共三段，第一部分叫作&lt;strong&gt;头部&lt;/strong&gt;（JOSE Header），第二部分叫作&lt;strong&gt;荷载&lt;/strong&gt;（Payload），第三部分叫作&lt;strong&gt;签名&lt;/strong&gt;（Signature）。其中的签名根据头部、荷载和一个密钥计算得出，不可伪造。&lt;/p&gt;

&lt;p&gt;base64 解码之后是这样子的：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{&quot;typ&quot;:&quot;JWT&quot;, &quot;alg&quot;:&quot;HS256&quot;}.{&quot;iss&quot;:&quot;joe&quot;, &quot;exp&quot;:1300819380, &quot;http://example.com/is_root&quot;:true}.&amp;lt;签名&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;更多 JWT 知识请&lt;a href=&quot;https://openid.net/specs/openid-connect-core-1_0.html&quot;&gt;参考 JWT 规范&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;总结成一句话：OAuth 2.0 能做的 OIDC 都能做，OAuth 2.0 不具备的认证能力，OIDC 也具备。&lt;/p&gt;

&lt;h1 id=&quot;oidc-协议的应用场景&quot;&gt;OIDC 协议的应用场景&lt;/h1&gt;

&lt;p&gt;所有使用 OAuth 2.0 的场景都可以升级为 OIDC 协议，OIDC 协议是 OAuth 2.0 的超集。以下是一些 OIDC 协议的应用场景：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;社会化登录场景，网站登录框上常见许多按钮「使用 XXX 登录」。&lt;/li&gt;
  &lt;li&gt;物联网设备的身份认证和授权。&lt;/li&gt;
  &lt;li&gt;企业内多个应用统一身份，单点登录。&lt;/li&gt;
  &lt;li&gt;开放平台对外暴露应用数据，做用户认证与授权。&lt;/li&gt;
  &lt;li&gt;Serverless 中的身份层。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;OIDC 协议是 OAuth 2.0 协议的下一代，是身份认证协议升级的不二之选。
OIDC 协议中的四个主体
在介绍 OIDC 授权模式之前，先要明确四个主体：&lt;strong&gt;第三方应用、资源服务器、资源所有者、认证授权服务器&lt;/strong&gt;。我们继续沿用前文京东与 QQ 登录的例子。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;P.S. QQ 使用的是变种 OAuth 2.0 协议，并不完全符合 OIDC 规范，在此假设 QQ 使用 OIDC 协议进行对外数据授权。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;第三方应用&quot;&gt;第三方应用&lt;/h2&gt;

&lt;p&gt;京东的角色是第三方应用。&lt;/p&gt;

&lt;h2 id=&quot;资源服务器&quot;&gt;资源服务器&lt;/h2&gt;

&lt;p&gt;QQ 的个人信息存放于资源服务器。&lt;/p&gt;

&lt;h2 id=&quot;资源所有者&quot;&gt;资源所有者&lt;/h2&gt;

&lt;p&gt;用户是 QQ 账号的所有者。&lt;/p&gt;

&lt;h2 id=&quot;认证授权服务器&quot;&gt;认证授权服务器&lt;/h2&gt;

&lt;p&gt;QQ 的授权服务器负责用户的身份认证和授权，管理第三方应用、受保护资源、资源所有者之间的关系。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200218205006.png&quot; alt=&quot;四者关系&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;oidc-的三种授权模式&quot;&gt;OIDC 的三种授权模式&lt;/h1&gt;

&lt;h1 id=&quot;authorization-code-flow&quot;&gt;Authorization Code Flow&lt;/h1&gt;

&lt;p&gt;应用最为广泛的是&lt;strong&gt;授权码模式&lt;/strong&gt;，此模式的交互过程如下图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200218205046.png&quot; alt=&quot;授权码模式&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;第三方应用访问认证服务器的授权链接。（用户在京东网站登录框点击使用 QQ 登录）&lt;/li&gt;
  &lt;li&gt;用户与认证服务器完成身份认证。（浏览器跳转到 QQ 授权页面，用户输入 QQ 号和密码）&lt;/li&gt;
  &lt;li&gt;认证服务器向第三方应用返回授权码 code。（QQ 服务器将用户的浏览器重定向，将授权码发送到京东服务器）&lt;/li&gt;
  &lt;li&gt;第三方应用携带授权码访问认证服务器的 token 接口。（京东服务器携带授权码与 QQ 服务器交互）&lt;/li&gt;
  &lt;li&gt;认证服务器返回 &lt;strong&gt;access_token&lt;/strong&gt; 和 &lt;strong&gt;id_token&lt;/strong&gt; 给第三方应用。（QQ 服务器返回 access_token 和 id_token 给京东服务器）&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;此后，&lt;strong&gt;第三方应用&lt;/strong&gt;可以利用 access_token 到&lt;strong&gt;资源服务器&lt;/strong&gt;获取用户的信息，完成在第三方应用的注册和登录业务，并可以&lt;strong&gt;将 id_token 作为用户的身份凭证&lt;/strong&gt;，存放在前端。第三方应用的前端需要访问受保护的资源（例如用户账单信息、购物车）时需要&lt;strong&gt;携带 id_token，后端验证 id_token 合法性&lt;/strong&gt;，核实用户身份之后，返回相关资源数据。&lt;/p&gt;

&lt;h2 id=&quot;oidc-认证时相关-token-解释&quot;&gt;OIDC 认证时相关 Token 解释&lt;/h2&gt;

&lt;p&gt;OIDC 认证时会签发两种 Token，一类叫 id_token，还有一类叫 access_token。&lt;/p&gt;

&lt;p&gt;id_token 是&lt;strong&gt;用户身份的凭证，只起到判定用户身份的作用&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;id_token 示例：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1ZTQ5NjBkZmJkOTE1OGZiODQ0OTAzYTkiLCJiaXJ0aGRhdGUiOiIiLCJmYW1pbHlfbmFtZSI6IiIsImdlbmRlciI6IiIsImdpdmVuX25hbWUiOiIiLCJsb2NhbGUiOiIiLCJtaWRkbGVfbmFtZSI6IiIsIm5hbWUiOiIiLCJuaWNrbmFtZSI6IiIsInBpY3R1cmUiOiJodHRwczovL3VzZXJjb250ZW50cy5hdXRoaW5nLmNuL2F1dGhpbmctYXZhdGFyLnBuZyIsInByZWZlcnJlZF91c2VybmFtZSI6IiIsInByb2ZpbGUiOiIiLCJ1cGRhdGVkX2F0IjoiIiwid2Vic2l0ZSI6IiIsInpvbmVpbmZvIjoiIiwiY29tcGFueSI6IiIsImJyb3dzZXIiOiJNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNF82KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODAuMC4zOTg3Ljg3IFNhZmFyaS81MzcuMzYiLCJkZXZpY2UiOiIiLCJsb2dpbnNfY291bnQiOjEsInJlZ2lzdGVyX21ldGhvZCI6ImRlZmF1bHQ6dXNlcm5hbWUtcGFzc3dvcmQiLCJibG9ja2VkIjpmYWxzZSwibGFzdF9pcCI6IjEyMS4yMS41Ni4xNzEiLCJyZWdpc3Rlcl9pbl91c2VycG9vbCI6IjVjOTU5MDU1NzhmY2U1MDAwMTY2Zjg1MyIsImxhc3RfbG9naW4iOiIyMDIwLTAyLTE2VDE1OjMzOjUyLjQ0NFoiLCJzaWduZWRfdXAiOiIyMDIwLTAyLTE2VDE1OjMzOjUxLjY2NVoiLCJlbWFpbCI6InRlc3QxQDEyMy5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInBob25lX251bWJlciI6IiIsInBob25lX251bWJlcl92ZXJpZmllZCI6ZmFsc2UsImF0X2hhc2giOiJWYW9sSnVqWXltQjUxNlNGOGNaQkpBIiwic2lkIjoiZGYzMGFlNDgtOTkzMS00YjZlLWI0YzgtMWI5NjRkOGZjOWIyIiwiYXVkIjoiNWQwMWUzODk5ODVmODFjNmMxZGQzMWRlIiwiZXhwIjoxNTgxODcwOTc4LCJpYXQiOjE1ODE4NjczODEsImlzcyI6Imh0dHBzOi8vb2F1dGguYXV0aGluZy5jbi9vYXV0aC9vaWRjIn0.pH-bWm-Im0wnOcUEA-OG_iKwy9DTZlAXuik50HPsfGY
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;解码后：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;alg&quot;: &quot;HS256&quot;,
  &quot;typ&quot;: &quot;JWT&quot;
}
.
{
  &quot;sub&quot;: &quot;5e3a3b2315a0b8398cdaaa08&quot;,
  &quot;birthdate&quot;: &quot;&quot;,
  &quot;family_name&quot;: &quot;&quot;,
  &quot;gender&quot;: &quot;&quot;,
  &quot;given_name&quot;: &quot;&quot;,
  &quot;locale&quot;: &quot;&quot;,
  &quot;middle_name&quot;: &quot;&quot;,
  &quot;name&quot;: &quot;&quot;,
  &quot;nickname&quot;: &quot;&quot;,
  &quot;picture&quot;: &quot;https://usercontents.authing.cn/authing-avatar.png&quot;,
  &quot;preferred_username&quot;: &quot;&quot;,
  &quot;profile&quot;: &quot;&quot;,
  &quot;updated_at&quot;: &quot;&quot;,
  &quot;website&quot;: &quot;&quot;,
  &quot;zoneinfo&quot;: &quot;&quot;,
  &quot;company&quot;: &quot;&quot;,
  &quot;browser&quot;: &quot;&quot;,
  &quot;device&quot;: &quot;&quot;,
  &quot;logins_count&quot;: 8,
  &quot;register_method&quot;: &quot;default:username-password&quot;,
  &quot;blocked&quot;: false,
  &quot;last_ip&quot;: &quot;127.0.0.1&quot;,
  &quot;register_in_userpool&quot;: &quot;5e3a3b2315a0b8398cdaaa04&quot;,
  &quot;last_login&quot;: &quot;2020-02-16T09:04:09.764Z&quot;,
  &quot;signed_up&quot;: &quot;2020-02-05T03:48:51.447Z&quot;,
  &quot;email&quot;: &quot;test@test.com&quot;,
  &quot;email_verified&quot;: false,
  &quot;phone_number&quot;: &quot;&quot;,
  &quot;at_hash&quot;: &quot;6k-IWJwh-Dd3_hLOay0s7A&quot;,
  &quot;sid&quot;: &quot;d50a8c9d-23db-4156-80ea-1c82d199d0e9&quot;,
  &quot;aud&quot;: &quot;5e3a3b2315a0b8398cdaaa0e&quot;,
  &quot;exp&quot;: 1581948533,
  &quot;iat&quot;: 1581944933,
  &quot;iss&quot;: &quot;https://core.littleimp.cn/oauth/oidc&quot;
}
.
签名
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;access_token 是&lt;strong&gt;用户授权给第三方应用的一个令牌&lt;/strong&gt;，第三方应用可以使用这个令牌访问用户在资源服务器上受保护的资源，&lt;strong&gt;一般不用于用户凭证和身份标识&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;access_token 示例：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJXaXdndEdHYzVMeGtZRUFRY012RFkiLCJzdWIiOiI1ZTNhM2IyMzE1YTBiODM5OGNkYWFhMDgiLCJpc3MiOiJodHRwczovL2NvcmUubGl0dGxlaW1wLmNuL29hdXRoL29pZGMiLCJpYXQiOjE1ODE5NDQ5MzMsImV4cCI6MTU4MTk0ODUzMywic2NvcGUiOiJvcGVuaWQgcHJvZmlsZSBlbWFpbCBwaG9uZSIsImF1ZCI6IjVlM2EzYjIzMTVhMGI4Mzk4Y2RhYWEwZSJ9.MnAAGj6HlYvN3FOAo6PA2cxNxZDZbL3yhxTM3uxnt0M
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;解码后：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
  &quot;alg&quot;: &quot;HS256&quot;,
  &quot;typ&quot;: &quot;JWT&quot;
}
.
{
  &quot;jti&quot;: &quot;WiwgtGGc5LxkYEAQcMvDY&quot;,
  &quot;sub&quot;: &quot;5e3a3b2315a0b8398cdaaa08&quot;,
  &quot;iss&quot;: &quot;https://core.littleimp.cn/oauth/oidc&quot;,
  &quot;iat&quot;: 1581944933,
  &quot;exp&quot;: 1581948533,
  &quot;scope&quot;: &quot;openid profile email phone&quot;,
  &quot;aud&quot;: &quot;5e3a3b2315a0b8398cdaaa0e&quot;
}
.
签名
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;implicit-flow&quot;&gt;Implicit Flow&lt;/h1&gt;

&lt;p&gt;在隐式模式中，认证服务器的授权接口不会返回授权码 code，而是在与用户完成认证后返回 id_token 和 access_token，交互模式如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200218205133.png&quot; alt=&quot;隐式模式&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;第三方应用访问认证服务器的授权链接。（用户在京东网站登录框点击使用 QQ 登录）&lt;/li&gt;
  &lt;li&gt;用户与认证服务器完成身份认证。（浏览器跳转到 QQ 授权页面，用户输入 QQ 号和密码）&lt;/li&gt;
  &lt;li&gt;认证服务器向第三方应用返回 id_token 和 access_token。（QQ 服务器将用户的浏览器重定向，将 id_token access_token 发送到京东前端页面）&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;隐式模式比授权码模式简单，经常用于将 id_token、access_token &lt;strong&gt;直接返回到前端&lt;/strong&gt;，方便前端直接存储 id_token 用于证明用户身份。也需要前端自行将 access_token 发回后端，后端用于获取用户的详细信息，这增加了&lt;strong&gt;暴露 access_token 的风险&lt;/strong&gt;。隐式模式&lt;strong&gt;不支持返回 refresh_token&lt;/strong&gt;，即不能从后端刷新 access_token，登录一旦过期需要用户重新登录。&lt;/p&gt;

&lt;h1 id=&quot;hybrid-flow&quot;&gt;Hybrid Flow&lt;/h1&gt;

&lt;p&gt;混合模式是以上两种模式的组合，特点是能够在授权接口一次性获取到 code、id_token、access_token，一般 code 会与 id_token、access_token 混合出现，混合模式的交互如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200218205228.png&quot; alt=&quot;混合模式&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;第三方应用访问认证服务器的授权链接。（用户在京东网站登录框点击使用 QQ 登录）&lt;/li&gt;
  &lt;li&gt;用户与认证服务器完成身份认证。（浏览器跳转到 QQ 授权页面，用户输入 QQ 号和密码）&lt;/li&gt;
  &lt;li&gt;认证服务器向第三方应用返回 code、id_token 和 access_token。（QQ 服务器将用户的浏览器重定向，将 id_token access_token 发送到京东前端页面）&lt;/li&gt;
  &lt;li&gt;第三方应用携带授权码访问认证服务器的 token 接口。（京东服务器携带授权码与 QQ 服务器交互）&lt;/li&gt;
  &lt;li&gt;认证服务器返回 &lt;strong&gt;access_token&lt;/strong&gt; 和 &lt;strong&gt;id_token&lt;/strong&gt; 给第三方应用。（QQ 服务器返回 access_token 和 id_token 给京东服务器）&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;混合模式可以灵活满足 code、id_token、access_token 的各种处理方式，可以在享有隐式模式便利的同时，利用 code 获取 refresh_token，从而可以在后端刷新用户 access_token，不必重复让用户登录。&lt;/p&gt;

&lt;h1 id=&quot;总结&quot;&gt;总结&lt;/h1&gt;

&lt;p&gt;OIDC 协议是 OAuth 2.0 协议的超集，是可以替代 OAuth 2.0 的下一代身份认证协议，能够解决认证 + 授权两个问题。OIDC 的授权流程与 OAuth 2.0 完全一致，能够保持向下兼容。&lt;/p&gt;

&lt;p&gt;授权服务器的意义在于管理&lt;strong&gt;第三方应用、受保护资源、资源所有者&lt;/strong&gt;之间的关系，让互相不信任的应用之间安全地暴露数据——应用之间约定好某种规范，按照这种规范，就能在用户授权的前提下，安全地将数据暴露给第三方，而第三方也无需获知用户的账密信息。&lt;/p&gt;

&lt;p&gt;id_token 是用户的&lt;strong&gt;身份凭证&lt;/strong&gt;，access_token 是用户的&lt;strong&gt;授权凭证&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;OIDC 有三种授权模式，分别是&lt;strong&gt;授权码模式、隐式模式、混合模式&lt;/strong&gt;。授权码模式中只能获取到 code；隐式模式中只能获取到 access_token id_token；混合模式中都能够获取到。&lt;/p&gt;</content><author><name>叶祖伟</name></author><category term="OIDC" /><summary type="html">OIDC 的全称是 OpenID Connect，是一套基于 OAuth 2.0 的认证 + 授权协议，用于用户身份认证，将用户数据安全地暴露给第三方。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/20200218203422.png" /></entry><entry><title type="html">Geek Talk 036 实录：Serverless 的前景和机会</title><link href="http://localhost:4000/blog/GeekTalk036%E5%AE%9E%E5%BD%95-Serverless-%E7%9A%84%E5%89%8D%E6%99%AF%E5%92%8C%E6%9C%BA%E4%BC%9A/" rel="alternate" type="text/html" title="Geek Talk 036 实录：Serverless 的前景和机会" /><published>2020-02-17T00:00:00+08:00</published><updated>2020-02-17T00:00:00+08:00</updated><id>http://localhost:4000/blog/GeekTalk036%E5%AE%9E%E5%BD%95:Serverless%20%E7%9A%84%E5%89%8D%E6%99%AF%E5%92%8C%E6%9C%BA%E4%BC%9A</id><content type="html" xml:base="http://localhost:4000/blog/GeekTalk036%E5%AE%9E%E5%BD%95-Serverless-%E7%9A%84%E5%89%8D%E6%99%AF%E5%92%8C%E6%9C%BA%E4%BC%9A/">&lt;p&gt;Serverless 正在改变未来软件开发的模式和流程，对于大多数应用而言，借助 Serverless 服务，开发者可以将绝大多数精力投入在业务逻辑的开发整合上，大大缩短开发周期，降低运维成本。本次主题将与大家探讨 Serverless 生态中缺少的工具以及潜在的创业机会。&lt;/p&gt;

&lt;p&gt;大家好，我谢扬。很高兴能够有这个机会更加交流关于 Serverless 的技术，我们目前创业做的事情跟 Serverless 也是非常强相关的，目前聚焦研发一款 IDaaS 身份即服务产品 Authing。我之前在字节跳动负责一款日活过亿的 Serverless 产品 LarkCloud。我个人对 Serverless 保持着长期的关注，对 Serverless 行业的发展也有很多想法，今天也跟大家分享一下。&lt;/p&gt;

&lt;p&gt;我们今晚的议题主要分为四个主题，第一个是 Serverless 架构的介绍，第二个是Serverless的一些使用场景，第三个是Serverless 的使用报告，这个报告是来自于：O’Reilly Serverless survey 2019 的调研，第四是跟大家展望一下未来的 Serverless 工具链是什么样子，然后它的前景和机会是什么。&lt;/p&gt;

&lt;h2 id=&quot;1-serverless-架构介绍&quot;&gt;1. Serverless 架构介绍&lt;/h2&gt;

&lt;h3 id=&quot;1云计算的发展&quot;&gt;1）云计算的发展&lt;/h3&gt;

&lt;p&gt;首先开始我们的第一个议题：Serverless 架构，在看这个架构之前，我们先来回顾一下云计算的发展。 图中蓝色这部分是由用户来进行管理的这一部分，黄色这一部分是由云服务商来进行管理的。从早期的 On-Premises 到 FaaS ，这是云计算的发展历程。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217155704.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;On-Premises 的时候，机房所有的硬件、操作系统、容器、运行时环境、应用、函数等都需要自己管理；发展到 IaaS 之后，那么开发商他们不需要维护自己的硬件了，但是还是需要维护很多东西。&lt;/p&gt;

&lt;p&gt;后来 CaaS 服务出现，容器即服务，我们自己不需要再维护操作系统层面的东西，只需要维护容器，K8s 这么短时间火起来，这也是一个很重要的原因。&lt;/p&gt;

&lt;p&gt;那么再往下就是像阿里云、AWS 这种云计算 PaaS 平台出来，做了很多周边的一些工具，比如说各种各样的监控、报警，还有整个的服务器管理的控制台，然后有了这种服务之后，让客户连这些服务也不用自己来管理了，只需要管理自己的应用就好了，这就是 PaaS 服务。&lt;/p&gt;

&lt;p&gt;那么再到现在，出现 FaaS 的产品形态，最右边的 FaaS 是蓝色的，下层所有模块都是黄色的，由云服务商提供，中间还有一个灰色模块 Application ，需要云服务商和用户一起进行管理。&lt;/p&gt;

&lt;p&gt;那么这是 FaaS 的一个演进历史，总的来说 FaaS、PaaS、CaaS 等服务发展出来的缘由：&lt;strong&gt;就是让更多的客户能够专心自己的业务，而不需要去维护底层这么多跟业务无关的基础设施。&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;2serverless-架构&quot;&gt;2）Serverless 架构&lt;/h3&gt;

&lt;p&gt;接下来看一下 Serverless 架构，这里我们以 AWS 的一些服务为例，最左边的一个User Agent（用户），从浏览器去访问一个系统，首先会经过一个API Gateway，API Gateway会出发一个函数 Cloud Function，在AWS中叫 Lambda，然后 Lambda 会去执行一些获取资源、业务操作，这些资源都是受限的，它可能是亚马逊的 DynamoDB、也可能是 AWS S3 存储、也可能是亚马逊的 EC2，也可能是你自己的一个社交数据以及通讯录好友等。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217155815.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这些资源默认是受限的，受限的时候就需要去访问一个&lt;strong&gt;无服务器的身份认证系统&lt;/strong&gt;，即图中的 Authing ，用户通过 Authing 进行登录，认证完成之后会获取一个 Token，然后用户带 Token 去请求资源，这个时候这个后端必须验证 Token 是合法的，才能够获取用户有权限访问的资源。这是 Serverless 整体的访问的一个流程。&lt;/p&gt;

&lt;p&gt;现在很多人把 Serverless 分为两块，一块叫做 FaaS（函数即服务）Functions as a Service的缩写，只需要执行一个函数，上传一个函数，然后这些函数来执行一些操作，比如说读取你的通讯、你的地址，或读取其他的业务信息。&lt;/p&gt;

&lt;p&gt;另外一块叫做 BaaS（后端即服务），全称是 Backend as a Service，就是把整个 BaaS 代码上传到服务器，然后它会自动给你做一些弹性伸缩。&lt;/p&gt;

&lt;p&gt;其实函数的粒度更细一些，然后我们今天主要探讨的还是FaaS，BaaS 现在发展的不是特别好，我个人也不是很看好 BaaS 这块的市场。&lt;/p&gt;

&lt;h3 id=&quot;3faas-函数的生命周期&quot;&gt;3）FaaS 函数的生命周期&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217155848.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;接下来我们了解一下 FaaS 的生命周期，FaaS 的全称是 Functions as a Service，开发者只需要开发一个函数，然后这个函数会根据函数的访问量来自动的做一些收缩。FaaS 有触发器，就是从哪一方进行调用，比如：你在浏览器上请求一个 FaaS ，那么就是收到一个 HTTP 请求。 又如说某个图片被上传到了腾讯云的 OSS 里面（OSS 是腾讯的存储服务），那么上传成功之后有一个回调消息，这个消息会去触发 FaaS 函数，这个就叫做 Webhook。还有一类物联网场景，比如温度采集器，测量到温度之后，会有一种 Pub/Sub 这种消息模型，这种消息模型是异步的，也是会执行这样一个 FaaS 触发器。&lt;/p&gt;

&lt;p&gt;那么一旦是触发了 FaaS 的执行，就会启动一个VM （虚拟机），那么这个 VM （虚拟机）目前主要分为两类：一类是直接 Fork 进程，然后在进程里执行这段代码，另一类就是去启动一个容器，然后在容器里面执行。在 Process 进程里执行代码的方式是不太安全的，所以现在很多人都转向了容器。当然容器的问题在于冷启动时间会非常长，也就是说假如这个函数本身执行时间只有 200 毫秒，如果加上容器的启动时间可能也是 200 毫秒，总共的时间可能变成了 400 毫秒，那么就会造成一些网络延迟，最后对用户体验产生影响。&lt;/p&gt;

&lt;p&gt;启动了这样一个 VM 之后，就会去运行这个函数，运行结束之后就会把这个实例给销毁掉，同时云服务商会根据你的运行时间来计算、所耗费的资源如：CPU、内存、包括带宽等等，然后计算这次运行花多少钱，来进行一次扣费。&lt;/p&gt;

&lt;p&gt;这就是 FaaS 函数的生命周期，接下来给大家剖析一下：为什么我们要用 FaaS ？&lt;/p&gt;

&lt;h3 id=&quot;4iaas-模型&quot;&gt;4）IaaS 模型&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217155916.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;首先，我们先来看 IaaS 模型。分别从四个视角来看一下 IaaS 的整体架构：&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第一是从 Service Models 视角&lt;/strong&gt;，即服务模式，分为 IaaS、PaaS、SaaS。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第二是从 Cloud Stack 视角&lt;/strong&gt;，阐释来云计算是由最底层基础设施层、应用程序栈、应用程序、用户层 来构成。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第三是从 Stack Components 视角&lt;/strong&gt;，来看一下详细的构成组件：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;基础设施层&lt;/strong&gt;：就是各种各样的硬件资源，如CPU、网络、带宽、硬盘等等，由基础设施厂商来提供服务，并保障最基础的系统安全。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Application Stack&lt;/strong&gt;：就是需要构建应用所需要的基础软件技术栈，包括了操作系统、编程语言、应用服务器、中间件、数据库（关系数据库、图数据库、亦或是非关系数据库等）、还有报警监控服务、DevOps、CI/CD、API Gateway 等。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Application 层&lt;/strong&gt;：开发者去建立自己的业务模型、业务应用的时候所需要的开发组件，「认证、授权」是其中最基础的组件，然后是 UI（即用户界面）、一些事务，比如你的支付、或直播的事务等。另外是一些报告，涉及与业务相关的用户的增长数据的报告、管理业务的使用情况，Key Metrics 是什么样子；另外还需要一个后台对所有资源进行管理。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;用户层&lt;/strong&gt;：包含用户登录、注册、管理等。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;第四是从不同服务模式下计算服务供应商和客户之间的责任边界。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;IaaS 模式下&lt;/strong&gt;：IDC 供应商的责任是搭建最基础的硬件基础设施、并对保障整个系统的安全。而客户需要从 OS 底层来搭建整个计算、应用环境、以及业务的开发。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;PaaS 模式下&lt;/strong&gt;：类似 AWS、阿里云等云服务提供商承担了基础设施的建设、以及核心基础软件环境的搭建。如操作系统、数据库、中间件、监控服务，把这些服务抽象成了一层云，然后提供给企业进行使用。客户只需要专注在应用环境搭建、及业务层面的开发。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;SaaS 模式下&lt;/strong&gt;：云服务厂商更进一步的把「应用环境」也服务化，客户仅需考虑业务层面的事情。比如应用层比较重要的两个模块：认证和授权模块也被SaaS 服务化；甚至 User 层的用户注册、登录、管理功能也被 SaaS 化，在美国的已经有 Auth0、Okta 等厂商提供这方面的服务，在中国我们 Authing 也在做类似的事情：IDaaS 身份即服务。有了 IDaaS 客户可以更直接开发业务，不需要操心：注册、登录、用户管理、认证、授权等功能。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;回头来看在 IaaS 时代客户需要做很多事情，基建和研发成本极高，进入市场的时间成本很大。但是经过一系列「服务化」进程后，客户愈加仅需关注自己的业务代码，快速实现、快速进入市场进行验证及销售，这也是从2019年开始，Low code/No code 的创业项目备受资本热捧。&lt;/p&gt;

&lt;h3 id=&quot;5caas-容器模型&quot;&gt;5）CaaS 容器模型&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160041.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;随着技术迭代，进入到了容器模型的时代，企业的运维需要管理更多的产品矩阵及服务的稳定。首先是各种各样的服务发现、Container Runtime、包括整个容器集群的管理，还有一些安全性问题、性能问题，基于角色的访问控制（RBAC）、 LDAP/AD 的管理、以及 SSO 的实现等。&lt;/p&gt;

&lt;p&gt;对于开发者、运维需要学习很多 SSO 的知识，以及其他跟业务无关的很多东西，这加重了他们管理的负担。CaaS 容器模型让我们整个服务的可伸缩性大大提高了，但是也大大加重了运维人员的负担。&lt;/p&gt;

&lt;h3 id=&quot;6serverless-模型&quot;&gt;6）Serverless 模型&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160116.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;行业逐步发展到了今天的 Serverless 模型，在之前模型下客户需要操心很多的组件。但是，进入Serverless 模型后，客户仅需要关心是「业务代码」，设计好自己的业务模型，把代码部署到云服务中，就可以完成所有的复杂的一系列的部署、运维、监控等操作。&lt;/p&gt;

&lt;h4 id=&quot;1faas-优势&quot;&gt;1）FaaS 优势&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160243.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Serverless 带来的好处，首先是：零运维，也叫做零管理。除了零运维和零管理之外，还有其他很多优势，比如说按运行时间付费，你运行多长时间，就付多少钱；没有运行资源损耗的时候，不需要付任何钱。举个例子，可以看右边这张图，蓝色的线代表是每秒处理多少请求；红色的线是处理这些请求需要的服务器数量。可以看到蓝色的线有两个峰值，这代表需要 200 台服务器，在传统的架构下就需要准备 200 台服务器。 那么有了 FaaS 之后，就不需要买那么多服务器，只需要是把这个业务逻辑写好，然后它会自动为你进行伸缩。伸缩的策略也非常多，比如用机器学习来进行预测，或者说可以用一些即时计算进行预测等等。运维人员只需要去考虑管理更少的服务器，开发人员只需要去关心业务代码，就可以让企业更快进入市场，并且能够造一个原生的微服务，显著降低企业的管理和维护负担。&lt;/p&gt;

&lt;h4 id=&quot;2faas-劣势&quot;&gt;2）FaaS 劣势&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160309.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;除了优势之外，FaaS 还有很多劣势，没有一个通用的标准。比如 AWS、Google，还有国内腾讯、阿里云、华为、京东云都有 FaaS 服务，但他们没有一个通用的标准；这也造成了：客户被供应商锁定的问题，无法便捷迁移。比如说我现在用 AWS，每天请求可能上亿，想要迁移到阿里云和腾讯云就非常的麻烦。第 2 点是 FaaS 是一个黑盒子环境，开发者需要去非常了解这个东西的底层是怎么回事，他才能敢去使用，否则他无法去预估一些潜在的风险。第 4 是冷启动的问题，也不算什么太大的问题，云厂商已经解决了这类问题，有很多处理方式。&lt;/p&gt;

&lt;p&gt;第 5 个问题是最要命的一个问题，目前的 FaaS 是没有经过一个非常复杂应用案例的验证。假如说我想用 Serverless 开发一个淘宝、QQ、微信或者一个直播软件，目前是没有这种案例的。&lt;strong&gt;一方面主要是因为生态的缺乏，另外一方面的话也是因为开发人员的思维认知没有提升，这绝对不是一个技术的问题，技术已经非常成熟。&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;3faas-厂商&quot;&gt;3）FaaS 厂商&lt;/h4&gt;

&lt;p&gt;下图是全球范围内在做 FaaS 的厂商，第一个 OpenWhisk 是 IBM 的开源的 FaaS 框架。另外一个是大家都知道的 AWS 的 Lambda，亚马逊的云服务算是业界的一个标准，还有 Google、微软都有类似的服务。国内主要是阿里云、腾讯云、华为云，除了这三家之外，其实京东、滴滴其他的云都有。另外一家就是字节跳动，他们叫做轻服务，这也是我当时在字节跳动开发的一款服务。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160355.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;此外，还有一股不可忽视的力量，就是美国的 Auth0，是一款 IDaaS - 身份认证即服务，把身份认证上云，他们拥有一个 Webtasks 产品，可以让用户、开发者通过他们的服务快速完成身份认证功能，更多的精力聚焦到具体的业务方面。另外一个就是我们在做的 Authing ，未来的话也会有一个 FnSuite 这样一款函数产品，会和我们的业务有一个非常好的打通。&lt;/p&gt;

&lt;h2 id=&quot;2-serverless-使用场景&quot;&gt;2. Serverless 使用场景&lt;/h2&gt;

&lt;h3 id=&quot;1无服务器的应用后端场景&quot;&gt;1）无服务器的应用后端场景&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160436.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;接下来介绍一下 Serverless 的使用场景。&lt;/p&gt;

&lt;p&gt;首先第一类就是这种无服务器的应用后端，比如说我写了一段代码，然后我把它 push 到 Github 上去，这个时候 Github 的 webhook，我需要让它通知到我的 Slack 或者我的飞书。&lt;/p&gt;

&lt;p&gt;假如没有 Serverless 的情况下，需要自己写一个代码后端框架，然后自己拼接一下，写个路由，写完路由之后，还需要再把它部署到服务器上去，然后再部署运维。&lt;/p&gt;

&lt;p&gt;那么有了 FaaS 之后，只需要写个函数，把它传到阿里云或者腾讯云上，云服务商返回一个 API 链接，开发者把链接填到 Github 上去，就完成了整个操作流程，非常简单。&lt;/p&gt;

&lt;p&gt;还有一种是新闻消息推送应用，一个新的用户，它注册了一个应用，然后在我们这个消息里面就推送给他一些新闻。&lt;/p&gt;

&lt;p&gt;再比如物联网的应用的后端，比如说一个温度的信息推送系统，经过 Pub/Sub 之后来去调用一个函数，然后我们的函数来执行一些具体业务操作，比如推送到我们后台里面进行监测和管理，以及一些报警等。&lt;/p&gt;

&lt;p&gt;这就是 Serverless 的第一类无服务器应用后端场景，如 QQ、微博、微信 IM 以及简单的消息推送场景，都可以使用Serverless。&lt;/p&gt;

&lt;h3 id=&quot;2人工智能应用场景&quot;&gt;2）人工智能应用场景&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160548.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第二类场景：人工智能应用。这张图来自 Google，大家可以从左往右看，比如通过 Slack、 Messenger、或 Google Home 和机器人对话，会发送一个 Http 请求，这个请求会在云端执行函数，然后这个函数会请求谷歌的 Dialogflow 是谷歌的一项对话管理服务。&lt;/p&gt;

&lt;p&gt;Dialogflow 把多轮的对话管理起来，后面的其他服务：ML、Vision API 等都是由云服务商提供的能力，&lt;strong&gt;该厂商的 Cloud Functions （云函数）就可以直接调用这些能力，这对云服务厂商来说是非常大的一个优势&lt;/strong&gt;。所以说 Serverless 只能由这些 BigTech 来研发，一些小公司或者创业公司想做Serverless 基础设施基本上是不太可能的，因为，&lt;strong&gt;Serverless 最核心竞争优势不仅仅前面的函数，更重要的是服务商本身所提供其他的能力可以供函数调用&lt;/strong&gt;。&lt;/p&gt;

&lt;h3 id=&quot;3实时数据处理场景&quot;&gt;3）实时数据处理场景&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160640.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第三类场景：实时数据处理，最典型的就是物联网应用，数据量非常大，用 Serverless 也是非常匹配。假如需要 1万 QPS ，函数可以立马生成支持 1万 QPS 的集群，如果你自己搭一个 EC 2 服务器或者是其他应用的话，还需要自己去管理集群，成本会变得很大。&lt;/p&gt;

&lt;h3 id=&quot;4aaas-认证即服务场景&quot;&gt;4）AaaS 认证即服务场景&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160720.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;那么还有一类最不容忽视的一个场景是：&lt;strong&gt;AaaS （Authentication as a Service：认证即服务），把用户注册、登录、用户管理、认证及授权等模块 SaaS 服务化。 为什么需要 AaaS 这类服务呢？主要有三点原因：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;第一点：&lt;strong&gt;身份管理，是云计算里面除了计算资源、存储资源和网络资源之外，最标准化的一个产品。&lt;/strong&gt;为什么说最标准化？前面 IaaS 图中可以看到：Stack Components 包含了注册、登录、注册、用户管理以及认证和授权模块，基本上所有的应用：不管 是to B、to C、to G、to Developer 基本上都是需要的且流程非常标准；甚至在基础设施层面的服务，也都需要标准化的认证服务，比如：K8S 容器编排场景中，也都有认证/授权这种需求，另外在多云管理、DevOps 不同工具流身份的管理等。&lt;/p&gt;

&lt;p&gt;在没有 AaaS 云服务之前，大家都需要自己造的轮子，那么 AaaS 云服务的出现就让这种重复造轮子的事情不在发生，节省巨大的社会生产力，并且让身份管理变得非常简单安全。这个也是很多的厂商都看到的这样一个机会。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160755.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第二点：&lt;/strong&gt;身份管理问题在数十年间，从未得到一个很好的解决，用户以自己隐私代价来为企业「身份管理不善」买单。比如很多站点的用户数据泄露事故，这些用户泄露事故不仅给企业的名声造成很大的影响，而且，严重损害了用户的隐私。近期了解到的一家公司每年花几百万来购买身份管理服务。AaaS云服务产品的出现，将大大降低客户的投入成本及安全成本。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第三点：&lt;/strong&gt;合规成本逐年上升：随着 GDPR、CCPA 、包括加拿大的 Castle 等，这些法律出台之后，政府对于企业在身份管理方面提出了更高的要求。假如企业要去满足这些要求，会花费巨大的成本，而使用AaaS 云服务，就可以保证企业可以非常高效、简单、安全的拥有一个合规身份管理产品。&lt;/p&gt;

&lt;h2 id=&quot;3-serverless-使用报告&quot;&gt;3. Serverless 使用报告&lt;/h2&gt;

&lt;p&gt;接下来看一个 Serverless 使用报告，一起来了解产业现状，数据来源于&lt;a href=&quot;https://www.oreilly.com/radar/oreilly-serverless-survey-2019-concerns-what-works-and-what-to-expect/&quot;&gt;O’Reilly serverless survey 2019&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;首先是 40% 的企业已经采用了 Serverless，这个占比还是比较大的，60% 没有采用，市场空间还是有很大的提升空间。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160907.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;30% 的 Serverless 用户是一线工程师，然后是架构师、技术 leader 占 25%左右；还有技术类的也不少，另外一个出乎我意料的是：VP、总监、经理级别的用户也近20%；&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160921.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;另外报告显示，采纳 Serverless 技术的行业也非常广泛，采用最多的是软件行业，第二大是金融及银行业，第三大行业是咨询行业。所以如果要在 Serverless 领域创业的话，可能最好的客户是金融业，要么做外包，要么服务金融业。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217160946.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;60% 的中大型规模企业采纳 Serverless：这个数字也是比较出乎意料，我们潜意识觉得采用 Serverless 新技术的可能都是小企业，但是从图中可以看到，其中一万人以上规模的公司，占到了 20%。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161005.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;50%的 Serverless 用户，以经常使用 Serverless 超过一年时间，采用 Serverless 技术超过三年时间的企业也超过了10%&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161023.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然后 66% 的用户表示，采用 Serverless 技术后效果显著。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161039.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这是为什么要使用 Serverless 的一些调查。我们看前三个最主要的几个理由，分别是减少运营成本、可以按序的自动的伸缩。第3个是不需要再关心服务器的维护问题，和第一点差不多，降低成本。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161105.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;为什么不用 Serverless 的原因调查显示：&lt;/p&gt;

&lt;p&gt;企业在采纳 Serverless 技术之后面临最大的挑战是：对于当下员工的教育成本很高，去教育员工还是比较难的，所以如果说要在 Serverless 领域创业的话，能做一家Serverless 领域的咨询公司也不错，与教育机构合作培训人才。&lt;/p&gt;

&lt;p&gt;第二大挑战是因为 Serverless 领域缺乏标准，很容易被供应商锁定，不容易迁移到其他供应商，这个可能需要加快推动 Serverless 行业的标准化进程，防止被供应商锁定，现在 CNCF 基金会也在推动着这个事情。第三大挑战是集成测试、调试非常困难，这也反映了 Serverless 生态供应链的不健全问题，同样，也存在创业机会。&lt;/p&gt;

&lt;p&gt;不采用 Serverless 最大的原因是：考虑到安全问题。如果要创业的话，那么去解决 Serverless 的安全性问题也是一个很大的机会。第二大原因是：因为对于 Serverless 的未知而产生的畏难情绪，不知道使用了 Serverless 会发生什么的问题。第 3 个原因是：底层云服务商正在迁移中，来不及采用 Serverless。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161217.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;什么角色在管理公司内部 Serverless 的基础设施？&lt;/strong&gt;首先是负责DevOps 的运营人员，第二是：软件工程师、第三是技术架构师。
这个是一个全球调查，我认为和中国的实际情况可能不太吻合，中国可能要反过来，第一可能是架构师来决定。 第二是具有话语权的软件工程师来决定是否采纳。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161243.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;最后一个调查显示：50%+ 的企业愿意在未来三年尝试 Serverless，所以说 Serverless 在未来还会有一个非常大的增长。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161727.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;4-serverless-工具链前景和机会&quot;&gt;4. Serverless 工具链、前景和机会&lt;/h2&gt;

&lt;p&gt;最后的话我们来聊一下，Serverless 工具链、前景和机会。首先我们来看工具链，分为三个版块，分别是开发、部署、监控。&lt;/p&gt;

&lt;h3 id=&quot;1开发工具&quot;&gt;1）开发工具：&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;第一是 CLI 工具：&lt;/strong&gt;主要是兼容商业 FaaS 以及开源的 FaaS ，Servereless.com 做的非常不错了，他们已经兼容了十几种 FaaS 平台。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第二是编辑器的插件：&lt;/strong&gt;现在很多程序员还是习惯使用 VS Code 或者 Sublime 之类的工具进行开发的，所以需要一个非常方便的插件，可以便于管理、调试。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第三是 WebIDE：&lt;/strong&gt;WebIDE 是一个衍生品，主要是作为方便去开发、调试的小工具，大多数开发者应该还是会基于本地的编辑器插件来开发。&lt;/p&gt;

&lt;p&gt;此外，可能还有一些其它工具有待于补充。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161734.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2部署工具&quot;&gt;2）部署工具&lt;/h3&gt;

&lt;p&gt;常用的部署部署工具包括：Git 集成、CI/CD 持续集成、Hooks （用于同步消息到 IM 工具）等。&lt;/p&gt;

&lt;p&gt;那么还需要做一些 Cronjob ，比如说能够非常方便的部署定时任务，并且我能够发布预览版和生产版。&lt;/p&gt;

&lt;h3 id=&quot;3监控工具&quot;&gt;3）监控工具&lt;/h3&gt;

&lt;p&gt;最后我们需要 monitor 来报警，需要短信通知、公司邮件通知，还需要日志等。&lt;/p&gt;

&lt;p&gt;我说的这三点其实只是产品层面的一些小打小闹，有没有这些功能，对 Serverless 的普及和产业的提高并没有太大的影响。我觉得如果要真正促进 Serverless 发展的话，还需要做以下三件事情。&lt;/p&gt;

&lt;h2 id=&quot;5-三个能促进产业发展的机会&quot;&gt;5. 三个能促进产业发展的机会&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161819.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;第一件事情是有一个 FaaS Framework 专门用来编写大型项目，同时他是完全兼容 FaaS 架构的。为什么需要 FaaS Framework 呢？如果没有 FaaS Framework 的话，我们是没有办法用 FaaS 编写大型项目的。一个函数，只能做一些简单的事情，假如说需要做一个QQ，做一个微信，一个函数是肯定不行的。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第二件事是 Content as a Service&lt;/strong&gt;，CaaS 是 FaaS 本身的更高层级的抽象，FaaS 是提供计算能力，然后最重要的其实还是需要一个存储能力，尤其是结构化数据存储，那么就需要一个 CaaS 将存储云化。比如我我的 CaaS 平台去设计一些表和字段，然后这些字段中间还可以互相连接，最后他可以马上帮我我生成 REST API 或 GraphQL 等，并且它还有和 FaaS 结合的能力，我觉得它是未来一个很大的机会。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第三类就叫做云原生编程语言。&lt;/strong&gt;这种编程语言的话，它完全是架构在现有的云计算厂商上去的，它的逻辑循环是不变的。但是他对硬盘的读写是在云上，并且它兼容各大云平台，比如说我要调用 AWS 的S3，我只需要写原生编程语言就可以，不需要去使用任何的框架，同时它可以启动云上的服务器进行调试。他从语言层面就是一个可伸缩的，比如说我我写了一个 1+1=2 这样一个计算，假如有一亿请求过来，那么在他语言层面就可以帮我调度可以抵抗一亿流量的计算资源。我觉得如果说这三件事情做好的话，能对整个产业有一个巨大的促进作用。&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217161852.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;最后总结一下，Serverless 是真正的云计算，它真的是按需付费，然后不需要去自己去管理任何的基础设施，只需要关注自己的核心业务，目前的云计算还没有真正做到这一点。然后小公司做 Serverlss 的话基本上没戏，主要原因是缺乏信任。&lt;/p&gt;

&lt;p&gt;如果是创业公司的话，可以从以下几个层面切入。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;第一是做一个 FaaS 聚合器提升开发便捷度，就像 Serverless.com 做的事情一样，&lt;/li&gt;
  &lt;li&gt;第二就是做一个 FaaS 没然后接外包，这种大型的外包业务能用 Serverless 来做最好。&lt;/li&gt;
  &lt;li&gt;第三是开发一个 CaaS 然后覆盖查询业务，然后再通过和 FaaS 打通，进而完成一些高阶操作，进而赋能业务。&lt;/li&gt;
  &lt;li&gt;第四个是开发云原生变成语言，然后与教育机构、培训机构、咨询机构合作，培养人才，人才有了这个意识之后，整个产业才能有一个更大的改变。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;大概是这样，谢谢大家。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://github.com/Authing/serverless-oidc&quot;&gt;https://github.com/Authing/serverless-oidc&lt;/a&gt;&lt;/p&gt;

  &lt;p&gt;身份认证云是无服务器架构的一个分支，使用身份认证云和使用无服务器架构拥有一样的好处。&lt;/p&gt;

  &lt;p&gt;请看 Authing 的思考及实践：&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;为什么身份认证值得上云？&lt;/li&gt;
    &lt;li&gt;FnGroup 制定的 FaaS 规范&lt;/li&gt;
    &lt;li&gt;中国首个 FaaS 规范出炉&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;主页：&lt;a href=&quot;https://github.com/fngroup/fnlib&quot;&gt;https://github.com/fngroup/fnlib&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217162029.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;7-qa&quot;&gt;7. Q&amp;amp;A&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;周家泽：&lt;/strong&gt;我叫周家泽，我在西塔科技工作，我本身不是程序员，我们公司是主要做区块链当中底层的联盟链的开发。 本来我只是想了解一下 Authing 这个项目，所以我就进来一起听一下介绍这样子。然后我这边有一个问题，就是说因为 Authing 这个项目本身跟身份认证这块相关的，所以我想了解一下，就是说像从我们的角度看，这个项目或者说身份认证的项目跟区块链这块有没有结合点，然后会在什么样子的业务场景里面，&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;Authing 没有区块链，但是和区块链可以有很大的联系。比如数据的主权和身份的主权。场景的话，我觉得还是政府这一块，尤其是政府对公民数据的一个管理，是非常好的一个方向。我们在中国除了运营 Authing 外，还在运营 SoLiD，SoLiD 是万维网之父 Tim 发起的项目，它想要身份和数据由个人来控制。他们在欧洲、在芬兰、在比利时已经有了一个非常好的一个政府的实践经验。稍候，我可以把把一篇论文发给大家看一下这块的实践经验。从我的个人经验来看，区块链对政府的社会治理会有很大的帮助。&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;论文推荐：&lt;a href=&quot;https://authing.cn/blog/solid-flemish/&quot;&gt;通过让公民控制自己的数据简化政府流程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;李涛：&lt;/strong&gt;我补充一下，包括我们这次的新冠疫情，其实我们对人群的追踪，每个人都要填很多表格，其实我们都可以用 SoLiD，把我们每个人信息是实时同步给政府的各级组织，而不需要来回筛查、反复填写。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;王凯：&lt;/strong&gt;大家好，首先感谢谢扬精彩的分享。我也学到很多，我也是一个程序员比较杂，然后什么都干，包括运维这些东西，docker 什么的，目前是自己在创业。&lt;/p&gt;

&lt;p&gt;我主要做的一个事情是在线教育，主要是留学这块市场留学跟家教，但是我们这个业务比较复杂，是包含了中国跟东南亚，还有欧美的一些各个国家。我的问题是像我们这样的业务就是跨区域的，我该如何选择一个好的 Serverless 产品呢？我用 Serverless 的体验是比较糟糕，部署的稍候挺麻烦的。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;用 Serverless.com 就好，它集成了国内外的各种各样的一些服务，比如 AWS、Google、腾讯云等，它们都有一个集成，用他们的工具就可以很方便的完成工作，解决你刚才说的跨国的这样一个问题。另外 Serverless.com 现在的社区运营是有中国人的，所以中国人用起来也会比较友好。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Mingliang：&lt;/strong&gt;大家好，谢谢涛哥和谢扬今天给大家带来的分享，特别好。我之前在上海创业公司电商社交，然后现在把这个业务都清理掉了，目前在新加坡国立大学读博士。我是一年级刚开始读博，我的研究方向是分布式系统，所以自然对这个身份的也很感兴趣。然后我想请教一下谢扬的问题，这个身份有没有和 SDN 有一些契合的点，或者说其实没有的话，可能未来是不是也有一些可以结合的点。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;我对这个领域还不是很了解，不过 SDN 这个概念的话，我是非常认可的。软件确实可以定义很多的硬件资源的，把它给出抽出来，变成一种信息化资源，包括现在的 SD-WAN。网络通信这一块也是类似这样一个事情。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;宋军：&lt;/strong&gt;大家好，我是宋军，谢扬的分享挺好的，我也有些收获。我先简单自我介绍一下，我现在就职于 Google。Google 的 FaaS 这里有一个小的案例可以去分享，我们当时做了一个中国的一个客户，大概用了 3000 个FaaS，这家客户叫茄子快传，他们用了半年左右，但是过了半年之后基本上切回去了。&lt;/p&gt;

&lt;p&gt;问题还是在于成本，我们都在讲，Lambda 是一个按量计费的产品，所以它成本会比较低。实际上当你的业务量特别大的时候，很有可能有非常大的成本，这种成本远远超过虚拟机的成本。&lt;/p&gt;

&lt;p&gt;我的问题是，如果有开源的 FaaS 产品，你会优先使用开源 FaaS 还是云上的 FaaS？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;从我的角度来说的话，我比较倾向于直接用云的，因为我用 FaaS 就是不想管理服务器，如果还要自己再部署一套 FaaS 对我来说是不太好的。 我还认识一个阿里的朋友，他把一个项目的成本从 800 万降到了 200 万，他怎么做到的呢？他把整个项目打包到一个函项里面去了。这个案例想说的是，每个项目都有一个阈值，然后你没有过阈值，可能就是省钱，阈值一过可能就要亏钱。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;王剑宇：&lt;/strong&gt;先谢谢涛哥和谢扬带给大家的一个技术分享！ 我来自北京，我在进行一个教育创业的项目，我比较关注的是认证服务这块，我一直在考虑到底是该怎么去实现这部分功能，以前是想说自己去写认证，但是认证其实说的是实现也容易，但是你要想把它做得很完善，其实并不容易。&lt;/p&gt;

&lt;p&gt;Auth0 之前我也尝试过，但是不是太稳定，这是一个问题。然后还有一个问题，现在国内登录的习惯，大家都是用微信或者手机号，而 Auth0 对国内的这种微信还有手机的支持是没有的。AWS 的 Cognito 我也用过，也是同样的问题。所以也是这个机会，正好我想了解一下 Authing，咱们 Authing 是否更接近于国内的用户习惯。还有第二个问题，我想了解一下有没有好的工具，来简化 FaaS 开发流程的。我之前使用 FaaS 做一些图形处理，搞的非常麻烦。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;Authing 对于国内用户来说确实是更加友好的，从刚才你的描述来看，Authing 完全可以满足你的需求。再回答第二个问题，如果说要你要是跨国使用的话，那么肯定推荐 Severless.com。因为他基本上兼容市面上所有主流的云厂商。其次 Serverless 已经被腾讯战略合作了，包括他的社区其实现在是由中国人来维护的，咱们用的话其实是非常方便。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;王剑宇：&lt;/strong&gt;好的，再我问一下，因为我之前一直使用的都是国外公司的云产品，然后我就在想，就像这 Authing 这种对 AWS 的支持和对腾讯与阿里的支持，有没有一些可能，我的意思是说，他会不会更侧重于对国内一些云服务厂商的支持？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;这事有点反直觉，我们现在对 AWS 的支持反而是最好的。另外 Authing 的流量来源，第一不是中国，是美国，中国只排第二。这说明我们是必须要走国际化路线的，也符合我们一开始的战略。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;胡鹏：&lt;/strong&gt;我先简单自我介绍一下，我之前一直是在区块链领域的，然后之前的工作是钱包相关的研发。因为我们做区块链的话，可能就是思考方式就会比较倾向于那种会考虑理想化的一些场景，就像对安全的一些极端的要求，对隐私的一些极端的要求。然后像刚刚说的 FaaS 的话，其实我让我想到一个问题，就是将很多东西都交给服务器，那么服务器其实就是在这里面权限特别大，可能会有安全上的考虑，尤其是有特殊要求的人。在我们密码学里面，我们现在来看有一个方向，在云上托管的数据是加密的，然后在此基础上进行加密计算，所以我不知道你们内部的产品研发方面有没有这个方向？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;我对加密这块不是很了解，我只知道有个同态加密的东西可以在加密结果上进行计算，而不用知道原文。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;胡鹏：&lt;/strong&gt;对，关于隐私计算还有零知识证明这样的技术。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;除了刚才说的这些，还有一个东西叫做 XAdES，这个是 W3C 的一个规范，比如可以用于你的毕业证的加密，然后给到公司，公司来验证你的文凭是否是真实的，这个也可以参考一下。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;王晓亮：&lt;/strong&gt;大家好，我现在在一家珠海移动公司，主要在大数据方向，所以我们在海外主要用的 Google Cloud，在国内用 AWS。我们用 Serverless 挺久了，其实就是因为我们的业务调用很复杂，比如说我整个的数据进来，然后触发了函数之后，会存储到 S3 什么地方去，或者说有一些数据会重新把它变成结构化的一些数据，最后可能再触发一些函数再存到另外一个地方。我看中间这样的很长的周期，其实整个的监控感觉不是特别好处理，因为涉及到很多不同的服务之间的一些中转，所以我想知道这块有没有相应的解决方案。这是第一个问题，第二个问题就是想知道有没有什么整合的 FaaS 方案。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;谢扬：&lt;/strong&gt;对。这可能只能用一些微服务的这种的措施来做服务治理，你写的每一个函数都需要注册到一个中央的函数服务中心里，然后用各种勾子来 track 他的访问轨迹，最后由一个可视化的界面来展示调用记录。第二个问题我还是推荐 Serverless.com，大家用起来会比较友好。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200217162159.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</content><author><name>ivy</name></author><category term="serverless" /><summary type="html">Serverless 正在改变未来软件开发的模式和流程，对于大多数应用而言，借助 Serverless 服务，开发者可以将绝大多数精力投入在业务逻辑的开发整合上，大大缩短开发周期，降低运维成本。本次主题将与大家探讨 Serverless 生态中缺少的工具以及潜在的创业机会。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/20200217155500.png" /></entry><entry><title type="html">案例 | 在 Odoo 中集成 Authing 完成单点登录</title><link href="http://localhost:4000/blog/%E5%9C%A8Odoo%E4%B8%AD%E9%9B%86%E6%88%90Authing%E5%AE%8C%E6%88%90%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/" rel="alternate" type="text/html" title="案例 | 在 Odoo 中集成 Authing 完成单点登录" /><published>2020-02-11T00:00:00+08:00</published><updated>2020-02-11T00:00:00+08:00</updated><id>http://localhost:4000/blog/%E5%9C%A8Odoo%E4%B8%AD%E9%9B%86%E6%88%90Authing%E5%AE%8C%E6%88%90%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95</id><content type="html" xml:base="http://localhost:4000/blog/%E5%9C%A8Odoo%E4%B8%AD%E9%9B%86%E6%88%90Authing%E5%AE%8C%E6%88%90%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/">&lt;p&gt;Odoo 是一套基于 Web 的开源商业业务应用程序。Odoo 的主要应用包括 CRM、网站构建器、电子商务、仓库管理、项目管理、计费和会计、销售点、人力资源、市场营销和制造等。&lt;/p&gt;

&lt;p&gt;Authing 在云上提供适用于 Web、iOS 和 Android 的通用身份认证和授权平台，可以帮助开发者和企业使用全新的方式、最简单的手段解决复杂的用户身份问题。&lt;/p&gt;

&lt;p&gt;本案例为 Odoo 集成 Authing 在云上实现单点登录的教程。&lt;/p&gt;

&lt;h2 id=&quot;问题&quot;&gt;问题&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;组织需要一套统一的账号体系来管理公司内外部的员工，并且能打通 Odoo；&lt;/li&gt;
  &lt;li&gt;除 Odoo 外，还有自研的系统和其他第三方系统；&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;解决方案&quot;&gt;解决方案&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;通过在 Odoo 中配置 OAuth 2.0 集成「使用 Authing 登录」从而完成对 Odoo 的单点登录；&lt;/li&gt;
  &lt;li&gt;自研系统直接通过 Authing 的 SDK 集成，将 Authing 作为身份中台向各个业务系统分发身份；&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;什么是-oauth-20&quot;&gt;什么是 OAuth 2.0&lt;/h2&gt;

&lt;p&gt;OAuth 2.0 是目前最流行的授权机制，用来授权第三方应用，获取用户数据。
这个标准比较抽象，使用了很多术语，初学者不容易理解。其实说起来并不复杂，阮一峰老师讲的非常好，请从这篇文章查看：&lt;a href=&quot;http://www.ruanyifeng.com/blog/2019/04/oauth_design.html&quot;&gt;http://www.ruanyifeng.com/blog/2019/04/oauth_design.html&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;集成效果&quot;&gt;集成效果&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/effect.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;如上图所示，用户点击「使用 Authing 登录」后跳转到「Authing 登录页面」，从 Authing 登录后跳回到 Odoo 完成登录。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/authing-guard.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;集成流程&quot;&gt;集成流程&lt;/h2&gt;

&lt;h3 id=&quot;在-authing-中创建-oauth-应用&quot;&gt;在 Authing 中创建 OAuth 应用&lt;/h3&gt;

&lt;p&gt;如果你还没有 Authing 账号，请到 authing.cn/login 中注册一个账号，注册完成后按照以下流程完成一个 OAuth 应用的创建。&lt;/p&gt;

&lt;p&gt;依次点击&lt;strong&gt;第三方登录&lt;/strong&gt; -&amp;gt; &lt;strong&gt;OAuth 应用&lt;/strong&gt;  -&amp;gt; &lt;strong&gt;创建 OAuth 应用&lt;/strong&gt;开始创建，如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/oidc.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;点击后会弹出如下对话框：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/oauth-form.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;必要参数解释&quot;&gt;必要参数解释：&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;应用名称&lt;/strong&gt;，必填，用户会在登录页面看到此应用名称；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;认证地址&lt;/strong&gt;，必填，一个 *.authing.cn 的二级域名，用户将访问此网址进行登录；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;回调 URL&lt;/strong&gt;，必填，回调到开发者自己业务的地址，此处请填写：
    &lt;ul&gt;
      &lt;li&gt;http://&lt;您的 Odoo=&quot;&quot; 网站域名=&quot;&quot;&gt;/auth_oauth/oea;http://&lt;您的 Odoo=&quot;&quot; 网站域名=&quot;&quot;&gt;/auth_oauth/signin；&lt;/您的&gt;&lt;/您的&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;授权模式&lt;/strong&gt;，必填，该 OAuth 应用支持的授权模式，此处请勾选「&lt;strong&gt;implicit&lt;/strong&gt;」模式：&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;示例：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/oauth-form-sample.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;创建完成后会获得应用密钥，如下所示，请保管好此信息。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/oauth-secret.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;在-odoo-中配置使用-authing-登录&quot;&gt;在 Odoo 中配置「使用 Authing 登录」&lt;/h3&gt;

&lt;p&gt;创建完 Authing 后打开你的 Odoo 网站，依次点击&lt;strong&gt;设置&lt;/strong&gt; -&amp;gt; &lt;strong&gt;常规设置&lt;/strong&gt; -&amp;gt; &lt;strong&gt;集成&lt;/strong&gt;，找到「&lt;strong&gt;OAuth 认证&lt;/strong&gt;」后打开此开关，如下图所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/odoo-open.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;打开开关后点击「OAuth 服务商」进入配置页面，如下所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/odoo-oauth-provider.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;在新页面中填写以下信息：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;服务商名称&lt;/strong&gt;，必填，写 Authing 便于标识；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;客户端 ID&lt;/strong&gt;，必填，在 Authing 平台中配置好的应用 ID；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;允许&lt;/strong&gt;，选填，是否启用此服务商，此处请勾选；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;正文&lt;/strong&gt;，必填，显示在 Odoo 网站上登录按钮的文字；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;身份验证网址&lt;/strong&gt;，必填，请填写：https://sso.authing.cn/authorize/&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;作用域&lt;/strong&gt;，必填，请填写：user；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;验证网址&lt;/strong&gt;，必填，请填写：https://sso.authing.cn/authenticate/；&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;数据网址&lt;/strong&gt;，必填，请填写：https://users.authing.cn/oauth/user/userinfo；&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/odoo-oauth-info.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;填写完成并保存后访问 &lt;您的 Odoo=&quot;&quot; 网址=&quot;&quot;&gt;/web/login 可看到网页上出现了「**使用 Authing 登录**」。&lt;/您的&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/odoo-effect.webp&quot; alt=&quot;assets/images/odooxauthing/effect.webp&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;体验登录&quot;&gt;体验登录&lt;/h2&gt;

&lt;p&gt;访问 &lt;您的 Odoo=&quot;&quot; 网址=&quot;&quot;&gt;/web/login 并点击「**使用 Authing 登录**」即可体验登录。&lt;/您的&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/blog/assets/images/odooxauthing/odooxauthing.webp&quot; alt=&quot;assets/images/odooxauthing/odooxauthing.webp&quot; /&gt;&lt;/p&gt;</content><author><name>ivy</name></author><category term="odoo" /><summary type="html">Odoo 是一套基于 Web 的开源商业业务应用程序。Odoo 的主要应用包括 CRM、网站构建器、电子商务、仓库管理、项目管理、计费和会计、销售点、人力资源、市场营销和制造等。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/20200217171108.png" /></entry><entry><title type="html">Geek Talk 036：Serverless 的前景和机会</title><link href="http://localhost:4000/blog/GeekTalk036Serverless-%E7%9A%84%E5%89%8D%E6%99%AF%E5%92%8C%E6%9C%BA%E4%BC%9A/" rel="alternate" type="text/html" title="Geek Talk 036：Serverless 的前景和机会" /><published>2020-02-10T00:00:00+08:00</published><updated>2020-02-10T00:00:00+08:00</updated><id>http://localhost:4000/blog/GeekTalk036Serverless%20%E7%9A%84%E5%89%8D%E6%99%AF%E5%92%8C%E6%9C%BA%E4%BC%9A</id><content type="html" xml:base="http://localhost:4000/blog/GeekTalk036Serverless-%E7%9A%84%E5%89%8D%E6%99%AF%E5%92%8C%E6%9C%BA%E4%BC%9A/">&lt;p&gt;本次与大家探讨 Serverless 生态中缺少的工具以及潜在的创业机会。&lt;/p&gt;

&lt;h2 id=&quot;主题serverless-的前景和机会&quot;&gt;主题：Serverless 的前景和机会&lt;/h2&gt;

&lt;p&gt;简介：Serverless 正在改变未来软件开发的模式和流程，对于大多数应用而言，借助 Serverless 服务，开发者可以将绝大多数精力投入在业务逻辑的开发整合上，大大缩短开发周期，降低运维成本。本次主题将与大家探讨 Serverless 生态中缺少的工具以及潜在的创业机会。&lt;/p&gt;

&lt;p&gt;时间：2月13日 19:00 - 21:00&lt;/p&gt;

&lt;p&gt;地点：&lt;strong&gt;线上视频会议&lt;/strong&gt;，报名确认后，邮件和微信通知视频入口。&lt;/p&gt;

&lt;p&gt;邮件发送详细地址，请确保邮箱地址和 &lt;strong&gt;微信ID&lt;/strong&gt; 正确&lt;/p&gt;

&lt;p&gt;人数：30人&lt;/p&gt;

&lt;p&gt;嘉宾：谢扬&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200211201759.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;蒸汽记忆创始人，SoLiD 中文社区（learnsolid.cn）发起人，连续创业者。&lt;/p&gt;

&lt;p&gt;曾任职字节跳动 LarkCloud 云服务部门核心 Hacker，负责⽇活过亿 Serverless 平台产品设计和技术研发，该平台支撑来头条系全产品矩阵：今日头条、抖音、西瓜视频、飞书等。&lt;/p&gt;

&lt;p&gt;2016 年创⽴⻰猫科技，研发容器云和 Low/No Code 平台（Gospely.com），获得Plug and Play、PreAngel 等资本投资。曾任好东西传送⻔ CTO，负责知识推荐和亿级维度舆情分析、统计⼯作，服务数⼗万专业⼈群。&lt;/p&gt;

&lt;p&gt;⻓期关注生产⼒科技，以提⾼社会生产⼒为个⼈使命。&lt;/p&gt;

&lt;p&gt;扫描以下二维码报名：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200211202308.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;关于-geek2startup&quot;&gt;关于 Geek2Startup&lt;/h2&gt;

&lt;p&gt;Geek2Startup 推出的专注于创业团队之间的小范围深度交流分享活动，定期邀请创业中 Geek 同 Startup 之间就产品、设计、开发和运营等维度进行交流，期待每次交流都能解决初创团队遇到的问题，并能互相碰撞出更多的火花，求质不求量，走心不走肾。&lt;/p&gt;

&lt;p&gt;目前已经进行超过 30 期，每一位嘉宾都很精彩。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200211202415.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</content><author><name>ivy</name></author><category term="serverless" /><summary type="html">本次与大家探讨 Serverless 生态中缺少的工具以及潜在的创业机会。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/20200211201759.png" /></entry><entry><title type="html">RBAC | 组织机构管理最佳实践</title><link href="http://localhost:4000/blog/rbac/" rel="alternate" type="text/html" title="RBAC | 组织机构管理最佳实践" /><published>2020-02-05T00:00:00+08:00</published><updated>2020-02-05T00:00:00+08:00</updated><id>http://localhost:4000/blog/rbac</id><content type="html" xml:base="http://localhost:4000/blog/rbac/">&lt;p&gt;在现实生活中，组、角色往往是分层嵌套的，呈树状结构，最常见的就是组织机构，如公司、学校等等。这篇文章，我们会假设一家互联网公司 —— 「非凡科技有限公司」，看看他们是如何使用 Authing 快速完成组织机构建模的。&lt;/p&gt;

&lt;p&gt;借助 Authing，可以快速&lt;a href=&quot;https://mp.weixin.qq.com/s/zRiymhIjTqfUlymjkGfEsA&quot;&gt;实现基于角色的访问控制（RBAC）&lt;/a&gt;。简单来说，RBAC 指的是通过用户的角色（Role）赋予其相关权限，这实现了细粒度的访问控制，并提供了一个相比直接授予单个用户权限，更简单、可控的管理方式。&lt;/p&gt;

&lt;p&gt;而在现实生活中，组、角色往往是分层嵌套的，呈树状结构，最常见的就是组织机构，如公司、学校等等。这篇文章，我们会设想一家互联网公司 —— 「非凡科技有限公司」，看看他们是如何使用 Authing 快速完成组织机构建模的。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;一非凡科技有限公司背景介绍&quot;&gt;一、非凡科技有限公司背景介绍&lt;/h2&gt;

&lt;p&gt;该公司约 300 名员工，其公司架构大致如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;一级部门有产品部、研发部、运营部、综合管理部&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;一级部门下面又有二级部门，如产品部中包含产品经理和设计等。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205182710.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这是一个典型的树状数据结构，有且仅有一个根节点，以及多个分层的节点。一般而言，根节点就是一家公司、一个组织，其他的每个节点都对应一个部门。&lt;/p&gt;

&lt;p&gt;‌&lt;/p&gt;

&lt;p&gt;这里有一点需要注意：在 Authing 中，这样的节点对应的是一个 Group，比如「非凡科技有限公司」是一个 Group，「产品部」也是一个 Group。我们要做的，是要把这些 Group 放到他在树上所属的位置。&lt;/p&gt;

&lt;p&gt;一个 Group 可以拥有多个角色（Role），一个角色包含一个或多个权限（Permission）；而一个 Group 由若干用户（User）组成，某个 Group 中的用户会继承该 Group 下的所有角色，从而具备相关权限。&lt;/p&gt;

&lt;p&gt;了解如何管理  Group 中的 User、如何管理 Group 中的 Role、如何配置 Role 的 Permission，请见文档：&lt;a href=&quot;https://docs.authing.cn/authing/sdk/sdk-for-node/rbac&quot;&gt;角色权限管理&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;了解如何查询单个用户的 Group, Role, Permission 列表，请见文档：&lt;a href=&quot;https://docs.authing.cn/authing/sdk/sdk-for-node/query-permissions&quot;&gt;查询用户权限&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;如何使用 Authing 完成组织机构管理&lt;/p&gt;

&lt;h3 id=&quot;1梳理组织机构节点&quot;&gt;1、梳理组织机构节点&lt;/h3&gt;

&lt;p&gt;首先，我们需要列举出该组织结构拥有的所有节点：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;非凡科技有限公司&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;产品部&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;研发部&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;运营部&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;综合管理部&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;产品经理&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;设计&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;开发&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;测试&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;运维&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;用户运营&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;渠道运营&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;HR&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;财务&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;行政&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这些节点在 Authing 中都是一个 Group，所以需要先创建这些 Group：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const 非凡科技有限公司 = await createGroup(&quot;非凡科技有限公司&quot;)
const 产品部 = await createGroup('产品部')
const 产品经理 = await createGroup('产品经理')
const 设计 = await createGroup('设计')
const 研发部 = await createGroup('研发部')
const 开发 = await createGroup('开发')
const 测试 = await createGroup('测试')
const 运维 = await createGroup('运维')
const 运营部 = await createGroup('运营部')
const 用户运营 = await createGroup('用户运营')
const 渠道运营 = await createGroup('渠道运营')
const 综合管理部 = await createGroup('综合管理部')
const HR = await createGroup('HR')
const 财务 = await createGroup('财务')
const 行政 = await createGroup('行政')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;‌&lt;/p&gt;

&lt;h3 id=&quot;2创建组织机构&quot;&gt;2、创建组织机构&lt;/h3&gt;

&lt;p&gt;接着创建组织机构（一组树状的 Group），这需要指定根节点对应的 Group:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let org = await authing.org.createOrg({
 rootGroupId: 非凡科技有限公司._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;3加入产品部及其子部门节点&quot;&gt;3、加入产品部及其子部门节点&lt;/h3&gt;

&lt;p&gt;‌&lt;/p&gt;

&lt;p&gt;接着插入产品部的各级节点：&lt;/p&gt;

&lt;p&gt;‌&lt;/p&gt;

&lt;p&gt;这里需要指定以下参数：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;组织机构 ID&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;该节点对应的 Group ID&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;该节点的父节点的 Group ID&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如加入产品部节点时，groupId 为 Group&lt;产品部&gt; 的 ID，parentGroupId 为 Group&lt;非凡科技有限公司&gt; 的 ID。&lt;/非凡科技有限公司&gt;&lt;/产品部&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;await authing.org.addNode({
 orgId: org._id,
 groupId: 产品部._id,
 parentGroupId: 非凡科技有限公司._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 产品经理._id,
 parentGroupId: 产品部._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 设计._id,
 parentGroupId: 产品部._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4以此类推加入所有节点&quot;&gt;4、以此类推，加入所有节点&lt;/h3&gt;

&lt;p&gt;研发部：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// 添加研发部
await authing.org.addNode({
 orgId: org._id,
 groupId: 研发部._id,
 parentGroupId: 非凡科技有限公司._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 开发._id,
 parentGroupId: 研发部._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 测试._id,
 parentGroupId: 研发部._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 运维._id,
 parentGroupId: 研发部._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;运营部：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;await authing.org.addNode({
 orgId: org._id,
 groupId: 运营部._id,
 parentGroupId: 非凡科技有限公司._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 用户运营._id,
 parentGroupId: 运营部._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 渠道运营._id,
 parentGroupId: 运营部._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;‌&lt;/p&gt;

&lt;p&gt;综合管理部：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// 添加综合管理部
await authing.org.addNode({
 orgId: org._id,
 groupId: 综合管理部._id,
 parentGroupId: 非凡科技有限公司._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: HR._id,
 parentGroupId: 综合管理部._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 财务._id,
 parentGroupId: 综合管理部._id
})
await authing.org.addNode({
 orgId: org._id,
 groupId: 行政._id,
 parentGroupId: 综合管理部._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;5查看最新组织机构结构&quot;&gt;5、查看最新组织机构结构&lt;/h3&gt;

&lt;p&gt;到现在，我们的非凡科技有限公司组织机构见建模完成了，是时候获取其最新的树状结构了：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const { tree } = await authing.org.findById(org._id)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;​               &lt;img src=&quot;https://internal-api-space-hl.feishu.cn/space/api/file/out/zSOvcI4ejux1n1410JnoDNfAHpsLAUIVoA9J04p9ssf7lQ2DlO/&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;二如何向组织机构中添加用户和配置权限&quot;&gt;二、如何向组织机构中添加用户和配置权限&lt;/h2&gt;

&lt;p&gt;前面说过，Authing 中一个组织结构节点对应一个  Group，对此我们提供了完整的 SDK。&lt;/p&gt;

&lt;h3 id=&quot;1为组织机构节点配置权限&quot;&gt;1、为组织机构节点配置权限&lt;/h3&gt;

&lt;p&gt;相关 SDK 见：&lt;a href=&quot;https://docs.authing.cn/authing/sdk/sdk-for-node/rbac&quot;&gt;角色权限管理&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;非凡科技有限公司的所有员工，都具备开具发票、使用公司邮箱的权限。与此对应，在此我们创建两个角色：Invoice Submitter 和 Corp Email User。&lt;/p&gt;

&lt;p&gt;‌&lt;/p&gt;

&lt;p&gt;其中 Invoice Submitter 具备以下权限：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;invoice:login&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;invoice:create&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;invoice:query&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;invoice:list&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;invoice:delete&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Corp Email User 具备以下权限：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;corp-email:login&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;corp-email:send&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;corp-email:receive&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;corp-email:list&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;corp-email:detail&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这可以通过以下代码完成：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const InvoiceSubmitter = await createRole('Invoice Submitter')
let permissions = await createPermissionBatch(['invoice:login', 'invoice:create', 'invoice:query', 'invoice:list', 'invoice:delete'])
await authing.authz.addPermissionToRoleBatch({
 roleId: InvoiceSubmitter._id,
 permissionIdList: permissions.map(x =&amp;gt; x._id)
})
const CorpEmailUser = await createRole('Corp Email Use')
permissions = await createPermissionBatch(['corp-email:login', 'corp-email:send', 'corp-email:receive', 'corp-email:list', 'corp-email:detail'])
await authing.authz.addPermissionToRoleBatch({
 roleId: CorpEmailUser._id,
 permissionIdList: permissions.map(x =&amp;gt; x._id)
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;接着让 Group 非凡科技有限公司具备 Invoice Submitter 和 Corp Email User 两个角色：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;await authing.authz.addRoleToGroup({
 roleId: InvoiceSubmitter._id,
 groupId: 非凡科技有限公司._id
})
await authing.authz.addRoleToGroup({
 roleId: InvoiceSubmitter._id,
 groupId: 非凡科技有限公司._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;现在，非凡科技有限公司这个节点将会具备  Invoice Submitter 和 Corp Email User 两个角色&lt;/p&gt;

&lt;h3 id=&quot;2向组织机构节点添加用户&quot;&gt;2、向组织机构节点添加用户&lt;/h3&gt;

&lt;p&gt;相关 API 见：&lt;a href=&quot;https://docs.authing.cn/authing/sdk/sdk-for-node/rbac&quot;&gt;角色权限管理&lt;/a&gt;。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;某个 Group 内的用户会继承该 Group 内所有角色的权限（如果有重叠，将会取并集）。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;下面我们往用户池中注册新用户，然后将其加入非凡科技有限公司 Group 中：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const user = await createUser()
await authing.authz.addUserToGroup({
 groupId: 非凡科技有限公司._id,
 userId: user._id
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;3查询用户具备的权限&quot;&gt;3、查询用户具备的权限&lt;/h3&gt;

&lt;p&gt;相关 API  见：&lt;a href=&quot;https://docs.authing.cn/authing/sdk/sdk-for-node/query-permissions&quot;&gt;查询用户权限&lt;/a&gt;。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const { rawList: permissionList } = await authing.userPermissionList(user._id)‌
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;permissionList 如下：可见，此用户已经继承了 Invoice Submitter 和 Corp Email User 两个角色的所有权限：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[
  'invoice:login',
  'invoice:create',
  'invoice:query',
  'invoice:list',
  'invoice:delete',
  'corp-email:login',
  'corp-email:send',
  'corp-email:receive',
  'corp-email:list',
  'corp-email:detail',
 ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;开发者拿到用户权限列表之后，可以在业务代码层判断用户是否具备某一特定权限，如：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;if &quot;corp-email:login&quot; not in user.permissionList:
  return &quot;Permission Denied&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4使用-rbac-的优势&quot;&gt;4、&lt;strong&gt;使用 RBAC 的优势&lt;/strong&gt;&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;系统性、可重复性的权限指派&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;更方便的用户权限审计，快速定位问题&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;快速地添加、修改角色，甚至可以调用 API 实现&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;减少授予用户权限时发生错误的可能性&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;引入第三方用户/新用户/未登录用户时，赋予他们预先配置好的角色，比如 guest 分组&lt;/p&gt;

    &lt;p&gt;更多关于 RBAC 的介绍请参考&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzU1OTk1NjU4MA==&amp;amp;mid=2247484085&amp;amp;idx=1&amp;amp;sn=c59e44be19951c8f08725e8e25985b3f&amp;amp;scene=21#wechat_redirect&quot;&gt;实现基于角色的访问控制（RBAC）&lt;/a&gt;。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;三总结&quot;&gt;三、总结&lt;/h2&gt;

&lt;p&gt;本文我们以「非凡科技有限公司」为例，介绍了如何将一棵组织机构树转换成一组嵌套、有层次的 Group。通过 Authing 提供的分组角色权限管理 API，可以为 Group 配置角色、指派成员，使得该 Group 中的用户继承所需的权限，从而完成组织机构建模与权限控制。&lt;/p&gt;

&lt;h3 id=&quot;关于-authing&quot;&gt;关于 Authing&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205182918.png&quot; alt=&quot;&quot; /&gt;Authing 是中国领先的 IDaaS 服务提供商，对标美国独角兽 Auth0。创始团队来自字节跳动、百度、IBM、阿里云、滴滴出行等互联网企业。Authing 提供开发者友好、易拓展的身份认证和授权平台，赋能企业在云端管理身份，主要功能包括：单点登录、用户分析、扫码登录、多因素认证、行为审计、风险控制、跨平台设备管理、IoT 身份认证等；兼容国际各类标准协议：OAuth2.0、OIDC、SAML、AD/LDAP、WS-Fed、JWT 等。 支持云交付和私有化部署方式，帮助企业和开发者千倍级提升生产效率。&lt;/p&gt;

&lt;p&gt;Authing 自上线以来已经服务海内外超过 3000 名企业开发者、拥有约 50 万的开发者社区和托管数百万终端用户，每月百万人次通过 Authing 平台进行认证，并已经服务数十家付费企业客户，覆盖教育、人工智能、出版社、 物联网等多个行业。&lt;/p&gt;</content><author><name>cj</name></author><category term="RBAC" /><summary type="html">在现实生活中，组、角色往往是分层嵌套的，呈树状结构，最常见的就是组织机构，如公司、学校等等。这篇文章，我们会假设一家互联网公司 —— 「非凡科技有限公司」，看看他们是如何使用 Authing 快速完成组织机构建模的。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://inrupt.com/sites/default/files/2018-10/Layer%200%20%281%29_0.png" /></entry><entry><title type="html">一份所有人都能理解的关于 Authing 的介绍</title><link href="http://localhost:4000/blog/a-intro-about-authing-to-everyone/" rel="alternate" type="text/html" title="一份所有人都能理解的关于 Authing 的介绍" /><published>2020-02-03T00:00:00+08:00</published><updated>2020-02-03T00:00:00+08:00</updated><id>http://localhost:4000/blog/a-intro-about-authing-to-everyone</id><content type="html" xml:base="http://localhost:4000/blog/a-intro-about-authing-to-everyone/">&lt;p&gt;我们加入了这场游戏，带着不同的视角。&lt;/p&gt;

&lt;h2 id=&quot;authing-解决什么问题&quot;&gt;Authing 解决什么问题？&lt;/h2&gt;

&lt;h3 id=&quot;解决开发者的问题&quot;&gt;解决开发者的问题&lt;/h3&gt;

&lt;p&gt;在程序开发的过程中，&lt;strong&gt;用户认证和权限处理是非常复杂的一个模块&lt;/strong&gt;。涉及到很多枯燥，重复的工作，比如验证用户身份，验证权限，密码加密与校验，鉴权（这又涉及到安全）。&lt;/p&gt;

&lt;p&gt;举个现实例子：比如你是一个办公自动化软件厂商，你新签了一个客户，对方是一个 5 万人的企业组织，你是否要在你的软件里新建 5 万个账户？ 你准备如何建？ 你是否在你的程序设计中考虑未来的这个场景？如果再复杂一点场景的呢（比如这 5 万人的组织，还需要和他们业务上下游供应商的软件系统打通身份认证进而数据共享，你准备通过哪一个协议，如何实现这个对接）？&lt;/p&gt;

&lt;p&gt;你是否需要有人来解决这些问题？10天？ 20 天？ 30 天？还是 60 天？它的成本是多少？可能存在的风险？&lt;/p&gt;

&lt;h3 id=&quot;解决企业管理者的问题&quot;&gt;解决企业管理者的问题&lt;/h3&gt;

&lt;p&gt;你是一个企业管理者，你的公司可能采购了或使用了 2~3 套不同的软件供货商的产品。你的员工还要使用你供应链上下游供货厂商的软件系统，你的员工是否在这些不同的环境当中，一套密码走天下，或和他人共享账号？你是否可以知晓并管控这些风险？&lt;/p&gt;

&lt;p&gt;在这些不同网络边界环境中，你如何区分，分析，那些异常的登录，异常的访问？如何确保你业务数据的安全？ 是否可以通过这些登录的数据，不同应用间访问调用的授权记录，分析、识别你业务潜在的风险与变化。&lt;/p&gt;

&lt;p&gt;当你的应用需要和你供应链上下游厂家的应用共享数据，你如何实现不同组织间、不同应用间的权限对接，身份追踪？你是否需要跨组织的身份识别，进而是身份授权（经理的权限和员工的权限的授权区别），你准备如何打通，如何处理不同组织间身份的识别与鉴权，进而实现数据共享，同时保证整个业务链更流畅，更安全？&lt;/p&gt;

&lt;p&gt;当你面对 2~3 个不同软件供货商也许还好，那当我们把这个数量放大到 8~10，每一个员工的入职，离职，职位变动是否都牵涉到账号的开通和权限管理，注销和变更。每一个软件系统，每一个不同员工，每一个不同身份变更，需要多少次操作？我想没有人会喜欢这个操作。&lt;/p&gt;

&lt;p&gt;当你面对不止一家供货商的软件系统，面对他们各自不同的后端用户系统，鉴权管理，技术实现。你计划如何应付自如？&lt;/p&gt;

&lt;h3 id=&quot;解决终端用户的问题&quot;&gt;解决终端用户的问题&lt;/h3&gt;

&lt;p&gt;作为终端用户，你是否每天要面对不同的应用、 不同的系统、不同的账号？ 牢记不同的密码，不同的用户名？ 抑或一套账号密码走天下？如果走到哪里都可以让你刷脸支付，刷脸吃饭，刷脸解锁，听着是不是很美好？&lt;/p&gt;

&lt;p&gt;再进一步，你是否想更多保护自己的隐私，自由掌控你在这些不同系统上的数据，全部在你手里。就如你可以在微信里登录各种各样的小程序，你可以授权你的昵称，你的性别，你的头像，为啥不能再多授权一点呢？ 比如你的收货地址，你的简历，你的相册，你昨天写的一份文档，你在大学时代所有的照片。你修改了你的头像，你的昵称，你的收货地址，你的简历，所有这些小程序里面的读到的信息都改变了。你下架了你的简历，所有小程序-招聘类的 APP 都不再有你最新的简历，你开放了你的简历，所有照片类小程序都可以读到你的简历数据（至于每一个 APP 里如何呈现，组合这些数据是程序的事情）。&lt;/p&gt;

&lt;p&gt;你想买一个北京市内环内，总价 800-900 万， 3 房 2 厅，100 平以上，楼层朝南，税费在 20 万以下的不动产，你只需要把这个需求写出来，开放读取权限，所有的房产类小程序可以自动搜索到你的需求，为你匹配，把结果发送给你，然后由你决定打电话，由谁帮你完成交易。而不是你去不同的网站注册账户，上传需求，一遍又一遍重复的劳动。&lt;/p&gt;

&lt;p&gt;Authing 就是为解决上面的问题而生，从身份开始，从企业端开始。我们为企业提供一套效率工具，进而触达每一个人。&lt;/p&gt;

&lt;h3 id=&quot;现实的世界是什么样子&quot;&gt;现实的世界是什么样子&lt;/h3&gt;

&lt;p&gt;现实世界，我们的数字身份存在于一个虚拟的网络世界，为我们守护者不同应用的数据。在这个虚拟世界我们就是一串 0 和 1 。 在 WEB 最开始的阶段，每个人架起自己的网站，通过超文本向外界展示自己，分享自己，WEB 赋予了每一个个体通过互联网触达这个世界每一个角落的可能。后来世界发生了变化，人们发现可以通过 Web 做的更多，有了 CRM 系统，OA 系统，营销系统，论坛系统，各种各样的系统，通过数字世界的 0 和1 帮我们守护这些不同系统的数据，通过一个超链接分享我们的数据。再后来，当第一部 iPhone 被创造的时候，移动互联网来到了这个世界，随后是越来越多的 App ，我们生活在这些不同的 App ,在每一个 App 里面有一个我们的身份。&lt;/p&gt;

&lt;p&gt;一开始足够多的 App 占据了我们的生活，到后来一些超级 App 逐渐占有我们访问量的 80% ，再后来 App 可以支持手机短信登录，可以支持使用其他超级 App 登录，超级 App 成为其他 App 的母体（如微信，支付宝）。总算为我们缓解了一下身份的问题。可是 App 却拒绝彼此之间互动，我们很难将 App-1 里面的数据分享到 App-2（想象一下早期微信拒绝 163 的音乐转发，包括现在也是，你必须通过浏览器中转，才能在微信里用支付宝转账）。我们也不可能使用搜索引擎整合不同 App 之间大量的数据。&lt;/p&gt;

&lt;p&gt;这就是现实世界：每一个组织，每一个企业都在想怎么让我们留存在他们的平台，他们的城堡，他们的护城河之内（网络世界的我们就是 0 和 1）。&lt;/p&gt;

&lt;h3 id=&quot;为什么是现在&quot;&gt;为什么是现在？&lt;/h3&gt;

&lt;p&gt;云计算赋予了企业更多可能， SaaS 应用也逐渐成为应用软件新的主流打开方式。 不同的 SaaS 解决不同的问题，当我们越来越多的使用云，我们也将越来越多的面对不同的 SaaS 。 所以我们看到了 Okta , Auth0 , PingIdentity , Yufuid , AWS cognito 等等这些组织，在努力解决这些问题，身份与统一协作。&lt;/p&gt;

&lt;p&gt;我们也加入了这场游戏，带着不同的视角：如何更好的共享数据。&lt;/p&gt;

&lt;h3 id=&quot;为什么是我们&quot;&gt;为什么是我们？&lt;/h3&gt;

&lt;p&gt;也可以是任何人，只是我们还没有看到和我们拥有一样观察的同类。&lt;/p&gt;

&lt;h3 id=&quot;我们将如何做&quot;&gt;我们将如何做？&lt;/h3&gt;

&lt;p&gt;我们从把 Authing 打造为中国版的 Auth0 开始，为企业提供一套效率工具，接管复杂的权限设计，认证，授权对接，进而触达每一个个体，通过守护他们的数据，让你、我、让每一个人可以授权更多。&lt;/p&gt;

&lt;p&gt;Auth0 已被验证过的商业模式，详情&lt;a href=&quot;https://mp.weixin.qq.com/s/xxgKGwCBMQjS6nKB2tYVgg&quot;&gt;为什么 Auth0 值十亿美金?&lt;/a&gt;，最起码在中国我们没看到这么一家企业类似，除了 Authing。更多了解：&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzU1OTk1NjU4MA==&amp;amp;mid=2247483911&amp;amp;idx=1&amp;amp;sn=fc9b87a2dab0bdab560abaf1f599524c&amp;amp;chksm=fc0e150ccb799c1ad23a2964d407ed139d64598a40dee8f6ef1e2f5e5bdc6046a3431040d580&amp;amp;token=493708779&amp;amp;lang=zh_CN#rd&quot;&gt;Auth0 和 Authing，谁是身份云的高脚杯？&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;没讲太多技术，面对的问题，我想每一个人都感同身受。&lt;/p&gt;

&lt;h4 id=&quot;关于-authing&quot;&gt;关于 Authing&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205182918.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Authing 是中国领先的 IDaaS 服务提供商，对标美国独角兽 Auth0。创始团队来自字节跳动、百度、IBM、阿里云、滴滴出行等互联网企业。Authing 提供开发者友好、易拓展的身份认证和授权平台，赋能企业在云端管理身份，主要功能包括：单点登录、用户分析、扫码登录、多因素认证、行为审计、风险控制、跨平台设备管理、IoT 身份认证等；兼容国际各类标准协议：OAuth2.0、OIDC、SAML、AD/LDAP、WS-Fed、JWT 等。 支持云交付和私有化部署方式，帮助企业和开发者千倍级提升生产效率。&lt;/p&gt;</content><author><name>duxinshuai</name></author><category term="sticky" /><summary type="html">我们加入了这场游戏，带着不同的视角。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://cdn.authing.cn/blog/wtfauthing.jpg" /></entry><entry><title type="html">论文推荐：通过让公民控制自己的数据简化政府流程</title><link href="http://localhost:4000/blog/solid-flemish/" rel="alternate" type="text/html" title="论文推荐：通过让公民控制自己的数据简化政府流程" /><published>2020-01-29T00:00:00+08:00</published><updated>2020-01-29T00:00:00+08:00</updated><id>http://localhost:4000/blog/solid-flemish</id><content type="html" xml:base="http://localhost:4000/blog/solid-flemish/">&lt;p&gt;SoLiD 是一个令人兴奋的新项目，由万维网发明者 Tim Berners-Lee 爵士在麻省理工学院启动。 该项目旨在从根本上改变 Web 应用程序的中心化趋势， 它将真正地让数据所有权属于用户，并改善隐私问题。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://inrupt.com/solid&quot;&gt;SoLiD&lt;/a&gt; 是一个令人兴奋的新项目，由万维网发明者 Tim Berners-Lee 爵士在麻省理工学院启动。 该项目旨在从根本上改变 Web 应用程序的中心化趋势， 它将真正地让数据所有权属于用户，并改善隐私问题。&lt;/p&gt;

&lt;p&gt;本文是 SoLiD 项目在比利时的实践经验，作者有 Web 创始人 Tim 爵士、SoLiD 的核心开发者 Euben Verborgh（编者最爱的一名 SoLiD 开发者）等。详见 [SoLid中文社区]: https://learnsolid.cn/，对「数据主权」主题感兴趣的读者可以加微信：&lt;code class=&quot;highlighter-rouge&quot;&gt;jinjian0414&lt;/code&gt; ，加入微信群讨论。&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;&lt;strong&gt;适合阅读本文的读者包括：&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;对新技术和自动化敏感、能感知技术趋势的开发者；&lt;/li&gt;
  &lt;li&gt;渴望提升国家治理水平的官员；&lt;/li&gt;
  &lt;li&gt;医疗和保险等民生行业的从业者；&lt;/li&gt;
  &lt;li&gt;渴望创新的企业家；&lt;/li&gt;
  &lt;li&gt;在寻找新方向、敢于承担巨大风险的投资者；&lt;/li&gt;
  &lt;li&gt;对新趋势好奇的早期尝鲜者；&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;本文作者&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Raf Buyle, Ruben Taelman, Katrien Mostaert, Geroen Joris2, Erik Mannens, &lt;strong&gt;Ruben Verborgh&lt;/strong&gt; and &lt;strong&gt;Tim Berners-Lee&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;涉及机构：&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;imec IDLab - Ghent University, Ghent, Belgium ( raf.buyle@ugent.be )&lt;/li&gt;
  &lt;li&gt;Informatie Vlaanderen, Flemish Government, Brussels, Belgium&lt;/li&gt;
  &lt;li&gt;Department of Computer Science - University of Oxford, Oxford, UK&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;0-概要&quot;&gt;0. 概要&lt;/h2&gt;

&lt;p&gt;政府为了提供更好的公共服务，通常会存储大量的个人信息，比如公民姓名、家庭住址、婚姻状况和职业等。同时由于政府由各种政府机构组成，因此经常存在多个数据副本。这对数据一致性、隐私性和访问控制提出了更高的要求，特别是在 GDPR 和 CCPA 等类似的法律出台后。&lt;strong&gt;为了解决这个问题，我们探索了一种基于名为「SoLiD」的技术生态，这种技术可以让公民在自己的数据存储柜中维护自己的数据。&lt;/strong&gt;我们已经将 SoLiD 用于两个影响力很大的场景，在这两个场景中，公民的数据存储在个人数据库柜中，任何组织可以在得到公民授权的情况下访问公民的数据，同时公民可以选择授权哪些数据给访问者。&lt;strong&gt;我们发现 SoLiD 可以高效重塑公民与公民之间的关系、公民与数据的关系和公民与应用的关系。我们坚信这个实验可以加速公共行政管理效率和公民控制自己数据的进程。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Keywords:&lt;/strong&gt; 个人数据、去中心化、GDPR、Solid、Linked Data。&lt;/p&gt;

&lt;h2 id=&quot;1-介绍&quot;&gt;1. 介绍&lt;/h2&gt;

&lt;p&gt;随着《通用数据保护条例》（GDPR）的出台，欧盟委员会提供了一个旨在&lt;strong&gt;赋予个人数据控制权的法律&lt;/strong&gt;。这个法律不一定会对数据存储商不利，如果合适的使用这项法律，GDPR 可以让以前复杂的数据数据流通变得简单。欧洲公司想要符合 GDPR 规范需要耗费巨大的成本和资源，而国际公司和跨国公司也必须尊重 GDPR 带给欧盟成员的权利。这造成了一些反作用，那些在欧洲且遵循 GDPR 的公司变得越来越不欢迎，反而那些非欧洲公司在遵循 GDPR 上有明显优势。&lt;/p&gt;

&lt;p&gt;并非所有受 GDPR 约束的组织都有可疑或恶意的意图，这里面有很多组织在试图遵守法律时遇到了很大的困难。地方、地区和国家政府肯定会遇到此类问题。政府的机构层级复杂，每层都有历史性增长的数据需求和流程。因此，公民数据存在很多副本，这些副本导致的安全性和法律问题已经存在于很多部门。这些政府现在要求从技术上符合 GDPR 规范，以简化他们的数据管理成本。&lt;/p&gt;

&lt;p&gt;当前，&lt;strong&gt;政府层级的数据处理面临的最大问题是：如何平滑的将数据从 A 迁移到 B&lt;/strong&gt;。这不仅在不同领域之间带来了许多技术挑战，当政府开始“数据培训”时，这也成为一个复杂的法律问题，因为涉及到的服务器过多。如：数据经过 A，B，C 和 D 站，而 B 和 C 在法律上不允许看到 A 和 D 可以看到的所有数据。因此，存在复杂的过程来精确验证 B 和 C 的访问权限是什么，然后在将数据推送到 D 时重新整合它们的结果。一个明显的例子是低排放区（LEZ），LEZ 禁止在市中心或仅在特定条件下允许车辆行驶，因为它们散发出太多有害物质。在法兰德斯，车辆与自然人进入 LEZ 时，联邦信息检查车牌号与所有人是否进入到了指定区域；最终数据经过处理，并判断是否允许车辆在城市内通行。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;「SoLiD」生态系统通过「公民自有数据存储柜（Personl Online Data，Pod）」 来解决上述问题，这样的好处是所有的公共和私人数据都存储在一个地方。&lt;/strong&gt;每个机构都不需要在 A 和 D 之间移动数据，而是请求公民授权自己能查看哪些数据。这样，数据就不必到处移动，并且可以自动评估每个数据请求是否是 GDPR 合规的。在线上和线下控制我们的个人数据是一个趋势性主题，有大量研究在此领域。这里面的关键概念是人们可以选择将个人数据存储在何处，这些数据是去中心化存储的。与 SoLiD 技术相似的还有区块链技术，它通常也被认为是个人数据管理的解决方案。SoLiD 相较区块链的优势是天生是协议化的，不需要各方沟通就可以互相交换数据，而区块链不认识彼此各方达成的协议。区块链对于在没有中央银行或中央管理机构的情况下进行支付的情况下非常有效，比特币是一个成功的案例。区块链可以跨多个节点复制数据，如果你在不需要受信任的第三方时，可以计划使用区块链。如果你是核心参与者，或者各方之间相互信任， 那么你不需要区块链。而且，区块链的不变性意味着无法删除数据，这可能是一个挑战 GDPR 第 17 条赋予的人们删除其个人数据的权利。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;在本文中，我们探讨了对个人数据进行控制的观点，并讨论了我们使用 SoLiD 实现的两个特定用例。&lt;/strong&gt;SoLiD 提供了基于开放标准和基于 Web 的生态系统。根据 Harrison，Pardo＆Cook 的说法，生态系统是一个隐喻，通常用来表达参与者、组织、物质基础设施和象征性资源之间相互依存的社会系统，而这种生态必须在技术驱动的信息密集型社会系统中创建它们。数字生态系统的一个典型例子是开放数据生态系统。&lt;strong&gt;开放数据是指政府义务的在他们的网站上免费提供其非隐私敏感和非机密数据网络。&lt;/strong&gt;开放数据重用依赖于数据提供者提供的数据和元数据，而提供者则依赖于重用者的反馈来增加数据质量。尽管开放数据生态系统中的所有参与者都相互依赖有效地发展自己的业务，公共行政部门和决策者最有可能引导这些开放的政府生态系统。Zuiderwijk，Janssen 和 Davis指出开放数据生态系统的挑战是相关的&lt;strong&gt;“政策，许可，技术，融资，组织，文化和法律框架，以及 ICT 基础设施”&lt;/strong&gt; 。开放数据将“单向街道”重新连接为“双向通信”的生态系统，可能与使公民控制其个人数据的挑战同样困难。通过将 SoLiD 的方法应用于两种具有高影响力的场景，Flemish 政府的目标是建立能让公民控制自己数据的能力。&lt;/p&gt;

&lt;p&gt;本文的结构如下：在下一节中，我们将介绍我们要解决的挑战。之后，我们在章节 3 中介绍有关 SoLiD 的基础知识；在第 4 节中，我们讨论了使用 SoLiD 解决挑战的方法， 然后在第 5 节中讨论我们的实现。最后，我们得出结论并在第 6 节中介绍我们的经验教训。&lt;/p&gt;

&lt;h2 id=&quot;2-挑战&quot;&gt;&lt;strong&gt;2. 挑战&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;比利时北部联邦国家和地方政府旨在增强公民的能力，使其可以在公共服务、银行、健康保险和电信提供商等不同环境下在线重用其个人信息。政府通常是个人数据（例如住所、医疗信息等）的托管方，这些信息存储公共行政部门的各种信息系统这种。Flanders 的政府管理部门之间允许共享和重用数据，这样减轻了公民的管理行政负担，是欧洲实施“仅一次原则”的体现 。但是实际上，公共行政部门正在努力控制公民的数据。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第一个挑战是政府管理部门努力保留个人数据，&lt;/strong&gt;例如：最新的电子邮件地址、电话号码或银行帐号。由于一些公民很少与政府联系，个人信息在各种信息系统中通常已经过时。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第二个挑战涉及允许公民在不同的环境中重用其数据&lt;/strong&gt;，例如在申请新工作时授权自己的文凭。GDPR 法规 2016/679 声明：&lt;/p&gt;

&lt;p&gt;“为了确保自由给予同意，不得提供同意在特定情况下处理个人数据的有效法律依据 是数据主体和控制器之间的明显失衡，尤其是在 控权人是公共机构，因此不太可能自由同意在特定情况下的所有情况下都应考虑在内。”（欧洲委员会， 2016年，第43条）。&lt;/p&gt;

&lt;p&gt;换句话说，政府与公民之间的关系通常被认为是不平衡的关系，因为政府拥有比公民更多的权力。因此，获得公民的同意后重用政府信息系统中管理的权威数据，不能认为是自由提供的。欧洲政府部门之间共享数据不是基于给定的同意，而是具有特定的合法依据。&lt;/p&gt;

&lt;p&gt;因此，&lt;strong&gt;我们主要研究的问题是：政府程序如何实现通过使公民控制其个人数据来简化 GDPR 合规成本？&lt;/strong&gt;这个研究问题有两个观点：&lt;strong&gt;一方面，公民如何与政府部门共享数据？另一方面，公民如何重用存储在政府信息中的数据（这些数据的用途各不一样）？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;该项目评估了 SoLiD 的去中心化原则来解决这些障碍。SoLiD 是一个生态系统，可让个人将数据存储在他们的Data Pod（数据柜）。这使用户可以真正控制其数据，因为他们可以选择在何处存储他们的数据以及谁可以访问。&lt;strong&gt;整套技术基于语义网技术（Linked Data）和去中心化，对于想让用户重新控制数据的政府部门和私人组织有很大价值。&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;3-solid&quot;&gt;&lt;strong&gt;3. SoLiD&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;SoLiD 是一个基于 Web 的生态系统，它通过提供&lt;strong&gt;个人数据柜将数据与应用程序分开&lt;/strong&gt;。个人数据柜让他们可以存储任意数据，同时可以授权哪些人、哪些应用有哪些权限读写他们的个人数据柜。&lt;/p&gt;

&lt;p&gt;图1 显示了 SoLiD 与当前应用程序体系结构的对比。其特点是不用依赖一些应用程序，公民可以控制自己的个人数据。应用程序需要从公民那里请求访问权限，以便能够对其数据进行操作。&lt;/p&gt;

&lt;p&gt;重要的是，&lt;strong&gt;SoLiD 不是应用程序或平台，而是协议：开放的标准和约定&lt;/strong&gt;。它基于现有的 Web 标准，包括 Linked Data 技术栈，任何人都可以实现他们。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205231734.png&quot; alt=&quot;&quot; /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;图片 1. Current applications are a combination of app and data. Thereby, the app becomes a centralisation point, as all interactions with that data have to go through the app. By introducing the concept of a personal data pod, Solid pushes data out of applications, such that the same data can be managed with different applications. This removes the dependency on a centralised application, as data can be stored independently in a location of the citizen’s choice.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Data Pod 是个人存储柜，可以存在于 Web 上的任何位置&lt;/strong&gt;，例如你自己搭建的服务器，社区搭建的免费服务器或政府提供的存储空间。在 Pod 中，所有者拥有数据创建、编辑、和控制管理的权限。所有者可以决定授予哪些人拥有权限，例如允许家庭成员看到他们的假期照片或允许同事阅读会议笔记。而且，人员、组织和应用程序可以向 Pod 的公共收件箱发布请求以获取对个人数据的访问权限。人们至少拥有一个数据柜，但他们还可以拥有其他多个 Pod，例如用于家庭数据、工作数据和医疗数据等。&lt;/p&gt;

&lt;p&gt;而&lt;strong&gt;典型的中心化应用程序要求用户将数据存储在应用程序，SoLiD 通过使数据个人化来扭转这一局面，并允许用户授权哪些应用程序可以用我的数据。&lt;/strong&gt;虽然简单的应用程序只需要一个 Pod，但 SoLiD 的真正功能在于让应用程序组合来自多个 Pod 的数据，这减少了很多数据对齐会产生的成本。例如，SoLiD 上的社交网络应用程序可以将个人信息（例如帖子、朋友、评论和喜欢的信息）存储在个人数据柜中，而他们的可视化需要组合不同数据 Pod 的数据。这解决了两个基本问题，首先，数据不再需要在不同的应用程序中复制，因为应用程序将指向单个副本。二是，不再出现同步问题：因为只有一个副本数据，应用程序不会再有不同步的数据。&lt;/p&gt;

&lt;h3 id=&quot;solid-的巨大优势主要体现在以下特点上&quot;&gt;SoLiD 的巨大优势主要体现在以下特点上：&lt;/h3&gt;

&lt;h4 id=&quot;1--独立身份&quot;&gt;1.  &lt;strong&gt;独立身份&lt;/strong&gt;：&lt;/h4&gt;
&lt;p&gt;用户选择他们的身份以及身份所处的位置。在 SoLiD 中，个人标识符（WebID）是一个像 URL 一样的唯一地址；&lt;/p&gt;

&lt;h4 id=&quot;2-控制数据&quot;&gt;2. &lt;strong&gt;控制数据&lt;/strong&gt;：&lt;/h4&gt;
&lt;p&gt;用户可以授予和撤消对任何人和应用的细粒度访问权限；&lt;/p&gt;

&lt;h4 id=&quot;3-随意切换应用程序&quot;&gt;3. &lt;strong&gt;随意切换应用程序&lt;/strong&gt;：&lt;/h4&gt;
&lt;p&gt;由于数据可以灵活被不同应用访问，&lt;strong&gt;避免了供应商锁定的危险&lt;/strong&gt;，用户可以选择他们最喜欢的公司推出的产品。&lt;/p&gt;

&lt;p&gt;为了我们的目的，&lt;strong&gt;SoLiD 精确地解决了上述“数据传输”问题。数据不再在不同的政府机构之间移动，每个政府机构都直接使用原始数据来源，即公民的数据柜。这解决了多个副本和同步的问题，以及 GDPR 问题，即哪个机构有权访问哪些公民的哪些数据。&lt;/strong&gt;因为每个机构都单独对 Pod 进行请求，因此对 Pod 的读写是一个重要的话题，接下来我们会讨论这个问题。&lt;/p&gt;

&lt;h2 id=&quot;4-解决方案使用-solid-交换公民个人信息&quot;&gt;4. 解决方案：使用 SoLiD 交换公民个人信息&lt;/h2&gt;
&lt;p&gt;在本节中，我们解释了使用 SoLiD 在公民和政府之间共享数据的方法。我们首先会解释需求， 之后我们会讨论两种场景， 在这两个场景中：
（1）公民的数据（例如：电子邮件地址、电话号码）存储在 Pod 中；
（2）重用权威政府数据，例如文凭等信息。&lt;/p&gt;

&lt;h3 id=&quot;41-需求&quot;&gt;&lt;strong&gt;4.1 需求&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;对于我们的用例，我们假设所有公民都可以使用全局唯一的统一资源标识符（URI）（称为WebID）来唯一标识。该 WebID 指向有关公民的更多详细信息的，尤其是指向个人数据柜（Pod）。此外，我们假设所有政府部门和组织都具有 WebID 和 Pod。所需的组件 Fig2 所示。通常，SoLiD Pod 具有公共收件箱，任何人都可以在其中发布消息。然后消息只能由所有者读取、修改和删除。我们假定所有 Pod 都满足此约定，因为我们使用了此约定来保证用户之间的通信。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205232012.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;42-用例公民共享个人信息&quot;&gt;&lt;strong&gt;4.2 用例：公民共享个人信息&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Flemish 政府开发了一种数字助理，可提供市民与不同政府部门互动&lt;/strong&gt;。一个有用的例子是向公民提供有关公共服务状态的通知。由于大多数公民几乎没有与政府之间的互动，相比较与私营部门之间的互动， 联系信息以及有关其偏好的信息通常已经过时。用了 SoLiD 之后，角色互换了，市民的 Pod 成为主要联系信息和偏好的来源。该用例解决了第一个挑战， 避免了用户必须在各个公共和门户网站中保持其数据的最新状态。&lt;/p&gt;

&lt;p&gt;我们使用电子邮件地址说明此用例，该用例适用于任何个人信息。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;前提条件：&lt;/strong&gt;公民爱丽丝（A）可以通过其 WebID 唯一标识，同时 A 在 SoLiD Server（S）上托管有一个个人在线数据存储（Pod）。同样，组织（O）具有一个WebID 和一个 Pod。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 1.1：&lt;/strong&gt;共享个人数据。A 使用安全的令牌访问向 O 请求身份验证，成功通过身份验证后，A 可以通过网页按钮授权的形式授予 O 访问其电子邮件地址的权限，成功后，O 可以从 A 的 Pod 中读取电子邮件地址。拓展功能：若 A 不再信任 O，A 可以撤回 O 对她电子邮件地址的访问权限。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 1.2：&lt;/strong&gt;管理个人数据。A 使用安全的另外访问 O 请求身份验证，身份验证成功后，A 可以在 O 提供的用户界面将其电子邮件地址添加到其自己的 Pod 中。扩展功能：A 可以修改或删除她的电子邮件地址。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 1.3：&lt;/strong&gt;请求访问个人数据。O 将「访问 A 的电子邮件地址」请求发布到 A 的公共收件箱。看到此请求后，A 授予 O 读取对她电子邮件地址的访问权限，并将通知发送到O 的公共收件箱。收到通知后， O 可以查看 A 的电子邮件地址。&lt;/p&gt;

&lt;h3 id=&quot;42-用例公民授权权威个人信息&quot;&gt;&lt;strong&gt;4.2 用例：公民授权权威个人信息&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;政府的目标是使公民能够重用存储在不同政府级别的权威数据源中的个人信息&lt;/strong&gt;。比如，在申请新工作时共享大学颁发的文凭。或者在申请贷款时获得有关其收入的信息（如 Fig3 所示）。该用例解决了上文提到的第二个挑战。首先，公民不同意政府与其他人共享他们的数据，因此我们将公民的学位信息存储在公民自己的 Pod 中。换句话说，&lt;strong&gt;在 GDPR 的上下文中，数据主体是数据的控制者&lt;/strong&gt;。这种情况表明，&lt;strong&gt;SoLiD 重塑了公民、其权威数据以及应用程序之间的关系&lt;/strong&gt;。如果公民拒绝授权，则政府可以像今天在税收领域一样行使这项权利。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;前提条件：&lt;/strong&gt;公民爱丽丝（A）拥有一个 WebID，同时有一个 Pod，托管在 SoLiD Server（S）上。同样，大学（U）具有一个 WebID 和一个 Pod。A 的雇主（E）也具有 WebID。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 2.1：&lt;/strong&gt;A 注册为 U 的学生，并且必须提供她的 WebID，这将使A 在大学毕业后收到证书。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 2.2：&lt;/strong&gt;A 保持对 U 的授权直到毕业。U 维护 A 的所有信息，直到 A 毕业。这些信息包括课程、年级、教师等。此类信息是不能公开访问的，只有 A 对此有读写权限。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 2.3：&lt;/strong&gt;A 大学毕业后向 U 索要证书。A 要求提供证书的（摘要）副本，以便她可以与第三方共享。U 会生成此证书的摘要，并将其发送到 A Pod 中的收件箱。该证书由 U 使用非对称加密进行数字签名。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 2.4：&lt;/strong&gt;共享文凭。现在 A 在她的收件箱中有她的文凭副本，她可以与任何人分享。例如，她可以将其发布到她的数据 Pod 中，然后授予其雇主 E 的 WebID 的读取权限。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用例 2.5：&lt;/strong&gt;检查文凭的有效性。如果 E 要检查文凭 A 的有效期，E 必须在该文凭上检查 U 的签名。E 通过从文凭中提取签名，确定权限（U）来完成此操作。这可以是&lt;/p&gt;

&lt;p&gt;使用现有的文档签名机制（例如 XAdES）完成。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205232033.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;5-flemish-公民的个人助理&quot;&gt;5. Flemish 公民的个人助理&lt;/h2&gt;
&lt;p&gt;在本节中，我们将讨论结合 “Mijn Burgerprofiel” 的实施方法。Mijn Burgerprofiel 的意思是&lt;strong&gt;「我的公民资料」&lt;/strong&gt;，他是 Flemish 公民的智能数字助手，通过该助手，公民可以看到其所有授权状态和数据。此外，&lt;strong&gt;欧洲还有一个标准的电子身份验证规范，名为：eIDAS&lt;/strong&gt;。该规范减少了身份被滥用或改动的风险。用户可以使用以下方式通过“我的公民”个人资料访问个人数据：&lt;/p&gt;

&lt;p&gt;1）通过智能卡读卡器或通过手机获取比利时电子身份证；
2）在手机上安装应用程序。&lt;/p&gt;

&lt;p&gt;我们在上一节详细介绍了第一个用例，即公民共享个人信息（例如，电子邮件地址）。如第 3 节所述，我们的应用程序和数据是分离的。因此，我们方法的实施还需要两个组件：
（1）数据 Pod，（2）用于查看和使用数据的应用程序界面。&lt;/p&gt;

&lt;p&gt;接下来，我们将讨论这两个组件。&lt;/p&gt;

&lt;h3 id=&quot;51-data-pod-应用程序&quot;&gt;&lt;strong&gt;5.1 Data Pod 应用程序&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;在我们的实施中，我们使用 Node Solid Server 5.0.1（NSS）创建和托管数据 Pod。如果用户已经有一个 Pod，则可以用来共享个人信息。&lt;strong&gt;NSS允许我们为任何公民和政府组织创建安全的数据柜&lt;/strong&gt;。默认情况下，政府为所有公民提供数据 Pod。但是，如果公民渴望对 Pod 拥有更多控制，他们可以选择自己托管数据 Pod，例如在自己的服务器上运行 NSS。&lt;/p&gt;

&lt;h3 id=&quot;52-个人信息管理基础设施&quot;&gt;&lt;strong&gt;5.2 个人信息管理基础设施&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;为了允许政府能方便的访问公民的特定信息，我们扩展了“我的公民资料”，所有 Flemish 公民都拥有一个资料。目前，这个信息集中存储在“我的公民资料”的数据库中。为了能和 SoLiD 和谐的工作，我们修改了“我的公民资料”，该修改版本不是将信息存储在每个公民的数据 Pod 中，而是存储在 Flemish 政府的服务器中，“我的公民资料”就像一个公民，也拥有一个WebID。&lt;/p&gt;

&lt;p&gt;对于我们的用例，我们专注于存储和获取公民的电子邮件地址。为了达到这个目的，我们实现了三个组件：SoLid Linker（将原来的市民与 SoLiD 连接起来）、电子邮件提取器和电子邮件可视化工具。这些组件将在后面说明。&lt;/p&gt;

&lt;h3 id=&quot;53-solid-linker&quot;&gt;&lt;strong&gt;5.3 SoLiD Linker&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;在“我的公民个人资料”的个人资料设置中，我们添加了一个字段，人们可以将其帐户与任何 SoLiD WebID 关联起来，如 Fig4 所示。默认情况下，公民使用政府提供的默认 WebID。&lt;/p&gt;

&lt;h3 id=&quot;54-email-extractor&quot;&gt;&lt;strong&gt;5.4 Email Extractor&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;如果某个公民有一个有效的 SoLid WebID 链接到其“我的公民个人资料”帐户，则应用程序可以尝试通过跟踪文件中的链接来提取其电子邮件地址。公民的数据 Pod 中包含电子邮件地址。基于WebID，电子邮件提取器组件可以确定用户的 Pod。使用此 URL，提取程序将使用“我的公民个人资料” WebID 的身份验证令牌向 SoLiD Pod 发送 HTTP GET 请求。如果公民已授予“我的公民个人资料”对该文件的读取权限，则该文件的内容将被返回；否则将返回授权错误。如果没有遇到错误，则电子邮件提取器组件将返回公民的电子邮件地址。&lt;/p&gt;

&lt;h3 id=&quot;55-email-可视化工具&quot;&gt;&lt;strong&gt;5.5 Email 可视化工具&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;我们在“我的公民资料”概述页面上，添加了一个字段，该字段显示用户的电子邮件地址（如果用户有或用户授权后才显示）。该信息是从用户链接到的 WebID 中读取的，此信息始终即时提取，不会再存储在其他地方。这意味着当公民修改了该值，这个页面能立即显示更新后的值。该可视化工具可用于自动化流程，例如在即将举行的选举中发送提醒。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205232131.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;6-总结&quot;&gt;6. 总结&lt;/h2&gt;

&lt;p&gt;在本文中，我们介绍了有关 SoLiD 在政府治理中的实施经验。Flemish 政府接受了我们对“我的公民资料”进行的修改，这样我们可以让其与 SoLiD 生态系统互操作，从而使公民可以控制其数据。我们解决了两个引人注目的挑战；首先，政府部门努力保持个人数据是最新的，其次是允许公民重复使用存储在其中的数据，这些数据存储在不同背景下的政府信息系统。该案例证明了 SoLiD 可以解决公民对数据的控制权问题。&lt;/p&gt;

&lt;p&gt;未来研究的新途径包括如何保持对用户权威数据（如住所）最大程度的利用。这应确保公民共享的信息与私营部门的关系始终是最新的。另一个明显的点是，这项研究旨在告知用户同意重用数据是他们的天赋人权。这个概念称为 “知情同意”。此外，所有操作都应透明地记录在 SoLiD Pod 中，包括：访问数据、修改数据、授权同意和撤销权利，这与我们银行帐户中的财产相当。这种细粒度和结构化的日志还可以通过使用机器学习算法来检测异常和数据泄露。为了更完整，未来的研究应该关注于不同的挑战，如如何打造可持续的商业模式。&lt;/p&gt;

&lt;p&gt;SoLiD 建立在现有 Web 标准和方法上（例如关联数据和去中心化，因此 SoLiD 可以被视为过程创新，而不是技术创新），因此与 SoLiD Pod 的集成非常简单。我们已经使用电子邮件地址说明了这种简单度，但目的是将其扩展到所有个人数据。&lt;/p&gt;

&lt;p&gt;我们希望这个在 Flemish 地区的 SoLiD 试验可以加快解决政府在公共管理和私人组织中面临着的同样的复杂性问题，同时让用户重新控制自己的数据。&lt;/p&gt;

&lt;h2 id=&quot;引用&quot;&gt;引用&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;Belgisch Staatsblad. Wijzigingen met betrekking tot de onderzoeksmiddelen van de administratie. (2011).
http://www.ejustice.just.fgov.be/cgi_loi/change_lg.pl?language=nl&amp;amp;la=N&amp;amp;table_name=w
et&amp;amp;cn=2011041406 Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;Berners-Lee, T.; Verborgh, R. Welcome to Solid. (2019).
https://rubenverborgh.github.io/Solid-DeSemWeb-2018/#title Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;Buyle, R., Van Compernolle, M., De Paepe, D., Scheerlinck, J., Mechant, P., Mannens, E.,
&amp;amp; Vanlishout, Z. Semantics in the wild: a digital assistant for Flemish citizens. In Proceedings of the 11th International Conference on Theory and Practice of Electronic Governance (pp. 1-6). ACM (2018). doi: https://doi.org/10.1145/3209415.3209421&lt;/li&gt;
  &lt;li&gt;Cruellas, J. C., Karlinger, G., Pinkas, D., &amp;amp; Ross, J. Xml advanced electronic signatures
(xades). W3C Recommendation (2003). http://www.w3.org/TR/XAdES Accessed 9 July
2019&lt;/li&gt;
  &lt;li&gt;Decker, C., &amp;amp; Wattenhofer, R. (2013, September). Information propagation in the bitcoin
network. In IEEE P2P 2013 Proceedings (pp. 1-10). IEEE.&lt;/li&gt;
  &lt;li&gt;de Montjoye, Y. A., Wang, S. S., Pentland, A., Anh, D. T. T., &amp;amp; Datta, A. On the Trusted
Use of Large-Scale Personal Data. IEEE Data Eng. Bull., 35(4), 5-8 (2012)&lt;/li&gt;
  &lt;li&gt;Esposito, C., De Santis, A., Tortora, G., Chang, H., &amp;amp; Choo, K. K. R. (2018). Blockchain:
A panacea for healthcare cloud-based data security and privacy?. IEEE Cloud Computing,
5(1), 31-37.&lt;/li&gt;
  &lt;li&gt;European Commission. Regulation (EU) 2016/679 of the European Parliament and of the
Council of 27 April 2016 on the protection of natural persons with regard to the processing
of personal data and on the free movement of such data, and repealing Directive 95/46. Official Journal of the European Union (OJ), 59(1-88), 294 (2016)&lt;/li&gt;
  &lt;li&gt;European Commission. Guidelines on Consent under Regulation 2016/679 Luxembourg:
Publications Office (2018) https://ec.europa.eu/newsroom/article29/itemdetail.cfm?item_id=623051 Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;European Commission. It’s your data – take control. Luxembourg: Publications Office
(2018). https://ec.europa.eu/commission/sites/beta-political/files/data-protection-overviewcitizens_en.pdf Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;Fatema, K., Hadziselimovic, E., Pandit, H. J., Debruyne, C., Lewis, D., &amp;amp; O’Sullivan, D.
Compliance through Informed Consent: Semantic Based Consent Permission and Data
Management Model. In Proceedings of the 5th Workshop on Society, Privacy and the Semantic Web - Policy and Technology (PrivOn2017), Vienna, Austria (2017)&lt;/li&gt;
  &lt;li&gt;Harrison, T. M., Pardo, T. A., &amp;amp; Cook, M. Creating open government ecosystems: A research and development agenda. Future Internet, 4(4), 900-928. MDPI AG (2012). doi:
https://doi.org/10.3390/fi4040900&lt;/li&gt;
  &lt;li&gt;Janssen, M., Charalabidis, Y., &amp;amp; Zuiderwijk, A. Benefits, adoption barriers and myths of
open data and open government. Information systems management, 29(4), 258-268 (2012).
doi: https://doi.org/10.1080/10580530.2012.716740&lt;/li&gt;
  &lt;li&gt;Jia, J., Jin, G. Z., &amp;amp; Wagman, L. The short-run effects of GDPR on technology venture investment (No. w25248). National Bureau of Economic Research (2018). doi:
10.3386/w25248&lt;/li&gt;
  &lt;li&gt;Mansour, E., Sambra, A. V., Hawke, S., Zereba, M., Capadisli, S., Ghanem, A., … &amp;amp;
Berners-Lee, T. A demonstration of the solid platform for social web applications. In Proceedings of the 25th International Conference Companion on World Wide Web (pp. 223-
15
226). International World Wide Web Conferences Steering Committee (2016). doi:
https://doi.org/10.1145/2872518.2890529&lt;/li&gt;
  &lt;li&gt;Mun, M., Hao, S., Mishra, N., Shilton, K., Burke, J., Estrin, D., … &amp;amp; Govindan, R. Personal data vaults: a locus of control for personal data streams. In Proceedings of the 6th International Conference on Emerging Networking Experiments and Technologies (p. 17).
ACM (2010). doi: https://doi.org/10.1145/1921168.1921191&lt;/li&gt;
  &lt;li&gt;Narayanan, A., Toubiana, V., Barocas, S., Nissenbaum, H., &amp;amp; Boneh, D. A critical look at
decentralized personal data architectures. arXiv preprint arXiv:1202.4503 (2012)&lt;/li&gt;
  &lt;li&gt;Pollock, R. (2011, March 11). Building the (Open) Data Ecosystem.
http://blog.okfn.org/2011/03/31/building-the-open-data-ecosystem/ Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;Solid. Welcome to Solid (2019). https://solid.inrupt.com/ Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;Van Kleek, M., &amp;amp; OHara, K. The future of social is personal: The potential of the personal
data store. In Social Collective Intelligence (pp. 125-158). Springer, Cham (2014)&lt;/li&gt;
  &lt;li&gt;Verborgh, R. Ruben Verborgh on data &amp;amp; privacy. Imec Magazine (2019).
https://www.imec-int.com/en/imec-magazine/imec-magazine-january-2019/back-to-thefuture-how-we-will-regain-control-of-our-personal-data Accessed 9 July 2019&lt;/li&gt;
  &lt;li&gt;Vescovi, M., Perentis, C., Leonardi, C., Lepri, B., &amp;amp; Moiso, C. My data store: toward user
awareness and control on personal data. In Proceedings of the 2014 ACM International
Joint Conference on Pervasive and Ubiquitous Computing: Adjunct Publication (pp. 179-
182). ACM (2014). doi: http://dx.doi.org/10.1145/2638728.2638745&lt;/li&gt;
  &lt;li&gt;Whitley, E. A. Informational privacy, consent and the “control” of personal data. Information security technical report, 14(3), 154-159 (2009). doi:
https://doi.org/10.1016/j.istr.2009.10.001&lt;/li&gt;
  &lt;li&gt;Yeung, C. M. A., Liccardi, I., Lu, K., Seneviratne, O., &amp;amp; Berners-Lee, T. Decentralization:
The future of online social networking. In W3C Workshop on the Future of Social Networking Position Papers (Vol. 2, pp. 2-7) (2009)&lt;/li&gt;
  &lt;li&gt;Zuiderwijk, A., Janssen, M., &amp;amp; Davis, C. Innovation with open data: Essential elements of
open data ecosystems. Information Polity, 19(1, 2), 17-33 (2014)&lt;/li&gt;
  &lt;li&gt;Zyskind, G., &amp;amp; Nathan, O. Decentralizing privacy: Using blockchain to protect personal
data. In 2015 IEEE Security and Privacy Workshops (pp. 180-184). IEEE (2015). doi:
0.1109/SPW.2015.27&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/以活服人.jpeg&quot; style=&quot;zoom:40%;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;本文译者：&lt;/strong&gt;蒸汽记忆——Authing 身份云运营主体和 SoLiD 中文社区维护主体。
&lt;strong&gt;原文地址：&lt;/strong&gt;https://drive.verborgh.org/publications/buyle_egose_2019.pdf&lt;/p&gt;

&lt;h2 id=&quot;关于-authing&quot;&gt;关于 Authing&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.authing.cn/blog/20200205182918.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Authing 是中国领先的 IDaaS 服务提供商，对标美国独角兽 Auth0。创始团队来自字节跳动、百度、IBM、阿里云、滴滴出行等互联网企业。Authing 提供开发者友好、易拓展的身份认证和授权平台，赋能企业在云端管理身份，主要功能包括：单点登录、用户分析、扫码登录、多因素认证、行为审计、风险控制、跨平台设备管理、IoT 身份认证等；兼容国际各类标准协议：OAuth2.0、OIDC、SAML、AD/LDAP、WS-Fed、JWT 等。 支持云交付和私有化部署方式，帮助企业和开发者千倍级提升生产效率。&lt;/p&gt;

&lt;p&gt;Authing 自上线以来已经服务海内外超过 3000 名企业开发者、拥有约 50 万的开发者社区和托管数百万终端用户，每月百万人次通过 Authing 平台进行认证，并已经服务数十家付费企业客户，覆盖教育、人工智能、出版社、 物联网等多个行业。&lt;/p&gt;</content><author><name>ivy</name></author><category term="featured" /><summary type="html">SoLiD 是一个令人兴奋的新项目，由万维网发明者 Tim Berners-Lee 爵士在麻省理工学院启动。 该项目旨在从根本上改变 Web 应用程序的中心化趋势， 它将真正地让数据所有权属于用户，并改善隐私问题。</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://inrupt.com/sites/default/files/2018-10/Thomas_explainer.png" /></entry></feed>