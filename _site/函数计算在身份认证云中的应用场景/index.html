<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>函数计算在身份认证云中的应用场景 | Authing 官方博客</title>

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>函数计算在身份认证云中的应用场景 | Authing 官方博客</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="函数计算在身份认证云中的应用场景" />
<meta name="author" content="ivy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。" />
<meta property="og:description" content="Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。" />
<link rel="canonical" href="http://localhost:4000/blog/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%9C%A8%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E4%BA%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" />
<meta property="og:url" content="http://localhost:4000/blog/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%9C%A8%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E4%BA%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/" />
<meta property="og:site_name" content="Authing 官方博客" />
<meta property="og:image" content="http://img.staryu.cn/20190814-01.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-16T00:00:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/blog/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%9C%A8%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E4%BA%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/","headline":"函数计算在身份认证云中的应用场景","dateModified":"2019-08-16T00:00:00+08:00","datePublished":"2019-08-16T00:00:00+08:00","image":"http://img.staryu.cn/20190814-01.jpg","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/blog/assets/images/logo.png"},"name":"ivy"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%9C%A8%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E4%BA%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/"},"author":{"@type":"Person","name":"ivy"},"description":"Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" type="image/x-icon" href="/blog/assets/images/favicon.ico">

    <!-- Font Awesome Icons -->
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="https://usercontents.authing.cn/fontawesome@5.3.1.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Google Fonts-->
    <!-- <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://usercontents.authing.cn/fonts.css?family=Lora:400,400i,700">    

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="/blog/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="/blog/assets/css/theme.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    <!-- This goes before </head> closing tag, Google Analytics can be placed here --> 


</head>

<body class="">

    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="https://authing.cn">
            <img src="https://usercontents.authing.cn/logo/authing@256x78.png" style="height:34px">
        </a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               <!--  Replace menu links here -->

<li class="nav-item">
    <a class="nav-link" href="/blog/index.html">主页</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/categories.html#developers">开发者</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/categories.html#tutorial">案例</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/categories.html#cultures">文化</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/categories.html#news">新闻</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/blog/categories.html#solid">SoLiD 数据主权</a>
</li>    

<li class="nav-item">
    <a class="nav-link" style="border:1px solid #ced4da;border-radius:4px;margin-right:7px;padding: 0.5rem 0.7rem;" href="/blog/about.html">联系售前</a>
</li>    
<li class="nav-item">
    <a target="_blank" class="nav-link" style="background: #49a1e0;color:#fff;border:1px solid #ced4da;border-radius:4px;padding: 0.5rem 0.7rem;"  href="https://sign.authing.cn">登录/注册</a>
</li>    

            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                <script src="/blog/assets/js/lunr.js"></script>

<script>
$(function() {
    $("#lunrsearchresults").on('click', '#btnx', function () {
        $('#lunrsearchresults').hide( 1000 );
        $( "body" ).removeClass( "modal-open" );
    });
});
    

var documents = [{
    "id": 0,
    "url": "http://localhost:4000/blog/404/",
    "title": "",
    "body": " 404 Page not found :(  The requested page could not be found. "
    }, {
    "id": 1,
    "url": "http://localhost:4000/blog/about.html",
    "title": "关于",
    "body": "Powered by by Authing. "
    }, {
    "id": 2,
    "url": "http://localhost:4000/blog/author-jane.html",
    "title": "Jane",
    "body": "                        {{page. title}} Follow:         {{ site. authors. jane. site }}         {{ site. authors. jane. bio }}                                   Posts by {{page. title}}:       {% assign posts = site. posts | where: author , jane  %}      {% for post in posts %}      {% include main-loop-card. html %}      {% endfor %}  "
    }, {
    "id": 3,
    "url": "http://localhost:4000/blog/author-sal.html",
    "title": "Sal",
    "body": "                        {{page. title}} Follow:         {{ site. authors. sal. site }}         {{ site. authors. sal. bio }}                                   Posts by {{page. title}}:       {% assign posts = site. posts | where: author , sal  %}      {% for post in posts %}      {% include main-loop-card. html %}      {% endfor %}  "
    }, {
    "id": 4,
    "url": "http://localhost:4000/blog/authors-list.html",
    "title": "Authors",
    "body": "{{page. title}}:     {% for author in site. authors %}                                         {{ author[1]. name }} :       (View Posts)      {{ author[1]. bio }}                          &nbsp;       &nbsp;                                    {% endfor %}  "
    }, {
    "id": 5,
    "url": "http://localhost:4000/blog/categories.html",
    "title": "类别",
    "body": "          类别          {% for category in site. categories %}     {{ category[0] }}:           {% assign pages_list = category[1] %}    {% for post in pages_list %}    {% if post. title != null %}     {% if group == null or group == post. group %}           {% include main-loop-card. html %}     {% endif %}    {% endif %}    {% endfor %}    {% assign pages_list = nil %}    {% assign group = nil %}    {% endfor %}                  {% include sidebar-featured. html %}          "
    }, {
    "id": 6,
    "url": "http://localhost:4000/blog/contact.html",
    "title": "联系我们",
    "body": "  Please send your message to {{site. name}}. We will reply as soon as possible!   "
    }, {
    "id": 7,
    "url": "http://localhost:4000/blog/",
    "title": "Authing 官方博客",
    "body": "  {% if page. url ==  /  %}            {% assign latest_post = site. posts[0] %}          &lt;div class= topfirstimage  style= background-image: url({% if latest_post. image contains  ://  %}{{ latest_post. image }}{% else %} {{site. baseurl}}/{{ latest_post. image}}{% endif %}); height: 200px;  background-size: cover;  background-repeat: no-repeat; &gt;&lt;/div&gt;           {{ latest_post. title }}  :       {{ latest_post. excerpt | strip_html | strip_newlines | truncate: 136 }}               In         {% for category in latest_post. categories %}        {{ category }},         {% endfor %}                                {{ latest_post. date | date: '%b %d, %Y' }}                            {%- assign second_post = site. posts[1] -%}                        {% if second_post. image %}                         &lt;img class= w-100  src= {% if second_post. image contains  ://  %}{{ second_post. image }}{% else %}{{ second_post. image | absolute_url }}{% endif %}  alt= {{ second_post. title }} &gt;                        {% endif %}                                    {{ second_post. title }}          :                       In             {% for category in second_post. categories %}            {{ category }},             {% endfor %}                                                      {{ second_post. date | date: '%b %d, %Y' }}                                    {%- assign third_post = site. posts[2] -%}                        {% if third_post. image %}                         &lt;img class= w-100  src= {% if third_post. image contains  ://  %}{{ third_post. image }}{% else %}{{site. baseurl}}/{{ third_post. image }}{% endif %}  alt= {{ third_post. title }} &gt;                        {% endif %}                                    {{ third_post. title }}          :                       In             {% for category in third_post. categories %}            {{ category }},             {% endfor %}                                                      {{ third_post. date | date: '%b %d, %Y' }}                                    {%- assign fourth_post = site. posts[3] -%}                        {% if fourth_post. image %}                        &lt;img class= w-100  src= {% if fourth_post. image contains  ://  %}{{ fourth_post. image }}{% else %}{{site. baseurl}}/{{ fourth_post. image }}{% endif %}  alt= {{ fourth_post. title }} &gt;                        {% endif %}                                    {{ fourth_post. title }}          :                       In             {% for category in fourth_post. categories %}            {{ category }},             {% endfor %}                                                      {{ fourth_post. date | date: '%b %d, %Y' }}                                  {% for post in site. posts %} {% if post. tags contains  sticky  %}                    {{post. title}}                  {{ post. excerpt | strip_html | strip_newlines | truncate: 136 }}                 阅读更多            	             {% endif %}{% endfor %}  {% endif %}                所有文章:         {% for post in paginator. posts %}          {% include main-loop-card. html %}        {% endfor %}                   {% if paginator. total_pages &gt; 1 %}              {% if paginator. previous_page %}        &laquo; Prev       {% else %}        &laquo;       {% endif %}       {% for page in (1. . paginator. total_pages) %}        {% if page == paginator. page %}        {{ page }}        {% elsif page == 1 %}        {{ page }}        {% else %}        {{ page }}        {% endif %}       {% endfor %}       {% if paginator. next_page %}        Next &raquo;       {% else %}        &raquo;       {% endif %}            {% endif %}                     {% include sidebar-featured. html %}      "
    }, {
    "id": 8,
    "url": "http://localhost:4000/blog/privacy-policy.html",
    "title": "Privacy Policy",
    "body": "”{{site. name}}” takes your privacy seriously. To better protect your privacy we provide this privacy policy notice explaining the way your personal information is collected and used. Collection of Routine Information: This website track basic information about their visitors. This information includes, but is not limited to, IP addresses, browser details, timestamps and referring pages. None of this information can personally identify specific visitor to this website. The information is tracked for routine administration and maintenance purposes. Cookies: Where necessary, this website uses cookies to store information about a visitor’s preferences and history in order to better serve the visitor and/or present the visitor with customized content. Advertisement and Other Third Parties: Advertising partners and other third parties may use cookies, scripts and/or web beacons to track visitor activities on this website in order to display advertisements and other useful information. Such tracking is done directly by the third parties through their own servers and is subject to their own privacy policies. This website has no access or control over these cookies, scripts and/or web beacons that may be used by third parties. Learn how to opt out of Google’s cookie usage. Links to Third Party Websites: We have included links on this website for your use and reference. We are not responsible for the privacy policies on these websites. You should be aware that the privacy policies of these websites may differ from our own. Security: The security of your personal information is important to us, but remember that no method of transmission over the Internet, or method of electronic storage, is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security. Changes To This Privacy Policy: This Privacy Policy is effective and will remain in effect except with respect to any changes in its provisions in the future, which will be in effect immediately after being posted on this page. We reserve the right to update or change our Privacy Policy at any time and you should check this Privacy Policy periodically. If we make any material changes to this Privacy Policy, we will notify you either through the email address you have provided us, or by placing a prominent notice on our website. Contact Information: For any questions or concerns regarding the privacy policy, please contact us here. "
    }, {
    "id": 9,
    "url": "http://localhost:4000/blog/tags.html",
    "title": "Tags",
    "body": "          Tags          {% for tag in site. tags %}     {{ tag[0] }}:           {% assign pages_list = tag[1] %}    {% for post in pages_list %}    {% if post. title != null %}     {% if group == null or group == post. group %}           {% include main-loop-card. html %}     {% endif %}    {% endif %}    {% endfor %}    {% assign pages_list = nil %}    {% assign group = nil %}    {% endfor %}                  {% include sidebar-featured. html %}          "
    }, {
    "id": 10,
    "url": "http://localhost:4000/blog/robots.txt",
    "title": "",
    "body": "      Sitemap: {{ “sitemap. xml”   absolute_url }}   "
    }, {
    "id": 11,
    "url": "http://localhost:4000/blog/page2/",
    "title": "Authing 官方博客",
    "body": "  {% if page. url ==  /  %}            {% assign latest_post = site. posts[0] %}          &lt;div class= topfirstimage  style= background-image: url({% if latest_post. image contains  ://  %}{{ latest_post. image }}{% else %} {{site. baseurl}}/{{ latest_post. image}}{% endif %}); height: 200px;  background-size: cover;  background-repeat: no-repeat; &gt;&lt;/div&gt;           {{ latest_post. title }}  :       {{ latest_post. excerpt | strip_html | strip_newlines | truncate: 136 }}               In         {% for category in latest_post. categories %}        {{ category }},         {% endfor %}                                {{ latest_post. date | date: '%b %d, %Y' }}                            {%- assign second_post = site. posts[1] -%}                        {% if second_post. image %}                         &lt;img class= w-100  src= {% if second_post. image contains  ://  %}{{ second_post. image }}{% else %}{{ second_post. image | absolute_url }}{% endif %}  alt= {{ second_post. title }} &gt;                        {% endif %}                                    {{ second_post. title }}          :                       In             {% for category in second_post. categories %}            {{ category }},             {% endfor %}                                                      {{ second_post. date | date: '%b %d, %Y' }}                                    {%- assign third_post = site. posts[2] -%}                        {% if third_post. image %}                         &lt;img class= w-100  src= {% if third_post. image contains  ://  %}{{ third_post. image }}{% else %}{{site. baseurl}}/{{ third_post. image }}{% endif %}  alt= {{ third_post. title }} &gt;                        {% endif %}                                    {{ third_post. title }}          :                       In             {% for category in third_post. categories %}            {{ category }},             {% endfor %}                                                      {{ third_post. date | date: '%b %d, %Y' }}                                    {%- assign fourth_post = site. posts[3] -%}                        {% if fourth_post. image %}                        &lt;img class= w-100  src= {% if fourth_post. image contains  ://  %}{{ fourth_post. image }}{% else %}{{site. baseurl}}/{{ fourth_post. image }}{% endif %}  alt= {{ fourth_post. title }} &gt;                        {% endif %}                                    {{ fourth_post. title }}          :                       In             {% for category in fourth_post. categories %}            {{ category }},             {% endfor %}                                                      {{ fourth_post. date | date: '%b %d, %Y' }}                                  {% for post in site. posts %} {% if post. tags contains  sticky  %}                    {{post. title}}                  {{ post. excerpt | strip_html | strip_newlines | truncate: 136 }}                 阅读更多            	             {% endif %}{% endfor %}  {% endif %}                所有文章:         {% for post in paginator. posts %}          {% include main-loop-card. html %}        {% endfor %}                   {% if paginator. total_pages &gt; 1 %}              {% if paginator. previous_page %}        &laquo; Prev       {% else %}        &laquo;       {% endif %}       {% for page in (1. . paginator. total_pages) %}        {% if page == paginator. page %}        {{ page }}        {% elsif page == 1 %}        {{ page }}        {% else %}        {{ page }}        {% endif %}       {% endfor %}       {% if paginator. next_page %}        Next &raquo;       {% else %}        &raquo;       {% endif %}            {% endif %}                     {% include sidebar-featured. html %}      "
    }, {
    "id": 12,
    "url": "http://localhost:4000/blog/rbac/",
    "title": "RBAC | 组织机构管理最佳实践",
    "body": "2020/02/05 - 在现实生活中，组、角色往往是分层嵌套的，呈树状结构，最常见的就是组织机构，如公司、学校等等。这篇文章，我们会假设一家互联网公司 —— 「非凡科技有限公司」，看看他们是如何使用 Authing 快速完成组织机构建模的。 借助 Authing，可以快速实现基于角色的访问控制（RBAC）。简单来说，RBAC 指的是通过用户的角色（Role）赋予其相关权限，这实现了细粒度的访问控制，并提供了一个相比直接授予单个用户权限，更简单、可控的管理方式。 而在现实生活中，组、角色往往是分层嵌套的，呈树状结构，最常见的就是组织机构，如公司、学校等等。这篇文章，我们会设想一家互联网公司 —— 「非凡科技有限公司」，看看他们是如何使用 Authing 快速完成组织机构建模的。 一、非凡科技有限公司背景介绍: 该公司约 300 名员工，其公司架构大致如下：    一级部门有产品部、研发部、运营部、综合管理部     一级部门下面又有二级部门，如产品部中包含产品经理和设计等。  这是一个典型的树状数据结构，有且仅有一个根节点，以及多个分层的节点。一般而言，根节点就是一家公司、一个组织，其他的每个节点都对应一个部门。 ‌ 这里有一点需要注意：在 Authing 中，这样的节点对应的是一个 Group，比如「非凡科技有限公司」是一个 Group，「产品部」也是一个 Group。我们要做的，是要把这些 Group 放到他在树上所属的位置。 一个 Group 可以拥有多个角色（Role），一个角色包含一个或多个权限（Permission）；而一个 Group 由若干用户（User）组成，某个 Group 中的用户会继承该 Group 下的所有角色，从而具备相关权限。 了解如何管理 Group 中的 User、如何管理 Group 中的 Role、如何配置 Role 的 Permission，请见文档：角色权限管理。 了解如何查询单个用户的 Group, Role, Permission 列表，请见文档：查询用户权限。 如何使用 Authing 完成组织机构管理 1、梳理组织机构节点: 首先，我们需要列举出该组织结构拥有的所有节点：    非凡科技有限公司     产品部     研发部     运营部     综合管理部     产品经理     设计     开发     测试     运维     用户运营     渠道运营     HR     财务     行政  这些节点在 Authing 中都是一个 Group，所以需要先创建这些 Group： const 非凡科技有限公司 = await createGroup( 非凡科技有限公司 )const 产品部 = await createGroup('产品部')const 产品经理 = await createGroup('产品经理')const 设计 = await createGroup('设计')const 研发部 = await createGroup('研发部')const 开发 = await createGroup('开发')const 测试 = await createGroup('测试')const 运维 = await createGroup('运维')const 运营部 = await createGroup('运营部')const 用户运营 = await createGroup('用户运营')const 渠道运营 = await createGroup('渠道运营')const 综合管理部 = await createGroup('综合管理部')const HR = await createGroup('HR')const 财务 = await createGroup('财务')const 行政 = await createGroup('行政')‌ 2、创建组织机构: 接着创建组织机构（一组树状的 Group），这需要指定根节点对应的 Group: let org = await authing. org. createOrg({ rootGroupId: 非凡科技有限公司. _id})3、加入产品部及其子部门节点: ‌ 接着插入产品部的各级节点： ‌ 这里需要指定以下参数：    组织机构 ID     该节点对应的 Group ID     该节点的父节点的 Group ID  如加入产品部节点时，groupId 为 Group 的 ID，parentGroupId 为 Group 的 ID。 await authing. org. addNode({ orgId: org. _id, groupId: 产品部. _id, parentGroupId: 非凡科技有限公司. _id})await authing. org. addNode({ orgId: org. _id, groupId: 产品经理. _id, parentGroupId: 产品部. _id})await authing. org. addNode({ orgId: org. _id, groupId: 设计. _id, parentGroupId: 产品部. _id})4、以此类推，加入所有节点: 研发部： // 添加研发部await authing. org. addNode({ orgId: org. _id, groupId: 研发部. _id, parentGroupId: 非凡科技有限公司. _id})await authing. org. addNode({ orgId: org. _id, groupId: 开发. _id, parentGroupId: 研发部. _id})await authing. org. addNode({ orgId: org. _id, groupId: 测试. _id, parentGroupId: 研发部. _id})await authing. org. addNode({ orgId: org. _id, groupId: 运维. _id, parentGroupId: 研发部. _id})运营部： await authing. org. addNode({ orgId: org. _id, groupId: 运营部. _id, parentGroupId: 非凡科技有限公司. _id})await authing. org. addNode({ orgId: org. _id, groupId: 用户运营. _id, parentGroupId: 运营部. _id})await authing. org. addNode({ orgId: org. _id, groupId: 渠道运营. _id, parentGroupId: 运营部. _id})‌ 综合管理部： // 添加综合管理部await authing. org. addNode({ orgId: org. _id, groupId: 综合管理部. _id, parentGroupId: 非凡科技有限公司. _id})await authing. org. addNode({ orgId: org. _id, groupId: HR. _id, parentGroupId: 综合管理部. _id})await authing. org. addNode({ orgId: org. _id, groupId: 财务. _id, parentGroupId: 综合管理部. _id})await authing. org. addNode({ orgId: org. _id, groupId: 行政. _id, parentGroupId: 综合管理部. _id})5、查看最新组织机构结构: 到现在，我们的非凡科技有限公司组织机构见建模完成了，是时候获取其最新的树状结构了： const { tree } = await authing. org. findById(org. _id)​        二、如何向组织机构中添加用户和配置权限: 前面说过，Authing 中一个组织结构节点对应一个 Group，对此我们提供了完整的 SDK。 1、为组织机构节点配置权限: 相关 SDK 见：角色权限管理。 非凡科技有限公司的所有员工，都具备开具发票、使用公司邮箱的权限。与此对应，在此我们创建两个角色：Invoice Submitter 和 Corp Email User。 ‌ 其中 Invoice Submitter 具备以下权限：    invoice:login     invoice:create     invoice:query     invoice:list     invoice:delete  Corp Email User 具备以下权限：    corp-email:login     corp-email:send     corp-email:receive     corp-email:list     corp-email:detail  这可以通过以下代码完成： const InvoiceSubmitter = await createRole('Invoice Submitter')let permissions = await createPermissionBatch(['invoice:login', 'invoice:create', 'invoice:query', 'invoice:list', 'invoice:delete'])await authing. authz. addPermissionToRoleBatch({ roleId: InvoiceSubmitter. _id, permissionIdList: permissions. map(x =&gt; x. _id)})const CorpEmailUser = await createRole('Corp Email Use')permissions = await createPermissionBatch(['corp-email:login', 'corp-email:send', 'corp-email:receive', 'corp-email:list', 'corp-email:detail'])await authing. authz. addPermissionToRoleBatch({ roleId: CorpEmailUser. _id, permissionIdList: permissions. map(x =&gt; x. _id)})接着让 Group 非凡科技有限公司具备 Invoice Submitter 和 Corp Email User 两个角色： await authing. authz. addRoleToGroup({ roleId: InvoiceSubmitter. _id, groupId: 非凡科技有限公司. _id})await authing. authz. addRoleToGroup({ roleId: InvoiceSubmitter. _id, groupId: 非凡科技有限公司. _id})现在，非凡科技有限公司这个节点将会具备 Invoice Submitter 和 Corp Email User 两个角色 2、向组织机构节点添加用户: 相关 API 见：角色权限管理。  某个 Group 内的用户会继承该 Group 内所有角色的权限（如果有重叠，将会取并集）。 下面我们往用户池中注册新用户，然后将其加入非凡科技有限公司 Group 中： const user = await createUser()await authing. authz. addUserToGroup({ groupId: 非凡科技有限公司. _id, userId: user. _id})3、查询用户具备的权限: 相关 API 见：查询用户权限。 const { rawList: permissionList } = await authing. userPermissionList(user. _id)‌permissionList 如下：可见，此用户已经继承了 Invoice Submitter 和 Corp Email User 两个角色的所有权限： [ 'invoice:login', 'invoice:create', 'invoice:query', 'invoice:list', 'invoice:delete', 'corp-email:login', 'corp-email:send', 'corp-email:receive', 'corp-email:list', 'corp-email:detail', ]开发者拿到用户权限列表之后，可以在业务代码层判断用户是否具备某一特定权限，如： if  corp-email:login  not in user. permissionList: return  Permission Denied 4、使用 RBAC 的优势:    系统性、可重复性的权限指派     更方便的用户权限审计，快速定位问题     快速地添加、修改角色，甚至可以调用 API 实现     减少授予用户权限时发生错误的可能性     引入第三方用户/新用户/未登录用户时，赋予他们预先配置好的角色，比如 guest 分组   更多关于 RBAC 的介绍请参考实现基于角色的访问控制（RBAC）。  三、总结: 本文我们以「非凡科技有限公司」为例，介绍了如何将一棵组织机构树转换成一组嵌套、有层次的 Group。通过 Authing 提供的分组角色权限管理 API，可以为 Group 配置角色、指派成员，使得该 Group 中的用户继承所需的权限，从而完成组织机构建模与权限控制。 关于 Authing: Authing 是中国领先的 IDaaS 服务提供商，对标美国独角兽 Auth0。创始团队来自字节跳动、百度、IBM、阿里云、滴滴出行等互联网企业。Authing 提供开发者友好、易拓展的身份认证和授权平台，赋能企业在云端管理身份，主要功能包括：单点登录、用户分析、扫码登录、多因素认证、行为审计、风险控制、跨平台设备管理、IoT 身份认证等；兼容国际各类标准协议：OAuth2. 0、OIDC、SAML、AD/LDAP、WS-Fed、JWT 等。 支持云交付和私有化部署方式，帮助企业和开发者千倍级提升生产效率。 Authing 自上线以来已经服务海内外超过 3000 名企业开发者、拥有约 50 万的开发者社区和托管数百万终端用户，每月百万人次通过 Authing 平台进行认证，并已经服务数十家付费企业客户，覆盖教育、人工智能、出版社、 物联网等多个行业。 "
    }, {
    "id": 13,
    "url": "http://localhost:4000/blog/a-intro-about-authing-to-everyone/",
    "title": "一份所有人都能理解的关于 Authing 的介绍",
    "body": "2020/02/03 - 我们加入了这场游戏，带着不同的视角。 Authing 解决什么问题？: 解决开发者的问题: 在程序开发的过程中，用户认证和权限处理是非常复杂的一个模块。涉及到很多枯燥，重复的工作，比如验证用户身份，验证权限，密码加密与校验，鉴权（这又涉及到安全）。 举个现实例子：比如你是一个办公自动化软件厂商，你新签了一个客户，对方是一个 5 万人的企业组织，你是否要在你的软件里新建 5 万个账户？ 你准备如何建？ 你是否在你的程序设计中考虑未来的这个场景？如果再复杂一点场景的呢（比如这 5 万人的组织，还需要和他们业务上下游供应商的软件系统打通身份认证进而数据共享，你准备通过哪一个协议，如何实现这个对接）？ 你是否需要有人来解决这些问题？10天？ 20 天？ 30 天？还是 60 天？它的成本是多少？可能存在的风险？ 解决企业管理者的问题: 你是一个企业管理者，你的公司可能采购了或使用了 2~3 套不同的软件供货商的产品。你的员工还要使用你供应链上下游供货厂商的软件系统，你的员工是否在这些不同的环境当中，一套密码走天下，或和他人共享账号？你是否可以知晓并管控这些风险？ 在这些不同网络边界环境中，你如何区分，分析，那些异常的登录，异常的访问？如何确保你业务数据的安全？ 是否可以通过这些登录的数据，不同应用间访问调用的授权记录，分析、识别你业务潜在的风险与变化。 当你的应用需要和你供应链上下游厂家的应用共享数据，你如何实现不同组织间、不同应用间的权限对接，身份追踪？你是否需要跨组织的身份识别，进而是身份授权（经理的权限和员工的权限的授权区别），你准备如何打通，如何处理不同组织间身份的识别与鉴权，进而实现数据共享，同时保证整个业务链更流畅，更安全？ 当你面对 2~3 个不同软件供货商也许还好，那当我们把这个数量放大到 8~10，每一个员工的入职，离职，职位变动是否都牵涉到账号的开通和权限管理，注销和变更。每一个软件系统，每一个不同员工，每一个不同身份变更，需要多少次操作？我想没有人会喜欢这个操作。 当你面对不止一家供货商的软件系统，面对他们各自不同的后端用户系统，鉴权管理，技术实现。你计划如何应付自如？ 解决终端用户的问题: 作为终端用户，你是否每天要面对不同的应用、 不同的系统、不同的账号？ 牢记不同的密码，不同的用户名？ 抑或一套账号密码走天下？如果走到哪里都可以让你刷脸支付，刷脸吃饭，刷脸解锁，听着是不是很美好？ 再进一步，你是否想更多保护自己的隐私，自由掌控你在这些不同系统上的数据，全部在你手里。就如你可以在微信里登录各种各样的小程序，你可以授权你的昵称，你的性别，你的头像，为啥不能再多授权一点呢？ 比如你的收货地址，你的简历，你的相册，你昨天写的一份文档，你在大学时代所有的照片。你修改了你的头像，你的昵称，你的收货地址，你的简历，所有这些小程序里面的读到的信息都改变了。你下架了你的简历，所有小程序-招聘类的 APP 都不再有你最新的简历，你开放了你的简历，所有照片类小程序都可以读到你的简历数据（至于每一个 APP 里如何呈现，组合这些数据是程序的事情）。 你想买一个北京市内环内，总价 800-900 万， 3 房 2 厅，100 平以上，楼层朝南，税费在 20 万以下的不动产，你只需要把这个需求写出来，开放读取权限，所有的房产类小程序可以自动搜索到你的需求，为你匹配，把结果发送给你，然后由你决定打电话，由谁帮你完成交易。而不是你去不同的网站注册账户，上传需求，一遍又一遍重复的劳动。 Authing 就是为解决上面的问题而生，从身份开始，从企业端开始。我们为企业提供一套效率工具，进而触达每一个人。 现实的世界是什么样子: 现实世界，我们的数字身份存在于一个虚拟的网络世界，为我们守护者不同应用的数据。在这个虚拟世界我们就是一串 0 和 1 。 在 WEB 最开始的阶段，每个人架起自己的网站，通过超文本向外界展示自己，分享自己，WEB 赋予了每一个个体通过互联网触达这个世界每一个角落的可能。后来世界发生了变化，人们发现可以通过 Web 做的更多，有了 CRM 系统，OA 系统，营销系统，论坛系统，各种各样的系统，通过数字世界的 0 和1 帮我们守护这些不同系统的数据，通过一个超链接分享我们的数据。再后来，当第一部 iPhone 被创造的时候，移动互联网来到了这个世界，随后是越来越多的 App ，我们生活在这些不同的 App ,在每一个 App 里面有一个我们的身份。 一开始足够多的 App 占据了我们的生活，到后来一些超级 App 逐渐占有我们访问量的 80% ，再后来 App 可以支持手机短信登录，可以支持使用其他超级 App 登录，超级 App 成为其他 App 的母体（如微信，支付宝）。总算为我们缓解了一下身份的问题。可是 App 却拒绝彼此之间互动，我们很难将 App-1 里面的数据分享到 App-2（想象一下早期微信拒绝 163 的音乐转发，包括现在也是，你必须通过浏览器中转，才能在微信里用支付宝转账）。我们也不可能使用搜索引擎整合不同 App 之间大量的数据。 这就是现实世界：每一个组织，每一个企业都在想怎么让我们留存在他们的平台，他们的城堡，他们的护城河之内（网络世界的我们就是 0 和 1）。 为什么是现在？: 云计算赋予了企业更多可能， SaaS 应用也逐渐成为应用软件新的主流打开方式。 不同的 SaaS 解决不同的问题，当我们越来越多的使用云，我们也将越来越多的面对不同的 SaaS 。 所以我们看到了 Okta , Auth0 , PingIdentity , Yufuid , AWS cognito 等等这些组织，在努力解决这些问题，身份与统一协作。 我们也加入了这场游戏，带着不同的视角：如何更好的共享数据。 为什么是我们？: 也可以是任何人，只是我们还没有看到和我们拥有一样观察的同类。 我们将如何做？: 我们从把 Authing 打造为中国版的 Auth0 开始，为企业提供一套效率工具，接管复杂的权限设计，认证，授权对接，进而触达每一个个体，通过守护他们的数据，让你、我、让每一个人可以授权更多。 Auth0 已被验证过的商业模式，详情为什么 Auth0 值十亿美金?，最起码在中国我们没看到这么一家企业类似，除了 Authing。更多了解：Auth0 和 Authing，谁是身份云的高脚杯？ 没讲太多技术，面对的问题，我想每一个人都感同身受。 关于 Authing: Authing 是中国领先的 IDaaS 服务提供商，对标美国独角兽 Auth0。创始团队来自字节跳动、百度、IBM、阿里云、滴滴出行等互联网企业。Authing 提供开发者友好、易拓展的身份认证和授权平台，赋能企业在云端管理身份，主要功能包括：单点登录、用户分析、扫码登录、多因素认证、行为审计、风险控制、跨平台设备管理、IoT 身份认证等；兼容国际各类标准协议：OAuth2. 0、OIDC、SAML、AD/LDAP、WS-Fed、JWT 等。 支持云交付和私有化部署方式，帮助企业和开发者千倍级提升生产效率。 "
    }, {
    "id": 14,
    "url": "http://localhost:4000/blog/solid-flemish/",
    "title": "论文推荐：通过让公民控制自己的数据简化政府流程",
    "body": "2020/01/29 - SoLiD 是一个令人兴奋的新项目，由万维网发明者 Tim Berners-Lee 爵士在麻省理工学院启动。 该项目旨在从根本上改变 Web 应用程序的中心化趋势， 它将真正地让数据所有权属于用户，并改善隐私问题。 SoLiD 是一个令人兴奋的新项目，由万维网发明者 Tim Berners-Lee 爵士在麻省理工学院启动。 该项目旨在从根本上改变 Web 应用程序的中心化趋势， 它将真正地让数据所有权属于用户，并改善隐私问题。 本文是 SoLiD 项目在比利时的实践经验，作者有 Web 创始人 Tim 爵士、SoLiD 的核心开发者 Euben Verborgh（编者最爱的一名 SoLiD 开发者）等。详见 [SoLid中文社区]: https://learnsolid. cn/，对「数据主权」主题感兴趣的读者可以加微信：jinjian0414 ，加入微信群讨论。 适合阅读本文的读者包括：  对新技术和自动化敏感、能感知技术趋势的开发者； 渴望提升国家治理水平的官员； 医疗和保险等民生行业的从业者； 渴望创新的企业家； 在寻找新方向、敢于承担巨大风险的投资者； 对新趋势好奇的早期尝鲜者；本文作者 Raf Buyle, Ruben Taelman, Katrien Mostaert, Geroen Joris2, Erik Mannens, Ruben Verborgh and Tim Berners-Lee 涉及机构：  imec IDLab - Ghent University, Ghent, Belgium ( raf. buyle@ugent. be ) Informatie Vlaanderen, Flemish Government, Brussels, Belgium Department of Computer Science - University of Oxford, Oxford, UK0. 概要: 政府为了提供更好的公共服务，通常会存储大量的个人信息，比如公民姓名、家庭住址、婚姻状况和职业等。同时由于政府由各种政府机构组成，因此经常存在多个数据副本。这对数据一致性、隐私性和访问控制提出了更高的要求，特别是在 GDPR 和 CCPA 等类似的法律出台后。为了解决这个问题，我们探索了一种基于名为「SoLiD」的技术生态，这种技术可以让公民在自己的数据存储柜中维护自己的数据。我们已经将 SoLiD 用于两个影响力很大的场景，在这两个场景中，公民的数据存储在个人数据库柜中，任何组织可以在得到公民授权的情况下访问公民的数据，同时公民可以选择授权哪些数据给访问者。我们发现 SoLiD 可以高效重塑公民与公民之间的关系、公民与数据的关系和公民与应用的关系。我们坚信这个实验可以加速公共行政管理效率和公民控制自己数据的进程。 Keywords: 个人数据、去中心化、GDPR、Solid、Linked Data。 1. 介绍: 随着《通用数据保护条例》（GDPR）的出台，欧盟委员会提供了一个旨在赋予个人数据控制权的法律。这个法律不一定会对数据存储商不利，如果合适的使用这项法律，GDPR 可以让以前复杂的数据数据流通变得简单。欧洲公司想要符合 GDPR 规范需要耗费巨大的成本和资源，而国际公司和跨国公司也必须尊重 GDPR 带给欧盟成员的权利。这造成了一些反作用，那些在欧洲且遵循 GDPR 的公司变得越来越不欢迎，反而那些非欧洲公司在遵循 GDPR 上有明显优势。 并非所有受 GDPR 约束的组织都有可疑或恶意的意图，这里面有很多组织在试图遵守法律时遇到了很大的困难。地方、地区和国家政府肯定会遇到此类问题。政府的机构层级复杂，每层都有历史性增长的数据需求和流程。因此，公民数据存在很多副本，这些副本导致的安全性和法律问题已经存在于很多部门。这些政府现在要求从技术上符合 GDPR 规范，以简化他们的数据管理成本。 当前，政府层级的数据处理面临的最大问题是：如何平滑的将数据从 A 迁移到 B。这不仅在不同领域之间带来了许多技术挑战，当政府开始“数据培训”时，这也成为一个复杂的法律问题，因为涉及到的服务器过多。如：数据经过 A，B，C 和 D 站，而 B 和 C 在法律上不允许看到 A 和 D 可以看到的所有数据。因此，存在复杂的过程来精确验证 B 和 C 的访问权限是什么，然后在将数据推送到 D 时重新整合它们的结果。一个明显的例子是低排放区（LEZ），LEZ 禁止在市中心或仅在特定条件下允许车辆行驶，因为它们散发出太多有害物质。在法兰德斯，车辆与自然人进入 LEZ 时，联邦信息检查车牌号与所有人是否进入到了指定区域；最终数据经过处理，并判断是否允许车辆在城市内通行。 「SoLiD」生态系统通过「公民自有数据存储柜（Personl Online Data，Pod）」 来解决上述问题，这样的好处是所有的公共和私人数据都存储在一个地方。每个机构都不需要在 A 和 D 之间移动数据，而是请求公民授权自己能查看哪些数据。这样，数据就不必到处移动，并且可以自动评估每个数据请求是否是 GDPR 合规的。在线上和线下控制我们的个人数据是一个趋势性主题，有大量研究在此领域。这里面的关键概念是人们可以选择将个人数据存储在何处，这些数据是去中心化存储的。与 SoLiD 技术相似的还有区块链技术，它通常也被认为是个人数据管理的解决方案。SoLiD 相较区块链的优势是天生是协议化的，不需要各方沟通就可以互相交换数据，而区块链不认识彼此各方达成的协议。区块链对于在没有中央银行或中央管理机构的情况下进行支付的情况下非常有效，比特币是一个成功的案例。区块链可以跨多个节点复制数据，如果你在不需要受信任的第三方时，可以计划使用区块链。如果你是核心参与者，或者各方之间相互信任， 那么你不需要区块链。而且，区块链的不变性意味着无法删除数据，这可能是一个挑战 GDPR 第 17 条赋予的人们删除其个人数据的权利。 在本文中，我们探讨了对个人数据进行控制的观点，并讨论了我们使用 SoLiD 实现的两个特定用例。SoLiD 提供了基于开放标准和基于 Web 的生态系统。根据 Harrison，Pardo＆Cook 的说法，生态系统是一个隐喻，通常用来表达参与者、组织、物质基础设施和象征性资源之间相互依存的社会系统，而这种生态必须在技术驱动的信息密集型社会系统中创建它们。数字生态系统的一个典型例子是开放数据生态系统。开放数据是指政府义务的在他们的网站上免费提供其非隐私敏感和非机密数据网络。开放数据重用依赖于数据提供者提供的数据和元数据，而提供者则依赖于重用者的反馈来增加数据质量。尽管开放数据生态系统中的所有参与者都相互依赖有效地发展自己的业务，公共行政部门和决策者最有可能引导这些开放的政府生态系统。Zuiderwijk，Janssen 和 Davis指出开放数据生态系统的挑战是相关的“政策，许可，技术，融资，组织，文化和法律框架，以及 ICT 基础设施” 。开放数据将“单向街道”重新连接为“双向通信”的生态系统，可能与使公民控制其个人数据的挑战同样困难。通过将 SoLiD 的方法应用于两种具有高影响力的场景，Flemish 政府的目标是建立能让公民控制自己数据的能力。 本文的结构如下：在下一节中，我们将介绍我们要解决的挑战。之后，我们在章节 3 中介绍有关 SoLiD 的基础知识；在第 4 节中，我们讨论了使用 SoLiD 解决挑战的方法， 然后在第 5 节中讨论我们的实现。最后，我们得出结论并在第 6 节中介绍我们的经验教训。 2. 挑战: 比利时北部联邦国家和地方政府旨在增强公民的能力，使其可以在公共服务、银行、健康保险和电信提供商等不同环境下在线重用其个人信息。政府通常是个人数据（例如住所、医疗信息等）的托管方，这些信息存储公共行政部门的各种信息系统这种。Flanders 的政府管理部门之间允许共享和重用数据，这样减轻了公民的管理行政负担，是欧洲实施“仅一次原则”的体现 。但是实际上，公共行政部门正在努力控制公民的数据。 第一个挑战是政府管理部门努力保留个人数据，例如：最新的电子邮件地址、电话号码或银行帐号。由于一些公民很少与政府联系，个人信息在各种信息系统中通常已经过时。 第二个挑战涉及允许公民在不同的环境中重用其数据，例如在申请新工作时授权自己的文凭。GDPR 法规 2016/679 声明： “为了确保自由给予同意，不得提供同意在特定情况下处理个人数据的有效法律依据 是数据主体和控制器之间的明显失衡，尤其是在 控权人是公共机构，因此不太可能自由同意在特定情况下的所有情况下都应考虑在内。”（欧洲委员会， 2016年，第43条）。 换句话说，政府与公民之间的关系通常被认为是不平衡的关系，因为政府拥有比公民更多的权力。因此，获得公民的同意后重用政府信息系统中管理的权威数据，不能认为是自由提供的。欧洲政府部门之间共享数据不是基于给定的同意，而是具有特定的合法依据。 因此，我们主要研究的问题是：政府程序如何实现通过使公民控制其个人数据来简化 GDPR 合规成本？这个研究问题有两个观点：一方面，公民如何与政府部门共享数据？另一方面，公民如何重用存储在政府信息中的数据（这些数据的用途各不一样）？ 该项目评估了 SoLiD 的去中心化原则来解决这些障碍。SoLiD 是一个生态系统，可让个人将数据存储在他们的Data Pod（数据柜）。这使用户可以真正控制其数据，因为他们可以选择在何处存储他们的数据以及谁可以访问。整套技术基于语义网技术（Linked Data）和去中心化，对于想让用户重新控制数据的政府部门和私人组织有很大价值。 3. SoLiD: SoLiD 是一个基于 Web 的生态系统，它通过提供个人数据柜将数据与应用程序分开。个人数据柜让他们可以存储任意数据，同时可以授权哪些人、哪些应用有哪些权限读写他们的个人数据柜。 图1 显示了 SoLiD 与当前应用程序体系结构的对比。其特点是不用依赖一些应用程序，公民可以控制自己的个人数据。应用程序需要从公民那里请求访问权限，以便能够对其数据进行操作。 重要的是，SoLiD 不是应用程序或平台，而是协议：开放的标准和约定。它基于现有的 Web 标准，包括 Linked Data 技术栈，任何人都可以实现他们。 图片 1. Current applications are a combination of app and data. Thereby, the app becomes a centralisation point, as all interactions with that data have to go through the app. By introducing the concept of a personal data pod, Solid pushes data out of applications, such that the same data can be managed with different applications. This removes the dependency on a centralised application, as data can be stored independently in a location of the citizen’s choice. Data Pod 是个人存储柜，可以存在于 Web 上的任何位置，例如你自己搭建的服务器，社区搭建的免费服务器或政府提供的存储空间。在 Pod 中，所有者拥有数据创建、编辑、和控制管理的权限。所有者可以决定授予哪些人拥有权限，例如允许家庭成员看到他们的假期照片或允许同事阅读会议笔记。而且，人员、组织和应用程序可以向 Pod 的公共收件箱发布请求以获取对个人数据的访问权限。人们至少拥有一个数据柜，但他们还可以拥有其他多个 Pod，例如用于家庭数据、工作数据和医疗数据等。 而典型的中心化应用程序要求用户将数据存储在应用程序，SoLiD 通过使数据个人化来扭转这一局面，并允许用户授权哪些应用程序可以用我的数据。虽然简单的应用程序只需要一个 Pod，但 SoLiD 的真正功能在于让应用程序组合来自多个 Pod 的数据，这减少了很多数据对齐会产生的成本。例如，SoLiD 上的社交网络应用程序可以将个人信息（例如帖子、朋友、评论和喜欢的信息）存储在个人数据柜中，而他们的可视化需要组合不同数据 Pod 的数据。这解决了两个基本问题，首先，数据不再需要在不同的应用程序中复制，因为应用程序将指向单个副本。二是，不再出现同步问题：因为只有一个副本数据，应用程序不会再有不同步的数据。 SoLiD 的巨大优势主要体现在以下特点上：: 1.  独立身份：: 用户选择他们的身份以及身份所处的位置。在 SoLiD 中，个人标识符（WebID）是一个像 URL 一样的唯一地址； 2. 控制数据：: 用户可以授予和撤消对任何人和应用的细粒度访问权限； 3. 随意切换应用程序：: 由于数据可以灵活被不同应用访问，避免了供应商锁定的危险，用户可以选择他们最喜欢的公司推出的产品。 为了我们的目的，SoLiD 精确地解决了上述“数据传输”问题。数据不再在不同的政府机构之间移动，每个政府机构都直接使用原始数据来源，即公民的数据柜。这解决了多个副本和同步的问题，以及 GDPR 问题，即哪个机构有权访问哪些公民的哪些数据。因为每个机构都单独对 Pod 进行请求，因此对 Pod 的读写是一个重要的话题，接下来我们会讨论这个问题。 4. 解决方案：使用 SoLiD 交换公民个人信息: 在本节中，我们解释了使用 SoLiD 在公民和政府之间共享数据的方法。我们首先会解释需求， 之后我们会讨论两种场景， 在这两个场景中：（1）公民的数据（例如：电子邮件地址、电话号码）存储在 Pod 中；（2）重用权威政府数据，例如文凭等信息。 4. 1 需求: 对于我们的用例，我们假设所有公民都可以使用全局唯一的统一资源标识符（URI）（称为WebID）来唯一标识。该 WebID 指向有关公民的更多详细信息的，尤其是指向个人数据柜（Pod）。此外，我们假设所有政府部门和组织都具有 WebID 和 Pod。所需的组件 Fig2 所示。通常，SoLiD Pod 具有公共收件箱，任何人都可以在其中发布消息。然后消息只能由所有者读取、修改和删除。我们假定所有 Pod 都满足此约定，因为我们使用了此约定来保证用户之间的通信。 4. 2 用例：公民共享个人信息: Flemish 政府开发了一种数字助理，可提供市民与不同政府部门互动。一个有用的例子是向公民提供有关公共服务状态的通知。由于大多数公民几乎没有与政府之间的互动，相比较与私营部门之间的互动， 联系信息以及有关其偏好的信息通常已经过时。用了 SoLiD 之后，角色互换了，市民的 Pod 成为主要联系信息和偏好的来源。该用例解决了第一个挑战， 避免了用户必须在各个公共和门户网站中保持其数据的最新状态。 我们使用电子邮件地址说明此用例，该用例适用于任何个人信息。 前提条件：公民爱丽丝（A）可以通过其 WebID 唯一标识，同时 A 在 SoLiD Server（S）上托管有一个个人在线数据存储（Pod）。同样，组织（O）具有一个WebID 和一个 Pod。 用例 1. 1：共享个人数据。A 使用安全的令牌访问向 O 请求身份验证，成功通过身份验证后，A 可以通过网页按钮授权的形式授予 O 访问其电子邮件地址的权限，成功后，O 可以从 A 的 Pod 中读取电子邮件地址。拓展功能：若 A 不再信任 O，A 可以撤回 O 对她电子邮件地址的访问权限。 用例 1. 2：管理个人数据。A 使用安全的另外访问 O 请求身份验证，身份验证成功后，A 可以在 O 提供的用户界面将其电子邮件地址添加到其自己的 Pod 中。扩展功能：A 可以修改或删除她的电子邮件地址。 用例 1. 3：请求访问个人数据。O 将「访问 A 的电子邮件地址」请求发布到 A 的公共收件箱。看到此请求后，A 授予 O 读取对她电子邮件地址的访问权限，并将通知发送到O 的公共收件箱。收到通知后， O 可以查看 A 的电子邮件地址。 4. 2 用例：公民授权权威个人信息: 政府的目标是使公民能够重用存储在不同政府级别的权威数据源中的个人信息。比如，在申请新工作时共享大学颁发的文凭。或者在申请贷款时获得有关其收入的信息（如 Fig3 所示）。该用例解决了上文提到的第二个挑战。首先，公民不同意政府与其他人共享他们的数据，因此我们将公民的学位信息存储在公民自己的 Pod 中。换句话说，在 GDPR 的上下文中，数据主体是数据的控制者。这种情况表明，SoLiD 重塑了公民、其权威数据以及应用程序之间的关系。如果公民拒绝授权，则政府可以像今天在税收领域一样行使这项权利。 前提条件：公民爱丽丝（A）拥有一个 WebID，同时有一个 Pod，托管在 SoLiD Server（S）上。同样，大学（U）具有一个 WebID 和一个 Pod。A 的雇主（E）也具有 WebID。 用例 2. 1：A 注册为 U 的学生，并且必须提供她的 WebID，这将使A 在大学毕业后收到证书。 用例 2. 2：A 保持对 U 的授权直到毕业。U 维护 A 的所有信息，直到 A 毕业。这些信息包括课程、年级、教师等。此类信息是不能公开访问的，只有 A 对此有读写权限。 用例 2. 3：A 大学毕业后向 U 索要证书。A 要求提供证书的（摘要）副本，以便她可以与第三方共享。U 会生成此证书的摘要，并将其发送到 A Pod 中的收件箱。该证书由 U 使用非对称加密进行数字签名。 用例 2. 4：共享文凭。现在 A 在她的收件箱中有她的文凭副本，她可以与任何人分享。例如，她可以将其发布到她的数据 Pod 中，然后授予其雇主 E 的 WebID 的读取权限。 用例 2. 5：检查文凭的有效性。如果 E 要检查文凭 A 的有效期，E 必须在该文凭上检查 U 的签名。E 通过从文凭中提取签名，确定权限（U）来完成此操作。这可以是 使用现有的文档签名机制（例如 XAdES）完成。 5. Flemish 公民的个人助理: 在本节中，我们将讨论结合 “Mijn Burgerprofiel” 的实施方法。Mijn Burgerprofiel 的意思是「我的公民资料」，他是 Flemish 公民的智能数字助手，通过该助手，公民可以看到其所有授权状态和数据。此外，欧洲还有一个标准的电子身份验证规范，名为：eIDAS。该规范减少了身份被滥用或改动的风险。用户可以使用以下方式通过“我的公民”个人资料访问个人数据： 1）通过智能卡读卡器或通过手机获取比利时电子身份证；2）在手机上安装应用程序。 我们在上一节详细介绍了第一个用例，即公民共享个人信息（例如，电子邮件地址）。如第 3 节所述，我们的应用程序和数据是分离的。因此，我们方法的实施还需要两个组件：（1）数据 Pod，（2）用于查看和使用数据的应用程序界面。 接下来，我们将讨论这两个组件。 5. 1 Data Pod 应用程序: 在我们的实施中，我们使用 Node Solid Server 5. 0. 1（NSS）创建和托管数据 Pod。如果用户已经有一个 Pod，则可以用来共享个人信息。NSS允许我们为任何公民和政府组织创建安全的数据柜。默认情况下，政府为所有公民提供数据 Pod。但是，如果公民渴望对 Pod 拥有更多控制，他们可以选择自己托管数据 Pod，例如在自己的服务器上运行 NSS。 5. 2 个人信息管理基础设施: 为了允许政府能方便的访问公民的特定信息，我们扩展了“我的公民资料”，所有 Flemish 公民都拥有一个资料。目前，这个信息集中存储在“我的公民资料”的数据库中。为了能和 SoLiD 和谐的工作，我们修改了“我的公民资料”，该修改版本不是将信息存储在每个公民的数据 Pod 中，而是存储在 Flemish 政府的服务器中，“我的公民资料”就像一个公民，也拥有一个WebID。 对于我们的用例，我们专注于存储和获取公民的电子邮件地址。为了达到这个目的，我们实现了三个组件：SoLid Linker（将原来的市民与 SoLiD 连接起来）、电子邮件提取器和电子邮件可视化工具。这些组件将在后面说明。 5. 3 SoLiD Linker: 在“我的公民个人资料”的个人资料设置中，我们添加了一个字段，人们可以将其帐户与任何 SoLiD WebID 关联起来，如 Fig4 所示。默认情况下，公民使用政府提供的默认 WebID。 5. 4 Email Extractor: 如果某个公民有一个有效的 SoLid WebID 链接到其“我的公民个人资料”帐户，则应用程序可以尝试通过跟踪文件中的链接来提取其电子邮件地址。公民的数据 Pod 中包含电子邮件地址。基于WebID，电子邮件提取器组件可以确定用户的 Pod。使用此 URL，提取程序将使用“我的公民个人资料” WebID 的身份验证令牌向 SoLiD Pod 发送 HTTP GET 请求。如果公民已授予“我的公民个人资料”对该文件的读取权限，则该文件的内容将被返回；否则将返回授权错误。如果没有遇到错误，则电子邮件提取器组件将返回公民的电子邮件地址。 5. 5 Email 可视化工具: 我们在“我的公民资料”概述页面上，添加了一个字段，该字段显示用户的电子邮件地址（如果用户有或用户授权后才显示）。该信息是从用户链接到的 WebID 中读取的，此信息始终即时提取，不会再存储在其他地方。这意味着当公民修改了该值，这个页面能立即显示更新后的值。该可视化工具可用于自动化流程，例如在即将举行的选举中发送提醒。 6. 总结: 在本文中，我们介绍了有关 SoLiD 在政府治理中的实施经验。Flemish 政府接受了我们对“我的公民资料”进行的修改，这样我们可以让其与 SoLiD 生态系统互操作，从而使公民可以控制其数据。我们解决了两个引人注目的挑战；首先，政府部门努力保持个人数据是最新的，其次是允许公民重复使用存储在其中的数据，这些数据存储在不同背景下的政府信息系统。该案例证明了 SoLiD 可以解决公民对数据的控制权问题。 未来研究的新途径包括如何保持对用户权威数据（如住所）最大程度的利用。这应确保公民共享的信息与私营部门的关系始终是最新的。另一个明显的点是，这项研究旨在告知用户同意重用数据是他们的天赋人权。这个概念称为 “知情同意”。此外，所有操作都应透明地记录在 SoLiD Pod 中，包括：访问数据、修改数据、授权同意和撤销权利，这与我们银行帐户中的财产相当。这种细粒度和结构化的日志还可以通过使用机器学习算法来检测异常和数据泄露。为了更完整，未来的研究应该关注于不同的挑战，如如何打造可持续的商业模式。 SoLiD 建立在现有 Web 标准和方法上（例如关联数据和去中心化，因此 SoLiD 可以被视为过程创新，而不是技术创新），因此与 SoLiD Pod 的集成非常简单。我们已经使用电子邮件地址说明了这种简单度，但目的是将其扩展到所有个人数据。 我们希望这个在 Flemish 地区的 SoLiD 试验可以加快解决政府在公共管理和私人组织中面临着的同样的复杂性问题，同时让用户重新控制自己的数据。 引用:  Belgisch Staatsblad. Wijzigingen met betrekking tot de onderzoeksmiddelen van de administratie. (2011). http://www. ejustice. just. fgov. be/cgi_loi/change_lg. pl?language=nl&amp;la=N&amp;table_name=wet&amp;cn=2011041406 Accessed 9 July 2019 Berners-Lee, T. ; Verborgh, R. Welcome to Solid. (2019). https://rubenverborgh. github. io/Solid-DeSemWeb-2018/#title Accessed 9 July 2019 Buyle, R. , Van Compernolle, M. , De Paepe, D. , Scheerlinck, J. , Mechant, P. , Mannens, E. ,&amp; Vanlishout, Z. Semantics in the wild: a digital assistant for Flemish citizens. In Proceedings of the 11th International Conference on Theory and Practice of Electronic Governance (pp. 1-6). ACM (2018). doi: https://doi. org/10. 1145/3209415. 3209421 Cruellas, J. C. , Karlinger, G. , Pinkas, D. , &amp; Ross, J. Xml advanced electronic signatures(xades). W3C Recommendation (2003). http://www. w3. org/TR/XAdES Accessed 9 July2019 Decker, C. , &amp; Wattenhofer, R. (2013, September). Information propagation in the bitcoinnetwork. In IEEE P2P 2013 Proceedings (pp. 1-10). IEEE.  de Montjoye, Y. A. , Wang, S. S. , Pentland, A. , Anh, D. T. T. , &amp; Datta, A. On the TrustedUse of Large-Scale Personal Data. IEEE Data Eng. Bull. , 35(4), 5-8 (2012) Esposito, C. , De Santis, A. , Tortora, G. , Chang, H. , &amp; Choo, K. K. R. (2018). Blockchain:A panacea for healthcare cloud-based data security and privacy?. IEEE Cloud Computing,5(1), 31-37.  European Commission. Regulation (EU) 2016/679 of the European Parliament and of theCouncil of 27 April 2016 on the protection of natural persons with regard to the processingof personal data and on the free movement of such data, and repealing Directive 95/46. Official Journal of the European Union (OJ), 59(1-88), 294 (2016) European Commission. Guidelines on Consent under Regulation 2016/679 Luxembourg:Publications Office (2018) https://ec. europa. eu/newsroom/article29/itemdetail. cfm?item_id=623051 Accessed 9 July 2019 European Commission. It’s your data – take control. Luxembourg: Publications Office(2018). https://ec. europa. eu/commission/sites/beta-political/files/data-protection-overviewcitizens_en. pdf Accessed 9 July 2019 Fatema, K. , Hadziselimovic, E. , Pandit, H. J. , Debruyne, C. , Lewis, D. , &amp; O’Sullivan, D. Compliance through Informed Consent: Semantic Based Consent Permission and DataManagement Model. In Proceedings of the 5th Workshop on Society, Privacy and the Semantic Web - Policy and Technology (PrivOn2017), Vienna, Austria (2017) Harrison, T. M. , Pardo, T. A. , &amp; Cook, M. Creating open government ecosystems: A research and development agenda. Future Internet, 4(4), 900-928. MDPI AG (2012). doi:https://doi. org/10. 3390/fi4040900 Janssen, M. , Charalabidis, Y. , &amp; Zuiderwijk, A. Benefits, adoption barriers and myths ofopen data and open government. Information systems management, 29(4), 258-268 (2012). doi: https://doi. org/10. 1080/10580530. 2012. 716740 Jia, J. , Jin, G. Z. , &amp; Wagman, L. The short-run effects of GDPR on technology venture investment (No. w25248). National Bureau of Economic Research (2018). doi:10. 3386/w25248 Mansour, E. , Sambra, A. V. , Hawke, S. , Zereba, M. , Capadisli, S. , Ghanem, A. , … &amp;Berners-Lee, T. A demonstration of the solid platform for social web applications. In Proceedings of the 25th International Conference Companion on World Wide Web (pp. 223-15226). International World Wide Web Conferences Steering Committee (2016). doi:https://doi. org/10. 1145/2872518. 2890529 Mun, M. , Hao, S. , Mishra, N. , Shilton, K. , Burke, J. , Estrin, D. , … &amp; Govindan, R. Personal data vaults: a locus of control for personal data streams. In Proceedings of the 6th International Conference on Emerging Networking Experiments and Technologies (p. 17). ACM (2010). doi: https://doi. org/10. 1145/1921168. 1921191 Narayanan, A. , Toubiana, V. , Barocas, S. , Nissenbaum, H. , &amp; Boneh, D. A critical look atdecentralized personal data architectures. arXiv preprint arXiv:1202. 4503 (2012) Pollock, R. (2011, March 11). Building the (Open) Data Ecosystem. http://blog. okfn. org/2011/03/31/building-the-open-data-ecosystem/ Accessed 9 July 2019 Solid. Welcome to Solid (2019). https://solid. inrupt. com/ Accessed 9 July 2019 Van Kleek, M. , &amp; OHara, K. The future of social is personal: The potential of the personaldata store. In Social Collective Intelligence (pp. 125-158). Springer, Cham (2014) Verborgh, R. Ruben Verborgh on data &amp; privacy. Imec Magazine (2019). https://www. imec-int. com/en/imec-magazine/imec-magazine-january-2019/back-to-thefuture-how-we-will-regain-control-of-our-personal-data Accessed 9 July 2019 Vescovi, M. , Perentis, C. , Leonardi, C. , Lepri, B. , &amp; Moiso, C. My data store: toward userawareness and control on personal data. In Proceedings of the 2014 ACM InternationalJoint Conference on Pervasive and Ubiquitous Computing: Adjunct Publication (pp. 179-182). ACM (2014). doi: http://dx. doi. org/10. 1145/2638728. 2638745 Whitley, E. A. Informational privacy, consent and the “control” of personal data. Information security technical report, 14(3), 154-159 (2009). doi:https://doi. org/10. 1016/j. istr. 2009. 10. 001 Yeung, C. M. A. , Liccardi, I. , Lu, K. , Seneviratne, O. , &amp; Berners-Lee, T. Decentralization:The future of online social networking. In W3C Workshop on the Future of Social Networking Position Papers (Vol. 2, pp. 2-7) (2009) Zuiderwijk, A. , Janssen, M. , &amp; Davis, C. Innovation with open data: Essential elements ofopen data ecosystems. Information Polity, 19(1, 2), 17-33 (2014) Zyskind, G. , &amp; Nathan, O. Decentralizing privacy: Using blockchain to protect personaldata. In 2015 IEEE Security and Privacy Workshops (pp. 180-184). IEEE (2015). doi:0. 1109/SPW. 2015. 27 本文译者：蒸汽记忆——Authing 身份云运营主体和 SoLiD 中文社区维护主体。原文地址：https://drive. verborgh. org/publications/buyle_egose_2019. pdf 关于 Authing: Authing 是中国领先的 IDaaS 服务提供商，对标美国独角兽 Auth0。创始团队来自字节跳动、百度、IBM、阿里云、滴滴出行等互联网企业。Authing 提供开发者友好、易拓展的身份认证和授权平台，赋能企业在云端管理身份，主要功能包括：单点登录、用户分析、扫码登录、多因素认证、行为审计、风险控制、跨平台设备管理、IoT 身份认证等；兼容国际各类标准协议：OAuth2. 0、OIDC、SAML、AD/LDAP、WS-Fed、JWT 等。 支持云交付和私有化部署方式，帮助企业和开发者千倍级提升生产效率。 Authing 自上线以来已经服务海内外超过 3000 名企业开发者、拥有约 50 万的开发者社区和托管数百万终端用户，每月百万人次通过 Authing 平台进行认证，并已经服务数十家付费企业客户，覆盖教育、人工智能、出版社、 物联网等多个行业。 "
    }, {
    "id": 15,
    "url": "http://localhost:4000/blog/%E4%BD%BF%E7%94%A8Authing%E4%B8%8EAWS%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90/",
    "title": "使用 Authing 集成 AWS 服务",
    "body": "2019/12/20 - Authing 是一个开发者友好、拓展性极高的身份认证云服务，每月有超过 100 万次用户被 Authing 认证和授权。本次分享将介绍如何企业常见的认证授权场景，可以满足中国本地用户对于 Cognito User Pool 的需求，并且提供本地化的服务。同时本文将讲解 Authing 如何与 AWS 各类服务集成，如 Cognito Identity Pool, IAM, S3, Lambda, AD 等等。 Cognito Identity Pool: Cognito User Pool 负责认证。终端用户可以通过 user pool 完成注册登录流程。 Cognito Identity Pool 负责授权（访问控制），将使用 AWS 资源的权利授权给终端用户。 Amazon Web Services(AWS) 虽然作为市场份额全球第一的云计算厂商，其产品也不是完美无缺的，Cognito （AWS 的身份认证解决方案）及其附带的中文文档就是一个反面教材，其难用程度令人发指。当然，除了不易用之外，还有访问速度缓慢，不适用于中国市场等问题存在。 而国产的 Authing 可以解决使用 Cognito 的诸多问题，使用 Authing User Pool， 可以替代 Cognito User Pool，构建起国内用户与 AWS 资源之间的桥梁。 在创建 AWS Identity Pool 时，可以配置自定义 Authentication providers，这里我们将 Developer provider name 设置为 . authing. cn 格式：  整个流程中一共有三方参与：终端用户、Authing 、AWS，具体过程如下：  终端用户使用 Authing 用户池完成认证 Authing 开发者在服务端调用 AWS 的 GetOpenIdTokenForDeveloperIdentity 接口，获得 IdentityId 和 Token。 终端用户调用 GetCredentialsForIdentity 使用 token 换取访问 AWS 资源所需的 credentials。GetOpenIdTokenForDeveloperIdentity 需要以下参数：  IdentityPoolId：你的 AWS Identity Pool ID。 Logins：一组 provider name 到 provider tokens 的映射，provider token 可以任意可以区分用户的字符串，比如 Authing 用户在用户池内的唯一 ID。 Logins : {   &lt;authing-userpool-id&gt;. authing. cn :  5ccb24701bbaf00d50xxxxxxx  // Authing 用户池 ID}我们能从请求返回数据中 获得 IdentityId 和 Token。这样，我们就在 Authing 用户池用户 和 Cognito Identity ID 之间构建起了联系。接着可以使用 GetCredentialsForIdentity 获取 credentials，从而访问相关资源。 IAM: IAM(Identity and Access Management) 管理 Users、Groups、 Roles 对 AWS 资源的访问权限，通过给 Role 添加相关权限，达到使用相关 AWS 资源的目的。 例如，新建 Cognito Identity Pool 的时候，会默认创建两个 role： 可以给此 role 添加相关权限，比如 通过集成 Authing 与 Cognito Identity Pool，我们在 Authing User ID 与 Cognito Identity ID 之间构建起了映射关系。而每个 Identity ID，可以拥有不同的 Role。不同的 Role，具备不同的 AWS 资源访问权限。这也就将 Authing 和 AWS 的各种服务结合了起来。 S3（Simple Storage Service）:  在线 Demo：https://sample. authing. cn/aws-demo/  Github Repo：https://github. com/Authing/aws-s3 下面举一个具体的例子：用户使用 Authing 登录之后，会得到一个唯一的 Authing User ID，通过 GetOpenIdTokenForDeveloperIdentity，将 Authing User ID 与 Cognito Identity ID 对应起来。 在 aws console 配置 role permissions 和 bucket policy，实现每个 Authing 用户能且仅能对 users/ 目录的文件进行增删改查操作： Bucket Policy 如下： {   Version :  2012-10-17 ,   Id :  Policy1576670578319 ,   Statement : [    {       Sid :  ListYourObjects ,       Effect :  Allow ,       Principal :  * ,       Action :  s3:ListBucket ,       Resource :  arn:aws-cn:s3:::authing-aws-demo ,       Condition : {         StringLike : {           s3:prefix :  users/${cognito-identity. amazonaws. com:sub}         }      }    },    {       Sid :  ReadWriteDeleteYourObjects ,       Effect :  Allow ,       Principal :  * ,       Action : [         s3:GetObject ,         s3:PutObject ,         s3:DeleteObject       ],       Resource : [         arn:aws-cn:s3:::authing-aws-demo/users/${cognito-identity. amazonaws. com:sub} ,         arn:aws-cn:s3:::authing-aws-demo/users/${cognito-identity. amazonaws. com:sub}/*       ]    }  ]}${cognito-identity. amazonaws. com:sub} 会被替换成当前请求用户的 Cognito Identity Id。Statement ListYourObjects 让用户具备遍历 users/${cognito-identity. amazonaws. com:sub} 的权利，Statement ReadWriteDeleteYourObjects 让用户可以操作 users/${cognito-identity. amazonaws. com:sub} 下面的文件。 Role Permission 同理： 实现效果如下： Lambda:  在线 Demo：https://sample. authing. cn/aws/Github Repo：https://github. com/Authing/authing-lambda Authing 非常适合用作 serverless 函数计算的身份认证层，开发者可以在 Authing 控制台（第三方登录 -&gt; OIDC 应用）创建 OIDC 应用： 然后在前端用几行代码即可实现一个具备标准 OIDC 认证流程的表单： const authing = new AuthingSSO({  appId:  5dfa6fd7673d4xxxxxxxxxxxx , // OIDC 应用的 ID  appDomain:  aws-demo. authing. cn });const res = await authing. trackSession();if (!res. session) { // 未登录  authing. login() // 唤起下面显示的登录表单} else {  const userInfo = res. userInfo;}生成的表单如下： 可以通过以下网址体验：https://aws-demo. authing. cn/ 用户使用 Authing 成功登录之后，会在 authorization 请求头中带上 token，开发者只需要在 lambda 函数中对这个 token 进行验证即可。 Authing 提供丰富的检验 token 的手段供开发者选择：文档地址：https://learn. authing. cn/authing/advanced/authentication/verify-jwt-token  使用 Authing 提供的 SDKimport Authing from 'authing-js-sdk'(async () =&gt; {  const authing = await new Authing({    clientId: 'your_client_id',    secret: 'your_client_secret'  });  const result = await authing. checkLoginStatus('USER_JWT_TOKEN');})()若 Token 合法，则返回数据为：{ status: true, code: 200, message: '已登录', token: {  . . . // Token 数据 }}若 Token 不合法，message 会提示相关错误信息。我们还提供了所有的错误代码列表：https://learn. authing. cn/authing/advanced/error-code 。 如果你想 reduce package size，也可以直接构造 GraphQL 请求： import axios from 'axios'axios({ url:  https://users. authing. cn/graphql , method: 'POST', data: {  operationName: 'checkLoginStatus',  query: `query checkLoginStatus($token: String) {     checkLoginStatus(token: $token) {      status      code      message      token {       data {        email        id        clientId        unionid       }       iat       exp      }     }    }`,  variables: {   token: 'USER_JWT_TOKEN', // 这里传入 request 携带的 token  } },}). then((res) =&gt; { const d = res. data; if (d. errors) {  throw d. errors[0]; } return d. data. checkLoginStatus;});. then((loginStatus) =&gt; { // handle login status}). catch((error) =&gt; { // handle error}); 使用 OIDC 密钥自己检验：传入 jwt. verify 函数的第二个参数就是 OIDC 应用的密钥。if (event. authorizationToken) {  // remove  bearer   from token  const token = event. authorizationToken. substring(7);  try {    let decoded = jwt. verify(token, '02128f34e11b11xxxxxxxxxxxxxx'),     expired = (Date. parse(new Date()) / 1000) &gt; decoded. exp    if (expired) {     cb('Unauthorized, Login information has expired. ');    }else {     cb(null, generatePolicy('user', 'Allow', event. methodArn));    }   } catch (error) {    cb('Unauthorized');   } } else {  cb('Unauthorized'); } 使用 OIDC 应用的 rest 接口https://oauth. authing. cn/oauth/oidc/validate_access_tokenGET 请求参数：access_token，必填。返回的 Response 示例： {   state : 1,   isRevoked : false,   isDeleted : false,   _id :  yokj1gN8kCBixIhc6KEj7SNsMcJ ,   id :  yokj1gN8kCBixIhc6KEj7SNsMcJ ,   accessToken :  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9. eyJqdGkiOiJkVlJmenZEbHZQRG50dG9LWnJ1WkciLCJzdWIiOiI1Y2U1M2FlYTlmODUyNTdkZDEzMmQ3NDkiLCJpc3MiOiJodHRwczovL29hdXRoLmF1dGhpbmcuY24vb2F1dGgvb2lkYyIsImlhdCI6MTU2OTU4MDMwOCwiZXhwIjoxNTY5NTgzOTA1LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIiwiYXVkIjxxxxxxxxxxxxxx ,   accessTokenExpiresAt :  2019-09-27T11:31:45. 000Z ,   scope :  openid profile ,   appId :  5d01e389985f81c6xxxxxxxxxxxxx ,   userOrClientId :  5ce53aea9f8525xxxxxxxxx ,   when :  2019-09-27T10:31:48. 000Z ,   iss :  https://oauth. authing. cn/oauth/oidc ,   sub :  5ce53aea9f85257dd13xxxxxxxx ,   aud :  5d01e389985f81c6c1xxxxxxxxx ,   exp : 1569583905000,   iat : 1569580308000,   user_id :  5ce53aea9f85257xxxxxxxxx ,   issued_to :  https://sso. authing. cn ,   audience :  5d01e389985f81c6xxxxxxx ,   expires_in : 3360,   access_type :  offline }开发者可以通过验证结果的不同，进行相应的业务逻辑处理。如在这个示例中，未登录下 private 接口的 http status code 为 401： 登录之后成功返回数据： AD: Authing 为每个用户池自动创建了一个 LDAP 服务，访问 Authing LDAP 服务器需要使用 Authing 的应用密钥 (Secret)，认证命令如下所示： $ ldapsearch -H ldap://ldap. authing. cn:1389 -x -D  ou=users,o=AUTHING_CLIENT_ID,dc=authing,dc=cn  -w  AUTHING_CLIEENT_SECRET  -LLL -b  ou=users,o=AUTHING_CLIENT_ID,dc=authing,dc=cn 具体文档可见：https://learn. authing. cn/authing/advanced/ldap-idp。 通过 Active Directory Connector，AWS 开发者可以直接复用 Authing 的 LDAP-IdP。 其他 AWS 资源: 在上面的 Cognito Identity Pool 一节中，我们实现了 Authing User ID 与 Cognito Identity ID 的一一对应的关系，这样 Authing 就具备了使用所有 aws 相关资源的能力，开发者可以参考我们前面给的示例。 "
    }, {
    "id": 16,
    "url": "http://localhost:4000/blog/%E4%B8%87%E7%BB%B4%E7%BD%91%E4%B9%8B%E7%88%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%BB%E6%9D%83%E9%9D%A9%E5%91%BD/",
    "title": "Web 全栈大会：万维网之父的数据主权革命",
    "body": "2019/11/20 - Web 给予了每个人建立自己博客和网站的自由，每个人都可以在自己的网站或其他人的网站内分享他们的知识、见解和故事。Web 就相当于一个人的精神世界，Web 是从生活中来的，但是却高于生活。 Web 全栈大会：万维网之父的数据主权革命大家好，今天我和大家分享一下由万维网之父发起的一场数据主权革命。什么叫数据主权？很容易理解，现在我们的数据是把持在巨头手里的，你的微信通讯录和聊天记录都无法导出，不管是从人权角度还是从法理角度，这些数据应该都是属于你的，但是你没有控制权，SoLiD 要做的核心的一件事就是让这些数据归于用户控制。它带来了一种全新的开发范式，这个范式是啥我们接下来会有介绍。那么什么是革命？革谁的命？也非常清晰，就是革那些体大不尊的巨头的命。  本文整理自蒸汽记忆创始人谢扬在 2019 年 11 月 16 日在成都 Web 全栈大会上的演讲，内容有删改。完整PPT 可从 Github 上查看：https://leinue. github. io/webfullstack-2019/index. html 那么在开始之前呢，我先按照惯例自我介绍下。我目前在创业，我们公司的名字叫做蒸汽记忆，取自工业革命的开始，我们想做提高社会的生产力的事情，并将全球的公开信息变成知识图谱。我们的使命是在一个身份下互联全人类的文化基因，构建全球互联的生产力平台。同时，我是 SoLiD 中文网的发起人，SoLiD 就是今天要讲的主题。在职业经历上，我是一名 Web 全栈开发者，其次也是知识图谱研究者。在创业之前，我曾经任职好东西传送门的 CTO，当时主要负责知识推荐和舆情分析等工作。在字节跳动时主要负责一款日活过亿的 Serverless 产品的研发和产品设计工作。 最后，我还是一名共产主义者。 那么下面，我们就开始进入 SoLiD 和数据主权革命的主题了。 在正式介绍 SoLiD 之前，我先介绍下 SoLiD 的发起人，万维网之父 Tim。他最大的贡献是制定了 HTML 语言和建立了 W3C 万维网联盟。这里我也推荐大家看一本书来更好的理解万维网之父建立 Web 的一个初衷，这本书的名字叫：《编织万维网 —— 万维网之父谈万维网的原初构想》。这本书呢，就介绍了万维网是怎么从一个实验室项目推广到全世界的。为什么我们现在要看这本书？因为现在就是一个巨头垄断的时代，万维网和互联网已经偏离了原本的设计，我们要回顾这些创作者的初心是啥，同时我们年轻一代的人也要从中发现新的机会。另外今年是互联网的五十周年，也是万维网的三十周年，那么再过三十年和五十年，互联网会变成什么样？这值得每个人去思考，尤其是开发者，互联网的建造者，命运是在你们手中的。Tim 对我们整个互联网的发展有着举重若轻的作用，假如没有 Tim，那么就现在的 Web，那么今天的大会也就没有了。 好，这是对 Tim 的一个介绍。 这句话是 2012 年伦敦奥运会的时候 Tim 发的一个 Twitter，This is for Everyone。这个意思呢，就是说，Web 作为一个有统一规范的生态，是对每个人都开放的，每个人都能从中平等的获取信息，这也是 Web 被创建的一个初衷。 那么再看这张图，主要就是现在的互联网巨头们。大家可以看到图片中间是一个人，在聚光灯下，无论是 Youtube 还是 Googkle 都在围着他转，上面还有摄像头，这个人的所有信息都在这些互联网巨头手里一览无余。这就是我们目前 Web 的一个现状 —— 巨头控制几乎所有的东西。 那么 SoLiD，今天我们这场分享的主角，就是用来重塑现有的互联网的一个有力工具。用 SoLiD，我们将重构人与数据和人与应用之间的关系。这个理解起来很简单，我们现在所有的应用和数据都是一种耦合关系，Google 有 Google 的数据库，Facebook 有 Facebook 的数据库，那么在 SoLiD 的设计中，Google 或者 Facebook 应用本身和数据应该是分离的关系，Google 可以读取 Facebook 的数据库，Facebook 也可以读取 Google 的数据库，而所有这些数据，都是由用户去控制，去授权的。有了 SoLiD，我们的 Web 会有一个新面貌出现。 首先我们来回顾下 Web 的原初构想。这里我想举一个我自己的例子，我在小学三年级第一次拥有了自己的电脑，相比周围的朋友同学是比较晚的，那么在这个时候我还是处于一种打游戏的阶段，电脑只是我的一个玩具。到了初中的时候，也就是 08 年 09 年，此时我发现了编程这件事情，让我非常的着迷。我从来没有攒过计算机硬件设备，我做的第一件比较专业的和计算机相关的事情是破解了家里的 ADSL，然后用 Discuz 搭建了一个网站。我记得我那个时候特别喜欢上微机课，每到微机课的时候，我都会在学校的电脑教室里打开我的网站，这个网站是一个 IP，然后向同学炫耀：「快看，这是我做的网站，这个服务器还是我家里的电脑！」此后，我还搭建了我的个人博客，从 09 年一直写博客到 19 年，整整十年。到了我高中的时候，也就是 12 年 13 年的时候，移动互联网开始逐渐的火热起来，此时很多事情就变得越来越奇怪了，大家开始讲流量生意，讲用户数据变现，互联网让我越来越陌生了。讲这么一个故事想说的是，Web 是一个非常公平的平台，连一个初中生都能在此基础上进行各种创新，这得益于统一的 W3C 标准和繁荣的生态。这非常符合 Web 在诞生之日就有的一个定位。 在十年前，是一个个人站长的黄金年代。我们当时做个人博客，个人博客里面链接了其他更多的个人博客，每个人都可以在不同的网站里面发表不同的评论，每个人都不需要作出任何妥协就可以发表自己的声音。Web 最重要的一个发明，超链接技术，现在已经被各大 APP 进行了无限度的分割。这里我一定要吐槽一下微信公众号不能插入超链接，腾讯这种吃相难看的绥靖政策，严重背离了 Web 的初衷，他们不是历史的推手，而是历史的倒退者。 Web 给予了每个人建立自己博客和网站的自由，每个人都可以在自己的网站或其他人的网站内分享他们的知识、见解和故事。Web 就相当于一个人的精神世界，Web 是从生活中来的，但是却高于生活。 而那些更好的帮助人与人之间进行连接的企业，也获得了很大成功，比如 flickr，last. fm 等。 正因为 Web 的自由性和无门槛，才促进了全球的创新。每个人都可以通过 Web 将自己的伟大想法告诉全世界。而开发者开发 Web 应用不需要得到任何人的许可，可以随时随地发布自己的创意。在这里，我还要吐槽微信小程序，微信小程序有两个非常大的缺点，一是严格的审核，这点我们都理解它最本质的原因。这种严格的审核，阻碍了大量优质的个人开发者上线优质的应用；二是其自创的语法，已经偏离 W3C 体系，他造了另外一个平行世界，加重了世界的熵。 小程序把本来一种开放的生态，变成了一种围墙，这是历史的倒退。 Web 的无门槛进入带来了大量创新，比如亚马逊、Twitter 等，这些大家都很清楚了。 诚然，这些大型企业给予了普通用户非常多的便利，但是我们的数据却都掌握在巨头手中。以前很多人写博客，现在很多人只写微博、发朋友圈。不错，我们拥有了很好的用户体验，但是我们丧失了对数据的控制权。我举个例子来说明我们为什么需要数据的控制权，假如你有一个知乎账号，有几十万粉丝，某一天因为某些事情被知乎封掉了账号，此时你所有的粉丝关系都因为知乎的单方面封禁而丢失了，粉丝其实是你生产的数据，但是却不被你掌控。最好的处理方式是，知乎只是被我授权了我的粉丝关系的一个应用，他封禁的只是我对他平台的使用权，但是我的粉丝关系其实还存在我这边，我还可以授权给微博、微信等。说到粉丝关系，就会有另外一个概念，粉丝是为了什么？是为了推送，因此 SoLiD 也有一个 websocket 推送规范，这些推送可以推送给你的好友列表，不依赖任何应用程序。 另外一个问题就是隐私泄漏问题，2018 年 Facebook 剑桥分析事件泄漏了 5000 万用户数据，最近 Facebook 又泄漏了 7000 页的用户数据使用条款，该条款说明了 Facebook 如何挟持用户数据杀死竞争对手。在今年年初，杭州一家爬虫公司被封，该爬虫公司爬取了中国八亿人的简历，每年获利上亿。我自己也有亲身经历，最近有猎头找到我，我问她怎么找到我的，她说在某网站上看到我的简历，但是我从未用过那个网站。 尤其是各种各样的小程序，我们认为这严重损害了 Web 的通用性，主要在于他们在商业载体下的封闭性。 大家也可以看看这张图，图里面各大社交公司筑起了自己的高墙，在不同的社交网络中切换时极其复杂。而上面西装革履的大公司资本力量，淡然的看着这一切，这就是我们 Web 的现状。 在这样一个巨头把持数据的中心化时代，严重伤害了多元性、创新性和选择性。 这里我想问大家一个问题，如果你只能创建一个应用，那么你会选择做 weixin. com 还是 identity-provider. org? 我猜大多数人会选择做 weixin. com，这里面理由非常多，更大，更全，普通用户更容易感知等。如果是我，我会选择做 identity-provider. org，这是一种范式的转变，变成了以用户身份为中心，然后围绕用户身份做一系列的创新。身份是一个非常复杂的事情，做得好很不容易。 我拒绝开发小程序应用，因为他太封闭了。 下面我们来详细讲一下基于 SoLiD 的开发范式转变以及 SoLiD 如何重塑互联网用户和互联网数据之间的关系。 SoLiD 的核心可以归纳为三点，第一点：你拥有你的数据。你可以自由决定你的数据存储到哪里以及怎么导出。这些数据，不限于你的通讯录，你的日程表，你的聊天数据，你喜欢的文章，你点赞的评论等等。这些数据都是归你所有的。你会有一个叫做 Pod 的东西，你可以将其理解为一种可编程的网盘，所有的应用程序读写都会在你的网盘里进行。在 A 应用中存储的数据，B 应用也可以访问，你不需要手动同步，因为这些数据会永远跟着你。 那么第二点，就是你控制你的数据。你可以决定你的数据有哪些服务商可以读写，以及什么时候不能读写。可以把这点理解成支付宝或者微信支付的免密支付。你可以授权滴滴打车之后自动扣款，你也可以将自动扣款能取消，你就将数据看成你的个人财产就好。 第三个就是使用 SoLiD 登录，也就是用户在 SoLiD 生态中唯一的身份。通过这个身份，你可以直接登录任意支持 SoLiD 的应用，并且可以将这个账号背后的数据授权给任何你想授权的应用。 以上三点就是 SoLiD 的核心价值。 如果要更好的理解 SoLiD，还需要理解四个核心概念。 我们知道，SoLiD 的英文全称是 Social Linked Data，所以我们需要理解什么是 Social，为什么 SoLiD 会有社交的想法？以及什么是 Linked Data，为什么数据需要互联？ 那么理解 SoLiD 之前，我们先理解下什么是 PoD，PoD 的全称是 Personal Online Data，也就是个人在线数据的意思，在 SoLiD 中就是存储数据的地方，你可以将 PoD 理解为一个个人网盘。 那么这个个人网盘可以存储任何东西，结构化的，非结构化的，都可以存储。什么叫结构化的，比如，我喜欢的文章，我点赞的朋友圈，我的好友关系，这些都是结构化的。那么非结构化的，就是我的图片、我的笔记等等。 所有应用的数据读写，都是在每个用户的 PoD 中进行，同时每个人都有一个 WebID，这个 WebID 后面关联着你的所有数据。 WebID 也是一个规范，这里就不展开了，展开的话就没完没了，大家可以简单把他理解为一个唯一性 ID。 那么第二个需要理解的，就是本体。前面我也简单的介绍了一下。这里我再稍微提一点。大家看上面的图，首先看我们这个蝙蝠侠，他有头罩，有披风，还有腰带、鞋子等等。那么这些名词，都叫做本体，本体定义了头罩只能叫头罩，而不能叫帽子。再看海绵宝宝，他有皮肤，有眼珠有裤子有斑点，大家还可以看到斑点在皮肤上，那么在这种关系也叫做本体。除了在这种关系，还有像拥有啦，上面啦等等。最右边的呢，是达尔文 core，他是一个植物的本体，植物的本体是有限的一个集合，所以很多人拿它来做研究。 第三个，就是 SoLiD 全称中的 Social 的含义。我们都知道，微信的用户是没有办法和 QQ 的通讯录统一的，你需要重复添加，那么 SoLiD 就定义了一种开放的社交关系图谱，叫做 FOAF，全称是 Friend of a friend，也就是朋友的朋友。比如我认识 A，A 认识 B，那么我就有可能会认识 B。这也是一种三元组的关系集合。大家经常用的企查查其实就是一种 FOAF。SoLiD 是一个以用户和个体为中心的一个生态，所以其必不可少的描述了一种社交关系。FOAF 也是 W3C 的一个标准，他描述了社交关系里的所有本体，SoLiD 直接拿来用了。 了解完社交之后，我们再看最后一个点，Linked Data。大家这么来看 Linked Data 就很好理解。刚才说的 FOAF 是用来描述人的，那么人背后需要的数据，就是通过 Linked Data 来描述的。Linked Data 是语义网技术的一个集合，所谓 RDF、OWL 等一系列变体。 SoLiD 带来的东西除了刚才讲的核心价值之外，还有有开发范式的变化。在以前，我们开发一个应用需要自己搭数据库，运维服务器，然后做用户系统，再将用户 ID 与数据关联。有了 SoLiD 之后，这些全都不用做了，SoLiD 会变成互联网上缺失的身份层和数据传输存储层。 首先第一点，就是数据存储方式的变化。大家可以看到右边的这张图，这张图是假设一个人在阅读一篇文章，那么在阅读这篇文章的时候，这篇文章的标题、作者、头像以及内容，不是从一个中心化服务器中读取的，而是从这个作者的 PoD 中读取的。同时，当我喜欢这篇文章，并且点了个赞的时候，这个点赞的记录是存在我自己的 POD 里面的，这就是与传统软件开发最根本的区别。 讲完数据写入之后，我们来看一下数据读取。还是看这张图，左边是 Facebook、Linkedin 这种数据和应用紧耦合的关系，右边是 SoLiD 架构下的结构图，大家可以清晰的看到，不管是图片管理软件，还是社交应用的 feed 流，还是日程管理软件，都是从用户自己的 PoD 中去读取的。 这就是 SoLiD 带来的，数据读取和写入的这样一个变化。 那么最后一个范式的变化就是创新者入局的变化。因为 SoLiD 带来的数据确权，使数据可以重复利用，在 A 应用上生产的数据，在 B 应用上也可以使用，应用间可以无缝互联，这让数据不再是创新壁垒，壁垒在于谁能够提供更好的服务以及谁能够取得用户的信任。 任何一家初创公司都可以快速重复利用现有非隐私数据时，我相信市场的创新活力会有更大的激发。 SoLiD 给我们带来的，不仅是一个开源软件，也不仅仅是一个在此开源软件上进行商业化的公司，而是一个通用的生态，生态里的应用都遵循着同样的范式。同时也是一场革命，这场革命不仅带来了全新的应用开发范式，还将从根本上解决用户数据的所有权问题。 搭建 SoLiD 的服务器非常容易，SoLiD 的服务器主要承担着 SoLiD Pod 的托管作用和一个 HTTP Server 的作用，此 HTTP Server 基于 RESTful 对外提供服务。大家可以把 SoLiD 服务器想象成一个能聚合全球计算能力的 Linux 计算机，这台计算机的计算能力由浏览器承担，数据库能力由整个 Web 承担，聚合查询的时候使用 SPARQL 或 GraphQL 进行查询。如果想要写入文件等非结构化数据，只需要使用符合 RESTful 规范的 POST、PUT、GET 等请求方式进行请求就可以执行创建文件夹、增加文件、删除文件、修改文件等操作。 同时 SoLiD 还有 WAC（Web Access Control） 这样一个控制权限的协议，可以进行粒度很细的权限分配操作，其控制的粒度和 Linux 一样细。 基于 SoLiD 的应用，不是说数据在硬件层面被用户所控制，而是从逻辑角度来看，是由用户控制的。这个意思就是说，SoLiD 服务器不是一定要放到用户自己家里，他可能还在云上，或者其他免费的社区版本。 下面再谈一谈 SoLiD 的设计原则，主要就是五个原则：Open、Transparent、Accountable、Sovereign 和 User Centric。SoLiD 是开源的，其不受任何政府、组织控制；SoLiD 整个研发流程是透明的，每个人都可以 Reivew 所有的 Pull Request 和代码；SoLiD 是负责任的，其平台设计的目的就是让用户拥有自己的数据，平台本身并不拥有；SoLiD 是为了主权所设计的，赋能用户的优先级永远是最高的；SoLiD 也是以用户为中心的，它的整个生态从开始设计时就是以隐私为核心。 聊完了 SoLiD 的一些基础后，我们再从开发者角度看看 SoLiD 整个项目的易用性。使用 SoLiD 开发后，应用从只有一个后端变成拥有多个后端。 在传统的中心化模型中，App 有一个后端，从一个后端中读取多个数据。但在 SoLiD 这种去中心化的模型中，应用 X 和应用 Y 从不同的 Data Pod 中读写数据，每一个 Pod 中都存着不同人的数据，同时 Pod 与 Pod 之间还可以做很多交互。 假如有很多 Pod，那么就会产生 Pod 的互操作性问题，比如如何在多个不同的 Pod 之间做联合查询。在传统的数据库模型中，可以用 Join 等关键词在不同的表中做联合查询，那么 Pod 之间的联合查询，也同样可以做到，只不过 Pod 之间的查询是基于网络的，而不是在内存中。 SoLiD 使用 JSON-LD 来对不同的数据片段进行互联。 JSON-LD 是一种简化的 RDF 表示语言，以下是 JSON-LD 和 Turtle 的区别： 可以看到，JSON-LD 比 Turtle 简单易懂的多。 以上就是 SoLiD 开发体验的介绍，总结下来就是一句话：「从学术化到工程化」。 聊完开发者体验，我们再来看一看数据民主之路的必然趋势。我们认为互联网是人类社会发展的一个缩影，数据民主是必由之路。我们先看人类社会的一个发展，从一开始的采集社会，人类产生了各个部族群落，此时相对于个人博客和网站的开垦期；再到农业革命，产生了帝国番邦，对应了如今美国的 FLAG、中国的 BATTMD；后来，人类发生了工业革命，这是一场影响深远的革命，不仅改善了人类的生活条件，还产生了一些其他政治上的影响。而如今，互联网的生产力还远远未得到释放，云计算、AI 和区块链都还处于一个很早期的阶段，如果到了某一天，AI 的机器智能大幅提高，能够辅助人类做决策之时，就是互联网数据主权革命将要开始的时候。因为那时，你的数据就是你的思想，就是你的生命，你自然是不想让任何人来控制你身体的某一部分。 最后，我们聊一聊 SoLiD 可能带来的几个大的商业机会。 第一个机会就是身份提供商，身份是一个从计算机存在以来就有的问题，大家可能觉得他被解决的很好了，其实没有被解决好。现在无论是互联网还是工业互联网，抑或是企业内部的环境，所有的身份实现都是不标准的，混乱的，这种混乱每年带来数百亿人民币的浪费。如果谁能推动身份标准化同时能有成熟的产品推向市场，这是一个巨大的机会。为什么要切中身份？因为在 SoLiD 里，所有事情都是围绕身份来的，只有身份这个基础设施做好了，才有后面的一切。 第二个机会是「个人数据管理平台」。那么什么是「个人数据管理平台」呢，这个也很容易理解，既然你的所有数据都存在 POD 中，那么肯定需要一个集中化的软件来做所有结构化数据和非结构化数据的管理和控制，这种软件的开发难度是非常大的，因为要兼容所有数据类型，你可以把他理解为更普适化的 Excel。这里我要介绍一类产品，我们叫他模块化生产力软件。模块化生产力软件最重要的一个特点是「用文档来表示所有信息」。说到文档，你们最先想到什么？是 Word 对吧。事实上，计算机文档的结构从上世纪 70 年代到现在都没有任何变化。但是世界上的所有其他软件都发生了变化，不管是手机还是电脑。 换句话说，模块化生产力软件将有可能颠覆 Office 的竞争格局。 另外一个就是为什么我们要用文档来表示所有信息，因为世界上所有的软件内部的信息组成都是文档。人类历史的开端就是人类学会了在石头上写文档。计算机出现后，人类进入了电子文档时代，这让知识开始在全球范围内快速传播。即使是微信的聊天框、微博的 feed 流，或者是抖音的视频，都是文档的一种表现形式。 另外一个关键词是「模块化」，为什么要叫他模块化呢？这里我要引入一个新概念，叫做「文档即应用」，就是你所写的文档，将会变成一个可执行的应用，你可以任意修改任何应用的任意信息和界面布局。 那么当这类软件成熟起来之后，将可以用来管理 SoLiD 里面所有的个人数据。目前这类软件我最看好的是 coda. io coda. io。他为什么好？我也举个简单的例子，大家都知道 Excel 严格意义上来讲可以做任何事情，那么为什么还会有 odoo 这类 erp 软件或者 salesforce 这类 crm 软件出来呢？很简单，因为企业的业务流程，用 excel 很难实现一个用户体验良好的自动化，这类软件的意义就在于将流程自动化出来。但是他们本身的数据控制没有 excel 那么自由。coda，就是将 excel 对数据的控制自由和业务流程的自定义自由很好的结合了起来。 我写过一篇文章，叫 「文档将重塑全球生产力」，在微信公众号和搜狗上都能搜到，这篇文章有更多关于模块化生产力软件的介绍，大家有兴趣的话可以搜索看一看。 那么最后一个，就是「以身份为中心的计算平台」。怎么理解呢？就是做一个操作系统，但是这个操作系统不再以管理计算机资源为中心，而是以用户和服务为中心。 可以简单理解为在这个操作系统内有一个 ID，然后可以登录操作系统内 App Store 的所有应用程序，同时这些应用程序之间的数据都是可以互联的，这时候才会产生真正的个人助理，这才是真正的互联网。 做这么一个计算平台本身，难度不大。真正的难度在于如何推广出去。首先，我们都十分确定这绝对是未来的一个发展趋势，那么是现在做还是将来做？是我们做还是其他人做，这是非常值得思考的一个问题。 我们能想到的一些 Marketing 策略就是首先针对三大运营商的高端人群，同时对隐私十分关注的一群人，卖下一代黑莓手机，这些资源是我们目前能接触到的资源。有了这种下一代黑莓手机，那么无论是像 maskbook 这种应用还是其他的区块链类隐私应用，才有推向市场的可能性。  本文整理自蒸汽记忆创始人谢扬在 2019 年 11 月 16 日在成都 Web 全栈大会上的演讲，内容有删改。完整 PPT 可从 Github 上查看：https://leinue. github. io/webfullstack-2019/index. html "
    }, {
    "id": 17,
    "url": "http://localhost:4000/blog/%E8%BA%AB%E4%BB%BD%E4%B8%8A%E4%BA%91-or-%E8%87%AA%E5%BB%BA-%E8%BF%99%E9%87%8C%E6%9C%89-20-%E4%B8%AA%E9%97%AE%E9%A2%98%E5%80%BC%E5%BE%97%E4%BD%A0%E6%80%9D%E8%80%83/",
    "title": "身份上云 or 自建？这里有 20 个问题值得你思考",
    "body": "2019/10/27 - 身份管理自从计算机问世以来就存在，很多人觉得身份管理很简单，其实难度远超你的想象。 一、为什么要自建身份管理？: 自计算机问世以来，身份管理一直是软件的主要组成部分：打孔机和早期操作系统都受到用户名/密码身份验认证的保护。拥有如此悠久的历史，你会认为身份管理是一个已经被妥善解决的问题。 自建身份管理一般在以下场景有充足的理由：  你正在做一些简单的事情：没有敏感信息或隐私问题，并且你的安全性要求不高，你的用户数量不多，同时用户类型比较单一，只有几个应用程序； 你是一位经验丰富的开发人员，并且在顶尖团队中工作，多年来一直为应用程序，网站，API 和服务构建身份认证； 某天你的预算减少了，这时你必须选择一些方案来为组织的大战略省钱；坦白说，如果你只有一个简单的 Web 应用，只需要一两个社交应用提供一键登录，并且不需要「用户名 - 密码」或其他更细致的用来登录的功能，那么自建就很容易。你可以在 Github 上找到大量开源框架来解决此类问题。 二、为什么要购买身份管理服务？: 我们经常听到客户的研发团队这么评价 Authing：  我们自己就能做，为什么要用你们的，而且还要付钱？ 接下来让我们深入研究这个问题。 1、专业的人做专业的事: 实现一套身份管理看上去似乎很简单。但是失败是很可怕的，一旦出现了问题，你的品牌就会受到严重损害。面对持续的黑客攻击，和无休止的漏洞，你是否能准确知道自己的工作足够好到可以保护用户隐私和企业资产？ 2、投入产出比: 自建身份管理并不是免费的！将资源到投入身份管理研发时会产生高昂的的机会成本。身份认证真的是你想要做的吗？假如你做一款应用，会自己写一套 RDBMS(关系数据库管理系统) 吗？身份管理就像 RDBMS，当你可以花合理的钱将非核心的繁重工作委派给专业人士时，为什么还要自建身份管理等基础设施呢？身份泄漏产生的成本可能高达数百万美元，你能否认身份安全没有价值吗？在评估购买身份管理服务的投资回报率时，请考虑这些因素。 3、复杂性: 你的产品在前期肯定是简单的，但是，一旦你的产品成功推向市场，你开始需要支持更广泛的身份提供商。你可能还有合作伙伴，你可能还会推出移动 APP 和 API 让其他人调用，这样你的受众群体才能扩大。如果你在欧洲，你还会面临 GDPR 的监管（中国也即将出台相关法律）。这时身份管理开始变的复杂，维护自己的身份管理系统成本会比你预期要高的多。 4、测验: 上面的几个问题可能已经引发了你的思考。有些你可能不在意，有些你可能在工作中已经遇到。但是，我们邀请你根据目前的状态和未来几个月或几年的发展方向回答以下 20 个问题并切实考虑它们。 1）用户相关的问题:  你是否考虑过如何实现「用户管理」？是自助管理还是集中管理？用户体验会是什么样？ 你有用户使用多个「身份提供商」登录你的应用吗？你如何判定他们是一个人？ 你是否有多个服务或软件需要认证？如果有，他们使用了同一个技术栈还是多个技术栈？（不同的技术栈会加大研发成本） 你是否需要统计信息来查看用户的增长情况、设备情况、IP 地理位置和认证情况？如果需要，你计划如何收集、分析和可视化这些数据？ 你如何记录并解决用户身份认证过程中出现的异常事件（忘记密码、无法登录、认证失败、过期等）？2）应用服务相关的问题:  你如何在漏洞被曝出之前及时发现漏洞？发现漏洞后如何通过补丁快速修复漏洞？ 你如何处理在不同「身份提供商」之间认证时产生的「标准不兼容」问题？当这些身份提供商之间都使用了不同的技术栈之后，你将作何处理？ 你的 DevOps 团队能否在开发身份认证基础设施上保持专业、领先地位和最佳实践？ 你有 MFA（多因素认证）策略吗？你打算怎么跨平台的实现 MFA？你是否希望你的用户能在 iOS 或 Android 设备上使用 FaceID 或指纹来进行身份认证？ 你是否考虑过用户存储的可伸缩性、性能、查询和可用性要求？在流量过大的情况下你如何保证登录系统的 99. 999% 可用？3）身份提供商（IDP）相关的问题:  你在迁移老应用进更现代的身份管理系统时，如何让用户不重置密码无缝迁移？ 你的一个 B2B 客户需要 SSO，你可以在内网中或防火墙后面与 Active Directory 做联合认证吗？ 不同的 SAML IdP 有多种格式存储和传递声明 —— 你是否有一种简单的方法让声明完全自定义化？ OpenID Connect 是流行的身份认证新标准：基于 REST / JSON 和 OAuth 2. 0。但是其魔鬼般的实施细节，你计划如何在不同的后端语言和客户端之间实现它？4）安全与合规问题:  身份系统是黑客攻击的首要目标。你是否考虑过实施暴力保护？比如 API 网关上的 DDoS 预防和缓解？ 你是否打算让第三方安全顾问来进行独立的渗透测试，代码审查和体系结构审查以验证安全性和最佳实践？ 在身份实施过程中产生的安全漏洞报告你计划如何解决？ 你是否需要上下文逐步身份认证（Contextual Step-up Authentication）？例如 IP 白名单或 Active Directory 成员身份？你是否需要多种密码加密算法？无密码身份认证对你的用户是否有效或存在意义？5）时间与成本问题:  你需要雇佣多少人，包括 IT，研发人员和外包服务（例如咨询专业知识）？这些人很难找到，雇用起来也很昂贵。你将从何处获得这些人才，费用是多少？ 你预计的上线日期是什么时候？你的 IAM 解决方案需要多少时间和多少次迭代？ Forrester Consulting 的研究报告指出，使用身份管理服务可以产生 548％ 的投资回报率和 370 万美元的费用节省。 使用 Authing 可以一劳永逸的解决上述 20 个问题，任何想做计算机软件的企业或个人，只需要接入 Authing 的云服务，就可以以极低的成本，快速解决那些需要耗费数百万元人民币才能解决的问题。身份的复杂性和混乱性，造成了每年数十亿的浪费，因为其表面的简单，导致了缺乏系统的标准，每家厂商都会自己搞一套自己的标准，这些混乱的标准既养活了一群人，也加重了这群人的开发负担。 身份这件事，听上去是老故事，看上去很简单，但其从未得到很好的解决，这就是 Authing 存在的意义。 "
    }, {
    "id": 18,
    "url": "http://localhost:4000/blog/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%89%80%E6%9C%89%E8%BD%AF%E4%BB%B6%E9%83%BD%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E6%9D%A5%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7/",
    "title": "为什么所有软件都应该使用单点登录来管理用户？",
    "body": "2019/10/25 - 单点登录（Single Sign On），简称为 SSO，是目前比较流行的企业业务整合的解决方案之一。SSO 的定义是在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统。 一、什么是单点登录？: &lt;div align=center&gt; &lt;/div&gt;单点登录（Single Sign On），简称为 SSO，是目前比较流行的企业业务整合的解决方案之一。SSO 的定义是在多个应用系统中，用户只需要登录一次就可以访问所有相互信任的应用系统。 二、使用 SSO 带来的「业务优势」: 1）提高用户的效率: 用户不再被多次登录困扰，也不需要记住多个 ID 和密码。另外，用户忘记密码并求助于支持人员的情况也会减少。 2）提高开发人员的效率: SSO 为开发人员提供了一个通用的身份验证框架。实际上，如果 SSO 机制是独立的，那么开发人员就完全不需要为身份验证操心。他们可以假设，只要对应用程序的请求附带一个用户名，身份验证就已经完成了。 3）简化管理: 如果应用程序加入了单点登录协议，管理用户帐号的负担就会减轻。简化的程度取决于应用程序，因为 SSO 只处理身份验证。所以，应用程序可能仍然需要设置用户的属性（比如访问特权）。 这些都属于业务上的优势，除了业务上的优势外，还有软件架构层面的优势。 三、使用 SSO 带来的「软件架构层面的优势」: 1）向下兼容: 单点登录是一种比普通的账号密码登录更加规范化的解决方案，如果有一天你的业务扩大，想要聚合所有平台的用户，那么提前用上了单点登录的你会使整个过程变得非常容易。有太多前期的用户系统做的很不规范，系统壮大后需要投入大量人力物力来进行迁移的案例出现。造成软件前期不使用单点登录的主要原因是单点登录的复杂性，如果单点登录的复杂性和实施成本能被降低，那么我相信很多人都愿意直接使用。 再类比一下，使用单点登录对你的系统向下兼容就好像 C++ 可以兼容 C 语言一样，你在用 C++ 时，使用面向对象编程的同时，不会耽误你面向过程编程。相反，如果你使用了 C 语言，在理论上你当然也可以面向对象编程，只不过过程过于复杂，异常痛苦，甚至不符合 C 语言的设计思想。为什么要将不合适的东西强行扭成合适的呢？这就是单点登录相较于普通登录方式最本质的区别。 教科书为了让你快速上手，所以选择 C 语言开始；PHP 为了让你快速上手，选择让你学习最简单的单向「用户名 - 密码」登录开始。但是我们都知道，软件最好从一开始就使用面向对象编程，那么任何的互联网应用，从一开始就使用「单点登录」也是同样的道理。 &lt;div align=center&gt; &lt;/div&gt; 2）简化迁移迁出流程: 假设你的软件从一开始就没有考虑过使用单点登录，那么当你的业务拓展成功并且有多个平台后，多平台用户的 Merge 就会变成很大的一个难点，比如如何确定注册到 A 平台的邮箱和 B 平台的邮箱是同一个、用户的密码如何重置、如何确定 Merge 完成后的用户信息没有任何损失等等。 如果你从一开始就使用了单点登录，那么这些问题都将不复存在。将用户从平台中迁移出来将像导出 Excel 到 CSV 一样简单。 &lt;div align=center&gt; &lt;/div&gt; 3）强化管理和安全流程: 进行身份认证的目的是为了授权用户可访问哪些资源，单点登录都有十分规范化的权限授权系统，RBAC 是业内比较认可的授权管理方案。单点登录系统一般都自带开发者友好和组织友好的 RBAC 方案，可以让开发者快速实现中心化授权体系。 除此之外，用户的历史活动为判定可信度提供了丰富的分析素材。系统可以通过挖掘用户的历史操作构建其行为基线，然后通过比较当前操作和其行为基线来计算用户的信任评分。 通过比较当前用户的地理位置坐标可以发现是否有异常，比如一个用户的设备在一个较小的时间窗口内突然出现在某个用户不可能达到的坐标；再比如用户有多个设备，但其报告了不一样的地理位置。但是必须注意，地理位置是存在偏差的，所以地理位置的权重不应该过高，而是作为一种参考。 成熟的单点登录系统都会提供这些功能，除此之外还有可定制的加密算法、用户密码泄漏检测等多维化功能，保障整个系统的管理安全和流程安全。 &lt;div align=center&gt; &lt;/div&gt; 四、如何低成本的实现单点登录 ？: 前面我们讲了为什么所有软件都应该使用单点登录来管理用户，那么如何最低成本的实现单点登录呢？这里就要介绍下 Authing 了。 Authing 是一款身份认证云，提供了开发者优先和极易拓展的开发平台，简化了身份管理的流程，使用 Authing 可以用极短的时间和极低的成本实现单点登录（用户量数十万的应用从迁移进 Authing 到上线到生产环境只需要两天），如果你对此感兴趣，可以查看这篇文章：用 Authing 10 分钟实现单点登录。 最后，希望这篇文章能对你的下一次软件开发有帮助～ "
    }, {
    "id": 19,
    "url": "http://localhost:4000/blog/%E5%B0%86%E5%86%85%E5%AE%B9%E7%9C%8B%E4%BD%9C%E6%96%B0%E7%9A%84%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BDCaaS/",
    "title": "将内容看作新的基础设施：Content as a Service",
    "body": "2019/10/15 - 内容是每家企业的必争之地，根据 CMI 的数据报告，88% 的 B2B 企业每天至少产生一篇内容。内容正在成为新的基础设施，Content as a Service 可以被简单理解为一种 CMS（Content Management Systen，内容管理系统），但是和传统的 CMS （如 Wordpress、Drupal 等）完全不同。传统 CMS 聚焦于内容管理和创建网站（比如 Wordpress 提供的大量网站模版），而 CaaS 只聚焦于内容的生产，并以 API （应用程序编程接口）的形式向外提供服务，这些 API 可被二次编程，从而用于打印机、移动应用或者其他设备上。 在这篇文章中，你将了解到什么是 CaaS 以及为什么内容是一种新的基础设施。在你想要使用 CaaS 时，本文可作为对比 CMS 和 CaaS 优劣的参考文章。我们还会罗列一些 CaaS 的使用场景，帮助你更好的了解 CaaS。 内容是新的基础设施: 互联网上的所有应用都是信息管理软件，这些软件在本质上是由一张张互相联系的表组成的（如果你不理解这句话，那么你可以将一个网站想象成三张 Excel 表，一张表存储网站用户，一张表存储网站内容，还有一张表存储网站分类）。当你使用一个传统 CMS 时，你可以创建一些分类，并在分类上面撰写文章，这样的操作在网站时代是比较友好的，因为每个用户都只有一个平台 —— 那就是浏览器，这种方式在浏览器上分发非常容易。 进入移动时代后就不一样了，一家公司至少拥有三个平台（Web、iOS、Android），针对这些平台，每家企业都需要定制自己的 CMS，他们可能是在 Wordpress 上做深度定制，也可能是自己开发。做的多了之后，大家会发现，每家公司都在做同样的事情 —— 写管理界面、建表、写 API，这些界面可能是与公司业务高度结合的，比如头条 APP 的后台与微信公众号的后台肯定是不一样的。但细细研究却会发现，其本质就是五个事情：增删改查和联表。 于是有人做了一种名为「Headless CMS」的平台出来，这种平台可以在线设计表和表的字段（和 想象下 Excel 的建表，写字段，但是用起来要比 Excel 简单很多），然后系统会根据设计好的表和字段自动生成立马可以使用的 API，这些 API 符合一种名为 RESTful 的规范，这种规范是开发者们共同遵守的一种规范，只要看到这个规范，开发者就知道该如何使用这些 API。知道如何使用之后，开发者就可以将这些内容用于实际的应用中（也就是展示给终端用户看），可能是抖音，也可能是微博（这些本质上都是信息管理软件）。 这么做带来的好处是，假如一款产品上线后，产品经理想要新上一个「用户反馈功能」，在没有 Headless CMS 的时候需要开发者在数据库中建一个新的表，然后用一上午的时间调通 API 和图片上传功能，最后再做个界面。有了 Headless CMS 之后就不得了了，产品经理想要用户反馈什么内容直接在后台建好字段，然后 API 就自动生成了，开发者省去了建表、建字段、调 API 的时间，直接进入界面开发了。如果产品经理想修改需求，自己就能直接改，这样不但大幅提升了工作效率，还减少了很多产品经理与程序员之间由于需求变更带来的巨大摩擦，因此世界更加美好了。 这类 Headless CMS 正在开发者圈子中流行开来，开发者开始主动将这类软件用于公司业务中。Headless CMS 翻译成中文就是无头 CMS，简单来说就是不管界面生成的 CMS，他使用了一种名为「RESTful API」的规范对外提供服务，开发者根据这套规范可以做任何应用。 一旦标准化，就会变成基础设施，内容正在这条路上。 什么是 CaaS: CaaS 是内容基础设施的云上版本，他提供云上的 Headless CMS，并提供公网可用的 API 让开发者可以直接使用，开发者省去了部署运维的精力开销。除此之外，其还有 Headless CMS 不具备的高性能高可用优势。大部分 Headless CMS 是开源的，只能处理百万级别的数据，对于千万或亿级的数据，仍需要做不少优化工作，而 CaaS 将这些也省去了，这就是云计算的好处，标准化一切可以标准化的东西。 企业对于 CaaS 的担忧主要还是安全和隐私问题，也就是大家经常听到的对云计算的质疑 —— 「凭什么我把数据、代码和业务给你还要给你钱」。 对于中国的企业来说可能还有合规问题。如果在中国做 CaaS，必须投入大量资金和人力到内容审查上。 如果一个 CaaS 能做到垄断做成寡头，那么未来的一个最大的可能就是开放版的微信公众号。通过其 CaaS 平台分发出去的内容不仅有社会大众的娱乐内容，还有很多专业知识，而所有这些内容都是开放可检索的 —— 如果说中国互联网最大的遗憾是什么，那就是大量优质内容无法通过搜索引擎检索，中国只是个互闭网。 CaaS 相比 CMS 的优势: CaaS 相比 CMS 有非常多的优势。  结构化的内容。CaaS 可以让内容管理者从「管理页面」的思维转向「管理内容」，这将让我们互联网上的内容变得更加专业和优质。 代码结构优化。传统 CMS 的内容和界面都是耦合十分严重的，像 Wordpress 使用了非常多的自定义指令去表示网页内的信息，从开发者的角度来说，这点是无法忍受的。CaaS 允许内容代码和界面彻底分离，这对开发效率来说会有更大幅的提升，并且符合现代开发框架。 内容和展示分离。传统 CMS 由于其界面布局等原因会制约内容的发展，有了 CaaS 之后作者只用关心内容而不必关心界面设计，只需要生产优质内容。 云原生应用。CaaS 是一种云原生应用，也是 SaaS 的一种，云服务提供商会为你安装、维护和做自动伸缩、性能优化等工作，你需要做的只是将内容迁移到 CaaS 和使用。 个性化。使用 CaaS 可以随心所欲的定义你想要的表和字段，并且有可以立即投入生产环境的接口使用。这在做一些 A/B 测时会非常有用，因为所有的修改都不需要改动底层的数据库或代码结构。CaaS 的使用场景: 总的来说，CaaS 的主要特性就是自由和灵活，以下是依据这些特性的典型使用场景（其实 CaaS 的应用场景非常广泛，几乎所有信息系统都可以用 CaaS 完成，以下只是抛砖引玉）：  多渠道分发。这里的多渠道分发主要是指分发到不同的内容平台上，可能是三端相同的应用，也可能是三端不同的应用。通过 CaaS 的开放 API 特性，作者只需要写一次，就可以重用这些内容，并分发给所有兼容了这些 API 的网站。 移动应用内容分发。很多移动应用都直接内嵌网页来展示内容，而 CaaS 的 API 允许移动应用在很方便的进行内容展示（传统的 CMS 没有结构化的 API 可用）。 移动应用后端。移动应用本质上也是信息管理软件，使用 CaaS 管理移动应用的业务逻辑是个不错的解决方案，CaaS 是个成熟的方案，比自己写要容易且稳定很多。 与身份认证云配套使用。使用身份认证云（如 Authing. cn）的用户往往有自定义字段和内容管理的需求，这些在业务层面的功能身份认证云是不提供的，那么 CaaS 便成为了拓展这些字段的一个良好补充。我们所知道的案例是，将 Authing. cn 配置进 Strapi(一款 CaaS 产品)，登录 Strapi 时使用 Authing 登录，然后携带 Authing 的 Token 访问 Strapi 的资源并进行授权认证。 个人博客。与传统 CMS 一样，CaaS 也可以作博客，不过需要创作者懂一些编程能力。如果懂编程，CaaS 是个更容易实现个人博客的方案。一个优秀 CaaS 应该具有的功能特性: 作者角度:  体验良好的编辑器。有类似石墨文档或 Notion 的文档编辑体验，让作者尽可能舒适的创作内容。 简单符合直觉的建表及字段配置。让内容创作者可以很容易管理、修改和与团队协作。开发者角度:  支持 CRUD 的自动生成并符合 RESTful 规范。 支持每个 API 逻辑的增加和修改。 开发者可以很方便的无限制的拓展 API 的业务逻辑。 支持拓展计算能力。 支持函数计算，让开发者可以无限制的拓展平台能力。 支持数据的授权以及标准认真协议（OAuth 2. 0 或 OIDC）。 能基于 RBAC 或 WAC 对数据进行细粒度授权，同时支持 OAuth 2. 0 或 OIDC 协议，能兼容各类身份提供商的登录认证，并能使用身份提供商的 Token 授权资源访问。 高可用高性能。 低时延，快速响应以及完善的日志记录和错误监控。如何开始使用 CaaS:  如果你是 JavaScript 开发者，我们建议到 Github 上搜索 Strapi 使用； 如果你是其他语言开发者，请到 Google 上搜索 Headless CMS 寻找你想要的语言使用； 如果你是非工程人员，请到 Google 上搜索 Content as a Service 找到最适合你的在线 CaaS 使用。"
    }, {
    "id": 20,
    "url": "http://localhost:4000/blog/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97%E5%9C%A8%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E4%BA%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/",
    "title": "函数计算在身份认证云中的应用场景",
    "body": "2019/08/16 - Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。 越来越多的企业接受身份认证上云后，Authing 也承接了越来越多「用户迁移」需求，在用户迁移的过程中，最重要的一点是「终端用户必须无感知」，而无感知主要有以下两点要求：  用户不需要修改密码； 完成切换后，用户的所有数据都能正常访问且具备相应的访问权限；在一个用户系统中，用户的密码通常情况下都会加密存储在数据库中，这个加密算法一般是不可逆的，同时可以由一个函数完成，因此将函数计算应用在身份认证云中就能满足第一个要求。 首先我们看一下什么是函数计算：  通过函数计算，您无需管理服务器等基础设施，只需编写代码并上传。函数计算会为您准备好计算资源，以弹性、可靠的方式运行您的代码，并提供日志查询、性能监控、报警等功能。借助于函数计算，您可以快速构建任何类型的应用和服务，无需管理和运维。而且，您只需要为代码实际运行所消耗的资源付费，代码未运行则不产生费用。阿里云 - 函数计算简单来说，函数计算让程序员不需要再管理服务器，只需要上传代码，后台的云就可以帮你自动按需分配资源，这将极大释放程序员的生产力。 函数计算非常适合解决身份认证云中自定义密码加密的问题，以下是应用了函数计算后，用户注册的流程图： 以下是用户登录的流程图： 以上流程图是一个简化版，只展示了几个比较核心的步骤。 从开发者的角度来说，我们希望开发者只需要上传一个 index. js 文件就可以自定义密码的加密方式。如果开发者需要引入第三方包，那么仅需要将引入的 node_modules 打包为 . zip 上传即可。上传完成后，Authing 会取得一个可通过 HTTP 调用的网址，此网址不会公布给任何第三方，同时每个网址都会有独特的验证方式，最大限度的保证安全。 在 Authing 控制台中依次点击基础配置 -&gt; 密码管理即可自定义密码加密方法 其他场景除了自定义密码加密外，函数计算可以很好的和 Authing 配合，帮助开发者在后端十分容易的完成用户 Token 的验证。此外，在实际场景下，若开发者接受全部上云，完全可以基于 Authing + 函数计算完成所有业务流程：Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。 "
    }, {
    "id": 21,
    "url": "http://localhost:4000/blog/%E8%B5%B0%E8%BF%9B%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86/",
    "title": "走进身份管理",
    "body": "2019/06/09 - IAM/IDaaS（身份访问管理/身份认证即服务），通常代表一个服务或平台，该平台可通过用户角色或权限控制，识别个体身份，进而控制其对系统资源的访问，守护个体和组织的数据。 身份管理对于企业安全很重要，通过统一登录系统可显著提高企业效率，主要从以下两个层面：  用户不需要记忆和维护不同的用户名密码； 保护公司及其用户免受数据泄露风险；据一份 2015 年市场调研数据，数据泄露的造成的损失成本，平均为 3000 万元人民币。通过多因素身份认证、弱密码监测、大数据分析等安全技术，一个优秀的身份管理系统可以提供非常安全的的对这些资源的保护，同时还可以促进企业数据共享，提升企业效率。 身份管理解决方案可以为所有类型的企业带来显著价值。除此之外，还可以提供 B2B、B2C、B2E、IoT 不同场景下的特殊用例。  B2B：企业之间提供联合身份管理，例如允许企业使用其现有用户系统，无缝对接采购的第三方 SaaS 应用，对接供应链上下游的合作伙伴业务系统。 B2C：企业通过微信、微博、QQ、163、Github 等为消费者提供社交认证 （或其他更多第三方身份提供商）。 B2E：企业为其员工提供单点登录，简化管理，杜绝隐患； IoT：物联网设备之间的互联互通；数字环境的发展和变化异常迅速，个人智能手机和平板电脑无处不在，越来越多企业已经逐渐走向数字化和云计算。 随着数字化和云计算的进程，企业信息安全的维度和边界，越来越立体，越来越复杂，从时间上，也不再是 8 小时的，而是 7*24 全年 365 天不停止服务，同时也不再有物理地点的限制。企业的需求是在各种设备、平台、场景下保护身份安全的同时又要使数据易于共享。 过去几年，身份管理概念，如多因素身份验证（MFA），无密码和单一来源验证在解决现代分布式环境的身份管理问题时，已经走到了时代前沿。 多因素身份验证利用单独的身份验证阶段来提供两个（或更多）登录步骤。无密码可以使用 SMS、邮件验证码、指纹识别、人脸识别等生物识别技术来验证用户身份。  推动 IAM/IDaaS 普及的一个趋势是基于云的应用程序（SaaS）越来越多。 云服务提供商比如阿里云和 Amazon Web Services（AWS），利用远程服务器来对用户提供计算能力和存储能力。而 IAM/IDaaS 是使用 SaaS 的重要组成部分。 IAM/IDaaS 对受限资源的访问限制，提供了监测和保障安全的方法。 推动 IAM 进入市场的另一个关键需求是用户需要能够从任何地方、任何设备中访问应用程序。 随着个人计算的扩展，企业需要为他们的用户提供安全的访问能力，以便在所有不同的登录环境下确认用户身份，保证业务数据安全。从自主开发 到 IDaaS 满足你的需求所有使用场景:  你需要基于标准的解决方案来完成身份证，例如 OpenID Connect，SAML，WS-Federation 或 OAuth； 你的用户可以通过各种身份提供商（如：微信、QQ）进行身份认证，但缺少平台或完整的服务来整合他们这些身份账户间的关联； 你的应用程序分布在不同的域，并要求用户在每个域上的登录，彼此独立； 你需要让最优秀的开发人员构建核心业务应用程序，而不是花时间在构建和维护身份管理和身份认证上； 你的公司遇到过任何类型的数据泄露，或者您担心数据泄露。 你被要求实现一个行业标准认证，而你从未考虑过这些问题，或有这方面的经验。B2B:  你的合作伙伴要求使用他们的企业用户登录您的系统。 - 你需要除了支持用户名/密码选项外，还支持企业级联合登陆，以及许多其他类型的身份认证程序（如 Active Directory、LDAP、SAML）。你不愿意将用户管理委派给 IT 服务部门。B2C:  你的主要用户数据来源于直接询问用户的表单或调查。 能够轻松提取有关你的用户的第三方数据，将有助于您更好地了解你的客户，进而通过销售和有针对性的营销来增加收入。 如果你向消费者销售产品，你没有提供简单的一键登陆，来支持不同的社交身份注册，意味着客户的流失。 在用户数量增加时，你面临着性能问题。B2E:  你需要为员工管理不同的授权和访问级别。 当员工加入或离开你的组织时，你需要能够轻松配置和取消用户访问权限。购买一个身份管理解决方案的商业考虑有许多令人信服的理由，选择购买身份管理解决方案，无论 B2B，B2C 或 B2E 场景。 一些原因如下： 所有用户场景:  降低成本：实施第三方身份管理解决方案非常简单，启用强大功能就像部署一台交换机一样简单。 成百上千有价值的开发时间可以重新聚焦在业务逻辑编写而不是花费时间构建身份认证系统。 很多用于身份系统安全性的测试时间可以用在核心应用程序的开发工作。集成和映射不同的身份来源，非常耗时而且痛苦。 通过 IAM 解决方案，这些工作已经提前完成，并为流行的开发堆栈提供 SDK，进一步减少集成所需的额外编码。 公司的研发团队可以专注于配置而不是通过开发和定制一套 IAM 软件解决这些问题。 提高安全性：使用第三方身份管理解决方案存储数据可增强安全性。IAM 解决方案遵循安全合规性策略和安全认证。 IAM 解决方案承担保护用户数据安全存储和传输的职责。 此外，IAM解决方案还提供统一认证，以避免用户因必须记住多个登录凭据，而重复使用相同密码的不良做法。B2B:  增加企业灵活性：身份管理解决方案提供强大的企业联合认证。支持各种企业连接，例如Microsoft Active Directory，LDAP，ADFS，SAML，第三方 Apps 等。还提供单点登录功能，解决了用户要记住其他用户名或密码的烦恼， 这提高了访问的便利性，从而减少客户流失。 减少销售或雇员入职周期：联合身份允许不同公司使用自己的用户系统或服务，同时确保满足安全要求。 这促进更快的销售循环和客户转化。无需向客户介绍新的，不熟悉的登录方式或让他们记住另一个密码。 他们可以使用其现有企业用户系统进行单点登录。（比如一个支持各种标准用户认证协议的 SaaS 软件商，和不支持的 SaaS 软件商，前者更有竞争力。）B2C:  增加消费者的转化率：通过为客户提供统一，用户友好的身份系统，无论任何浏览器或设备，都可以为终端用户提供跨所有应用程序一致，无差别的注册和登录体验。 身份管理解决方案可以收集有关用户在不同身份平台的更多数据。 从而公司可以利用这些数据来有效推动市场和销售机会。 IAM 解决方案提供直观的登录界面，以优化注册和登录，可以减少设计需求和营销资源。 支持不同第三方登陆方案，可以分散尽可能多的身份验证请求，从而保持应用的高性能和可用性。B2E:  单点登录（SSO）：IAM 解决方案提供单点登录，允许用户仅通过一次登陆，使用多个第三方系统。 无论是云还是本地应用程序，SSO 都允许用户登录一次，并访问任何应用程序，而不会第二次提示凭据。SSO可用于登陆企业内部的 ERP，CRM，OA，Office 365 等应用程序。 管理授权级别：身份管理解决方案提供了轻松的方法控制用户的不同访问级别。 当员工加入公司或晋升时，可以轻松在一处分配和更改不同应用的权限。企业也可以在员工离职时，轻松取消，撤销所有不同平台的访问权限。评估一个 IAM 解决方案的关键要点选择身份管理解决方案时，你应该仔细考虑几个因素：  部署方式：你的身份管理解决方案应该可以选择部署到云，或你自己的数据中心。 易于集成：使用 IAM 解决方案的众多优势之一是缩短开发时间。寻找能够提供多样 SDK，完善文档，配置和启用简单，强大 API 和功能的解决方案厂商。 支持多样身份提供方案：良好的身份管理解决方案应该支持几乎所有流行的身份来源。 这包括Microsoft Active Directory，ADFS，LDAP，Office 365，Apps 和 SAML 解决方案。 对于消费者，还包括对任何自定义数据库的支持，社交身份提供商（如微博、QQ、微信等）和无密码解决方案，如短信，电子邮件，和 Touch ID 等的支持。 可扩展性：你的业务会持续增长，因此你的身份管理也应该持续增长。 你的 IAM 应该允许你轻松自定义身份认证和授权方式。理想情况下，你应该能在控制面板中根据需要自定义产品，而无需联系支持人员或购买插件。 你的 IAM 解决方案还应该允许你扩展其功能，例如导入/导出用户数据，与其他应用程序轻松集成，授权或执行自定义脚本以扩展基本产品的功能。 一流的安全功能：你的 IAM 提供商应由国际安全专家进行评审，并遵守 SAML，OAuth，WS-Federation 等标准，以及 OpenID Connect，SOC2，HIPAA 等。检查重要功能以防范攻击威胁和数据泄漏，例如弱密码检测和防暴力破解。 易于迁移：应支持移入和移出身份管理解决方案而不受限制。确保供应商阻止将用户迁移出系统。该解决方案还应支持连接到你已使用的任何用户系统，并且不应该要求用户在迁移到新解决方案时手动重置其密码。 安全专家/客户服务的快速支持：你的 IAM 客户支持团队应该拥有一个专家团队随时准备每天 24 小时协助应对任何挑战。 该团队还应包括高级开发人员 ，以及在实施 IAM 解决方案方面拥有丰富的实践经验的工程师团队。总结总之，你选择的 IAM 解决方案应能将身份管理系统从风险点和业务障碍，转变为一个正向的，能够促进业务增长的重要功能。 使用 Authing，你可以在几天内实施 IAM，以及利用最简单，最全面，最现代化和可扩展的 IAM 解决方案，提升企业效率。 Authing 可以帮助你管理用户的身份。作为安全专家，我们构建了一个身份即服务（IDaaS）平台，该平台的设计考虑了最先进的安全性。 Authing 的企业身份管理平台为客户提供了许多功能和优势，包括：  能够配置和实现需要的企业联合登录和单点登录； 强大的配置平台，最大限度的减少编码难度； Authing 支持的企业级认证包括 Active Directory，LDAP，ADFS，SAML，OIDC 等。 Authing 支持与所有主要社交软件登陆，包括 QQ，微信，GITHUB 等等。 Authing 提供传统的用户名和密码验证之外还增强的安全功能（如多因素身份验证），密码检测，强力攻击保护和异常检测。 无需强制密码重置，用户可以轻松地从现有系统迁移。 Authing 提供了审计和查看基于身份的分析的方法，以确保组织合规和增加销售机会。 公司可以使用细粒度权限和强大的自定义角色功能轻松管理用户访问规则。 Authing 的委派管理允许公司管理细粒度访问，资源可见性，和外部员工管理。 使用 Authing ，开发人员只需不到半个小时即可设置健壮且可自定义的，支持主流技术堆栈的身份管理系统。如想获得更多的身份管理资讯请访问： https://authing. cn，微信公众号： Authing。 "
    }, {
    "id": 22,
    "url": "http://localhost:4000/blog/Authing%E6%94%AF%E6%8C%81Webhook/",
    "title": "Authing 支持 Webhook",
    "body": "2019/06/04 - Webhooks 允许你对用户注册、登录等行为进行监听，从而对其做一些自定义处理。 使用 Webhook 的方法是在 Authing 平台中配置 HTTP URL，当你的用户登录、注册、修改密码后，都会给远程 HTTP URL 发送一个 POST 请求。 使用 Webhook 的方法是在 Authing 平台中配置 HTTP URL，当你的用户登录、注册、修改密码后，都会给远程 HTTP URL 发送一个 POST 请求。 配置 Webhook: 点击页面的「添加」按钮即可开始配置，如下图所示： 参数解释: 管理 Webhook: 在创建完 Webhook 之后可以看到详细的事件记录： 刚创建好的 Hook 请求事件都为空，这时你可以点击「测试」触发一个「测试事件」 测试成功后你将看到详细的请求信息和返回信息。 调试 Webhook: 调试 Webhook 的方法如下图所示： 点击后将发送一个 Post 请求到配置好的 HTTP URL 中。 请求数据为： {  description :  A test from Authing Webhook }支持的事件: 事件列表: 请求类型: 指定发起 Webhook 请求时 Request body 的数据格式，可选值有 application/json 和 application/x-www-form-urlencoded 附带的数据: 每一个事件都会携带一些特定的请求参数。 Request headers: 我们会在 HTTP POST 头中携带一些自定义头信息，如下表所示： Request body: 请求体中也会携带一些特定参数 Request 示例: headers {  Accept :  application/json, text/plain, */* ,  Content-Type :  application/json; charset=UTF-8 ,  User-Agent :  authing-hook ,  X-Authing-Token :   ,  X-Authing-Event :  login ,  Content-Length : 337}Login Event Body {  success : 1,  message :  密码修改成功 ,  executed_at : 1559453952531,  params : {    _id :  5cf3608753c403913e81f74b ,    password :  +5NllFUKNK/AgyJPd7QNfO7kH1x8J9L7S65NQh/n5TzgcwaveLg= ,    registerInClient :  59f86b4832eb28071bdd9214  },  emit_by : {    _id :  5c00a5fbec1083000f5b27d4 ,    username :   ,    email :  xieyang@dodora. cn ,    phone :    }}Register Event Body {  success : 1,  message :  注册成功 ,  executedAt : 1559453155297,  params : {    _id :  590cd6b4832eb28071bdd9251     email :  example@example. com ,    password :  30f049f7ae9386d2ac2c203f5c4319a5 ,    registerInClient :  59f86b4832eb28071bdd9214 ,    username :  username ,    registerMethod :  default:username-password ,    nickname :   ,    emailVerified : true }}Change-password Event body {  success : 1,  message :  注册成功 ,  executedAt : 1559453831284,  params : {    __v : 0,    email :  example@example2. com ,    registerInClient :  59f86b4832eb28071bdd9214 ,    salt :  fhnli5d0ahoi ,    _id :  5cf3608753c403913e81f74b ,    updatedAt :   ,    country :   ,    postalCode :   ,    region :   ,    locality :   ,    streetAddress :   ,    formatted :   ,    address :   ,    locale :   ,    zoneinfo :   ,    birthdate :   ,    gender :   ,    website :   ,    preferredUsername :   ,    profile :   ,    middleName :   ,    familyName :   ,    givenName :   ,    name :   ,    phoneCode :   ,    oauth :   ,    isDeleted : false,    blocked : false,    signedUp :  2019-06-02T05:37:11. 257Z ,    lastLogin :  2019-06-02T05:37:11. 257Z ,    registerMethod :  default:username-password ,    loginsCount : 0,    password :  bdcff42caccb7e2a889bfb490d91e67c ,    browser :   ,    photo :  https://usercontents. authing. cn/authing-avatar. png ,    company :   ,    nickname :   ,    username :  example2 ,    phoneVerfified : false,    emailVerified : true,    phone :    },  emit_by : {    _id :  5c00a5fbec1083000f5b27d4 ,    username :  root ,    email :  xieyang@dodora. cn ,    phone :    }}"
    }, {
    "id": 23,
    "url": "http://localhost:4000/blog/%E5%A6%82%E4%BD%95%E5%9C%A8%E8%BF%9C%E7%A8%8B%E5%8A%9E%E5%85%AC%E4%B8%AD%E4%BF%9D%E6%8C%81%E9%AB%98%E6%95%88%E7%9A%84%E7%A0%94%E5%8F%91%E6%95%88%E7%8E%87/",
    "title": "如何在远程办公中保持高效的研发效率",
    "body": "2019/02/02 - 开发者群体是个与其他工种不同的群体，他们热爱创造，工作是为了满足自己的创造欲，是完全自驱的；而优秀的开发者，完全不受地理位置限制。 这就是我们要建设分布式研发团队的原因 —— 一个多样化的团队是更好的团队。 我们成功建设了一个分布在中国五个省市的高效研发团队，我们构建的产品，服务全球七个国家和地区的用户。当来自各个地区，拥有不同背景的人联合起来后，极大的拓展了我们的力量。本篇文章将总结我们在建设一个分布式研发团队时所面临的问题和解决方案。 分布式研发团队相比坐在一个办公室里的团队，存在着更多问题，比如工作时间不重叠、团队融合和激励，但实践来看，最需要解决的是以下三个问题：  协作问题； 项目管理问题； 价值观和文化的传递问题；协作问题: 当你和同事坐在同一间办公室时，吼一嗓子就能得到回应。但在一个分布式团队中，经常会出现消息未读、电话没人接的情况，分布式协作是一个自由的环境，这种情况是允许出现的。当然，这种事情并不说明项目会得到延期，因为某个模块的开发者会在其他时间完成该做的事情。但这样的情况往往会使得不到回应的人抓狂，软件系统变复杂后，模块之间往往相互关联，如果没有得到及时回应有可能会导致工程出现问题。 沟通上的另一个问题是团队之间可能没有见过，不过这在开发者群体中不是什么大问题，开发者已经习惯了在 Github 上向陌生人提 Issues 或者帮助陌生人修复 BUG。 从实践中来看，协作主要包含两点：沟通和信息同步。为了保证高效的分布式协作，我们制定了以下基本的协作原则：  由一个人来起草月计划，其他人一起做修改和补充，周计划围绕月计划进行； 每周一上午一次视频周会，同步上周的进展和本周的计划； 每个人以去中心化的方式（非项目组织者统一指挥）制定自己的计划，每个计划必须激进（猛跳能够到的目标）和有明确的 Deadline； 产品开发允许延期和变动，若有延期或变动，在群内同步原因和后续计划，做到每件事必有 Deadline； 内部测试不追求完美，若有可预览的进展，及时在群内同步并请大家测试（我们没有专门的 QA，遵循的原则是由非模块开发者来进行测试）； 使用高效的工具做即时推送，对信息进行最大限度的同步；这需要给每个人一点时间来适应，一旦适应好之后，协作效率会和和同事在一间办公室一样甚至更高。 项目管理问题: 分布式协作另一个大的问题是项目管理，我们由开发者自己决定每月每周每天要做什么，并按计划进行，这一点基本上没有什么问题，参与分布式协作的人必须是能够自我管理的人。出问题的环节也不在这里，而是需求质量。 我们出现过至少两次需求不合理导致返工的问题，这对开发者本人和项目本身都是很大的损耗，每当出现这种情况时，团队便会出现抱怨的声音。这类问题往往有如下几种场景：  产品经理在提需求时没有想清楚，开发者 review 时也没有思考完全，做了一半后发现技术上是不符合逻辑的； 开发者在写方案时没有将方案对齐到具体的参数、返回结果和报错信息，同时也没有其他人及时留意到这个问题，导致实际使用时需要进行二次修改；这个问题的解决方案也很简单粗暴，就是由每一个干系人仔细讨论，因此我们制定了一个流程：  模块负责人在可以在线编写和协作的文档中起草方案； 相关干系人在文档中评论，提出问题和疑惑，将解决方案对齐； 所有疑问和边缘条件都解决后，我们将所有需求细化到任务管理工具上并开始开发；这个流程虽然看上去多了些扯皮的工作，但是能显著提高需求质量。 项目管理上另外一个很重要的点是使用「高效的生产力工具」。你可能会想「生产力工具」本来就是高效的，前面再加个「高效」，是不是重复了。其实不然，生产力工具很多，选择最好用的工具将事半功倍 ——工欲善其事，必先利其器。 我们核心只使用了两款工具：  Tower —— 用来做具体的项目执行； Lark 飞书 —— 用来做即时沟通、文档协作和 ChatOps；除了这两款，还有邮箱用来和海外用户交流、Git 用来管理代码，不过这属于基础工具了。 工具链保持简洁很重要。**前段时间，我们在 Tower、倍洽、企业微信、Notion、石墨和Google Docs **之间到处切换，直到有一天团队再也受不了，我们争执了一番后将即时沟通、文档协作和 ChatOps 换到了 Lark 上，Tower 不变依然用来做项目执行。我们本有换掉 Tower 的打算，不过鉴于更换成本，我们还是选择了留在 Tower 上，想换掉 Tower 的原因是 Tower 不提供 API 让我们能在群聊内即时将任务同步到看板中，它只能单向推送，这不符合 ChatOps 的设计理念，有时也会耽误我们的生产效率，因为我们还要在网页和聊天窗口中切换。 Lark 的 Notice Bot 很有用，我们的 ChatOps 都是依赖 Lark 的 Notice Bot，我们在内部打造了一个「推送」的世界。 Git 消息推送 响应时间过长或服务不可用推送 用户反馈推送 小程序反馈推送 SDK 需求推送 这些都属于一个研发团队中比较基础的操作，但当你处于一个分布式协作团队中时，因为看不到彼此在干什么，因此当所有信息即时推送、即时同步时，会让团队每个人都有安全感。我们的研发团队是一个紧密型小组，我们紧密合作，构建并交付解决方案。这种推送让分散的小组对他们正在构建的东西、什么能提高效率有清晰的认识，并具有主人翁精神，这让它非常适合于团队的分布式性质。 价值观和文化的传递问题: 最后一个问题是价值观和文化的传递问题，这是最难的问题。无论是沟通问题还是项目管理问题都能用流程和工具来解决，而价值观光和文化只靠这些是不够的。 首先说一下我们团队的组建过程，早期的开发者是大学同学，后来有从用户转化过来的开发者，我们的用户爱我们的产品，从用户变成了这款产品的创造者和维护者。此外，所有不涉及商业核心的代码，我们都是开源的，由此也吸引了一批开发者为我们维护各语言的 SDK。 当然，我们还是要依靠一些现代工具。 首先是视频会议，我们使用的 Lark 会同步每个人的日历（我们希望每个人都能将自己的日程信息化，这样会非常便于管理），这样会议协调会很容易，同时我们保证每次会议大家都能露脸，这让每个人都能见到其他人的神情、动作，虽然隔着屏幕，也比看着聊天框里的文字和表情要亲近一些。 除了这样的工具外，就是每天的具体细节。尊重和信任是对人最大的激励、鼓励每个人分享的团队文化才是正向的。同时还要鼓励每个人把自己的能力贡献给项目和组织，并获得事业上的发展。鼓励每个人互帮互助，没有等级，团队的工程师可以直接开喷领导者（我不是说开喷是好事，而是允许这种情况发生）。 这些都是通过线上交流获得的，线下活动也是必不可少的。比如每个月邀请大家聚到一起娱乐、一起喝酒、一起打游戏、每个节日互送礼物。 总之，让大家成功，让项目成功，是构建组织文化和价值观的根本目标。 最后，请允许我介绍下我们在做的事情: 我们的组织名称叫「蒸汽记忆」，英文名为 Steamory，这个名字是「Steam」 + 「Memeory」的合成词。我们在开发下一代云原生操作系统，我们的计算平台以用户身份为中心，旨在让用户拥有自己的数据，控制自己的数据，同时数据可以在多个平台重复流转使用。我们计划中的三大产品线为「身份认证云」、「开放关联数据云」和配套的「开发者工具」。 目前已经上线的产品为「身份认证云」，开发者遍布全球七个国家和地区，客户覆盖教育、出版社、知识图谱、聊天机器人、金融、云计算、物联网和营销自动化等多个领域。 "
    }, {
    "id": 24,
    "url": "http://localhost:4000/blog/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E5%80%BC%E5%BE%97%E4%B8%8A%E4%BA%91/",
    "title": "为什么身份认证值得上云",
    "body": "2018/09/15 - 身份认证云本质上是一种“无服务器”应用，今天，我们就来讨论下这种模式的优点和缺点。如果没有权衡利弊，你或许不会使用身份认证云或其他“无服务器应用”。 先看一下“无服务器架构”的介绍： 无服务器架构是包含 BaaS （后端即服务）和 FaaS （函数即服务）的程序开发 /部署方案（但未来远不止如此）。这类结构消除了对传统服务器的管理需求，使用无服务器架构可以显著降低运营成本、复杂性和开发时间。相应的代价是对供应商有更强的依赖性。 身份认证云是无服务器架构的一个分支，使用身份认证云和使用无服务器架构拥有一样的好处。 减少管理成本: 身份认证云本质上是一种外包解决方案，这种方案就是向某人付费以管理身份认证这个过程。由于一个服务同时被上千人使用，所以会产生一种规模经济效应：你所需支付的费用非常少，因为和其他人共享了基础设施（硬件、网络）。 除了与他人共享基础设施外，你还可以省掉大量的人工成本，不必开发基础设施，从而快速进入核心业务的开发。 如果说 PaaS 是为你解决了硬件和资源层的抽象，那么 Serverless 则是为你解决了软件层的抽象，这样你可以更加专注于市场和产品。 减少开发成本: 身份认证虽然听上去很简单，但他包括了注册、登录、密码管理、非法探测以及其他登录方式（如 OAuth，小程序扫码），而这些功能在大多数应用中都是相似的。Authing 便是应此而生的，我们希望将现成的身份认证功能集成到应用程序中，而不用每次开一个新项目都去重复开发相似的功能，这不仅浪费资源还浪费时间。 另一个例子是 BaaS 数据库，如 Firebase。这源于一些团队发现客户端与数据库的连接完全可以从业务中剥离出来。BaaS 不仅消除了大部分数据库管理开销，也提供了 ACL 访问权限机制，这样能保证足够的安全性。 不可否认的是，没有一家公司仅能靠自己的代码开发出成功的产品。将自己的非核心业务通过云的方式托管到第三方服务上，不失为一个好的选择。 减少伸缩成本: 无服务器或 FaaS 最大的优势是其无限弹性拓展能力，而这带给你的最大好处是只需要支付所需的计算费用，不用支付为保障弹性伸缩而配置的其他计算资源。假设你在推广一个 APP，当峰值来临的时候，登录接口挂掉，新用户无法注册，这会对你的业务造成致命的打击。而使用 Authing 这种身份认证云的时候，你则完全不用操心，因为系统会在峰值时自动伸缩。 上图的红线是你在自己做弹性伸缩时所需要的服务器数量，蓝线是使用 Authing 时所需要的服务器数量，线的高度越低，所需支付的费用就越少。比起闲置的红线，蓝线明显更加绿色节能，这对厂商和消费者来说都是好事。  大公司的服务器集群利用率仅有 5%-15%。——福布斯 而使用无服务器应用后能显著提高资源利用率。 友好强大的管理界面: 合格的的无服务器应用都会配备强大的管理界面，这些界面能让你更容易的管理数据，拥有这些也不需要编写任何代码。 说完了优点，让我们看看缺点。 缺少控制权: 任何云服务，都有系统停机、成本变化、功能丧失或强制升级等问题（ Authing 自然不会例外），用户在这种情况下只能十分被动的接受。如果处理不及时，可能会造成一定损失。 多租户问题: 多租户问题指所有的认证请求都在同一批机器上，可能会引发由于交叉验证而产生的 BUG，这可能会间接影响到其他用户。这些 BUG 包括：安全问题（如一个客户能看到另一个客户的数据）、稳定性问题（一个客户产生的数据错误引发另一个客户的数据发生错误）和性能问题（一个高负载客户导致其他人减速）。 强依赖性: 一旦你长时间使用 Authing，你可能会对 Authing 产生依赖，这时你在升级设计或架构时可能会遇到一些麻烦。 总结: 尽管身份认证云如今还不完美（因为他正处于一个青少年时期），但他的魅力已经开始展现。未来几年一定还会取得其他有趣进展，总有一天身份认证上云将会进入我们的架构工具包。 "
    }];

var idx = lunr(function () {
    this.ref('id')
    this.field('title')
    this.field('body')

    documents.forEach(function (doc) {
        this.add(doc)
    }, this)
});


    
function lunr_search(term) {
    $('#lunrsearchresults').show( 1000 );
    $( "body" ).addClass( "modal-open" );
    
    document.getElementById('lunrsearchresults').innerHTML = '<div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"> <div class="modal-dialog shadow-lg" role="document"> <div class="modal-content"> <div class="modal-header" id="modtit"> <button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"> &times; </button> </div> <div class="modal-body"> <ul class="mb-0"> </ul>    </div> <div class="modal-footer"><button id="btnx" type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Close</button></div></div> </div></div>';
    if(term) {
        document.getElementById('modtit').innerHTML = "<h5 class='modal-title'>Search results for '" + term + "'</h5>" + document.getElementById('modtit').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><small><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></small></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>Sorry, no results found. Close & try a different search!</li>";
        }
    }
    return false;
}
</script>
<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>




<form class="bd-search hidden-sm-down" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
<input type="text" class="form-control text-small"  id="lunrsearch" name="q" value="" placeholder="搜点什么吧..."> 
</form>
            </ul>
        </div>
    </div>
    </nav>

    <!-- Search Results -->
    <div id="lunrsearchresults">
        <ul class="mb-0"></ul>
    </div>

    <!-- Content -->
    <main role="main" class="site-content">
        

<div class="container">
<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row  justify-content-between ">
				<div class=" col-md-6  pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
                        <span class="catlist">
						
                          <a class="sscroll text-danger" href="/blog/categories.html#developers">developers</a><span class="sep">, </span>
                        
                          <a class="sscroll text-danger" href="/blog/categories.html#tutorial">tutorial</a><span class="sep">, </span>
                        
                        </span>
					</p>
					<h1 class="display-4 mb-4 article-headline">函数计算在身份认证云中的应用场景</h1>
					<div class="d-flex align-items-center">
                        
                        <img class="rounded-circle" src="/blog//assets/images/ivy.jpg" alt="谢扬" width="70"/>
                        
						<small class="ml-3"> 谢扬 <span><a target="_blank" href="http://ivydom.com" class="btn btn-outline-success btn-sm btn-round ml-1">Follow</a></span>
                            <span class="text-muted d-block mt-1">Aug 16, 2019 · <span class="reading-time">
  
  
    1 min read
  
</span>
    </span>
						</small>
					</div>
				</div>
                
				<div class="col-md-6 pr-0 align-self-center">
					<img class="rounded" src="http://img.staryu.cn/20190814-01.jpg" alt="函数计算在身份认证云中的应用场景">
				</div>
                
			</div>
		</div>
	</div>
</div>





<div class="container-lg pt-4 pb-4">
	<div class="row justify-content-center">
        
        
        <!-- Share -->
		<div class="col-lg-2 pr-4 mb-4 col-md-12">
			<div class="sticky-top sticky-top-offset text-center">
				<div class="text-muted">
					分享
				</div>
				<div class="share d-inline-block">
					<!-- AddToAny BEGIN -->
					<div class="a2a_kit a2a_kit_size_32 a2a_default_style" data-a2a-url="https://authing.cn/blog" data-a2a-title="Authing 官方博客">
						<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
						<a class="a2a_button_wechat"></a>
						<a class="a2a_button_reddit"></a>
						<a class="a2a_button_sina_weibo"></a>
						<a class="a2a_button_facebook"></a>
						<a class="a2a_button_qzone"></a>
						<a class="a2a_button_twitter"></a>
						<a class="a2a_button_douban"></a>
						<a class="a2a_button_email"></a>
						</div>
						<script>
						var a2a_config = a2a_config || {};
						a2a_config.locale = "zh-CN";
						</script>
					<script async src="https://static.addtoany.com/menu/page.js"></script>
					<!-- AddToAny END -->
				</div>
			</div>
		</div>
        
        
		<div class="col-md-12 col-lg-8">
            
            <!-- Article -->
			<article class="article-post">                
			<p>Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。</p>

<p>越来越多的企业接受身份认证上云后，Authing 也承接了越来越多「用户迁移」需求，在用户迁移的过程中，最重要的一点是「终端用户必须无感知」，而无感知主要有以下两点要求：</p>

<ol>
  <li>用户不需要修改密码；</li>
  <li>完成切换后，用户的所有数据都能正常访问且具备相应的访问权限；</li>
</ol>

<p>在一个用户系统中，用户的密码通常情况下都会加密存储在数据库中，这个加密算法一般是不可逆的，同时可以由一个函数完成，因此将函数计算应用在身份认证云中就能满足第一个要求。</p>

<p>首先我们看一下什么是函数计算：</p>

<blockquote>
  <p>通过函数计算，您无需管理服务器等基础设施，只需编写代码并上传。函数计算会为您准备好计算资源，以弹性、可靠的方式运行您的代码，并提供日志查询、性能监控、报警等功能。借助于函数计算，您可以快速构建任何类型的应用和服务，无需管理和运维。而且，您只需要为代码实际运行所消耗的资源付费，代码未运行则不产生费用。
阿里云 - 函数计算
简单来说，函数计算让程序员不需要再管理服务器，只需要上传代码，后台的云就可以帮你自动按需分配资源，这将极大释放程序员的生产力。</p>
</blockquote>

<p>函数计算非常适合解决身份认证云中自定义密码加密的问题，以下是应用了函数计算后，用户注册的流程图：</p>

<p><img src="http://img.staryu.cn/20190814-02.jpg" alt="" /></p>

<p>以下是用户登录的流程图：</p>

<p><img src="http://img.staryu.cn/20190814-03.jpg" alt="" /></p>

<p>以上流程图是一个简化版，只展示了几个比较核心的步骤。</p>

<p>从开发者的角度来说，我们希望开发者只需要上传一个 index.js 文件就可以自定义密码的加密方式。如果开发者需要引入第三方包，那么仅需要将引入的 node_modules 打包为 .zip 上传即可。上传完成后，Authing 会取得一个可通过 HTTP 调用的网址，此网址不会公布给任何第三方，同时每个网址都会有独特的验证方式，最大限度的保证安全。</p>

<p><img src="http://img.staryu.cn/20190814-04.jpg" alt="" /></p>

<p>在 Authing 控制台中依次点击基础配置 -&gt; 密码管理即可自定义密码加密方法</p>

<h1 id="其他场景">其他场景</h1>

<p>除了自定义密码加密外，函数计算可以很好的和 Authing 配合，帮助开发者在后端十分容易的完成用户 Token 的验证。此外，在实际场景下，若开发者接受全部上云，完全可以基于 Authing + 函数计算完成所有业务流程：Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。</p>
                
			</article>
			
			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				
				</span>
			</div>
 
            <!-- Mailchimp Subscribe Form -->
            
            
            
             <!-- Author Box -->
                				
				<div class="row mt-5">
					<div class="col-md-2 align-self-center">
                         
                        <img class="rounded-circle" src="/blog//assets/images/ivy.jpg" alt="谢扬" width="90"/>
                         
					</div>
					<div class="col-md-10">		
                        <h5 class="font-weight-bold">Written by 谢扬 <span><a target="_blank" href="http://ivydom.com" class="btn btn-outline-success btn-sm btn-round ml-2">Follow</a></span></h5>
						Working for computer technologies that can give new possibilities to science, engineering and art, while benefiting hundreds of millions of people.					
					</div>
				</div>				
                
            
            <!-- Comments -->
            
                <!--  Don't edit anything here. Set your disqus id in _config.yml -->

<div id="comments" class="mt-5">
    <div id="disqus_thread">
    </div>
    <script type="text/javascript">
        var disqus_shortname = 'Authing 博客'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>
    Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
</div>
            
            
		</div>
        
        
	</div>
</div>


<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          
            <div class="col-md-6 rightborder pl-0">
                <a class="text-dark" href="/blog/%E8%B5%B0%E8%BF%9B%E8%BA%AB%E4%BB%BD%E7%AE%A1%E7%90%86/"> <img height="30px" class="mr-1" src="/blog/http://img.staryu.cn/20190609-01.jpg">  走进身份管理</a>
            </div>
          
          
            <div class="col-md-6 text-right pr-0">
                <a class="text-dark" href="/blog/%E5%B0%86%E5%86%85%E5%AE%B9%E7%9C%8B%E4%BD%9C%E6%96%B0%E7%9A%84%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BDCaaS/"> 将内容看作新的基础设施：Content as a Service  <img height="30px" class="ml-1" src="/blog/https://cdn.authing.cn/caas.jpg"> </a>
            </div>
          
        </div>
	</div>
</div>
    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <script src="/blog/assets/js/theme.js"></script>


    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <span class="navbar-brand mr-2 mb-0">
                    <img src="https://usercontents.authing.cn/logo/authing@256x78.png" style="height:34px">
                </span>
                <span>Copyright © Authing.cn <script>document.write(new Date().getFullYear())</script>.</span>

                <!--  Github Repo Star Btn-->
                <a class="text-dark ml-1" target="_blank" href="https://github.com/authing/meme"><i class="fab fa-github"></i> Fork on Github</a>

            </div>
            <div>
                Powered by <a target="_blank" class="text-dark font-weight-bold" href="https://authing.cn/"> Authing</a></a>.
            </div>
        </div>
        </div>
    </footer>

    <!-- All this area goes before </body> closing tag --> 


</body>

</html>
