---
layout: post
title:  "函数计算在身份认证云中的应用场景"
author: ivy
categories: [ Developers, tutorial ]
image: http://img.staryu.cn/20190814-01.jpg
---
Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。

越来越多的企业接受身份认证上云后，Authing 也承接了越来越多「用户迁移」需求，在用户迁移的过程中，最重要的一点是「终端用户必须无感知」，而无感知主要有以下两点要求：

1. 用户不需要修改密码；
2. 完成切换后，用户的所有数据都能正常访问且具备相应的访问权限；

在一个用户系统中，用户的密码通常情况下都会加密存储在数据库中，这个加密算法一般是不可逆的，同时可以由一个函数完成，因此将函数计算应用在身份认证云中就能满足第一个要求。

首先我们看一下什么是函数计算：

>通过函数计算，您无需管理服务器等基础设施，只需编写代码并上传。函数计算会为您准备好计算资源，以弹性、可靠的方式运行您的代码，并提供日志查询、性能监控、报警等功能。借助于函数计算，您可以快速构建任何类型的应用和服务，无需管理和运维。而且，您只需要为代码实际运行所消耗的资源付费，代码未运行则不产生费用。
阿里云 - 函数计算
简单来说，函数计算让程序员不需要再管理服务器，只需要上传代码，后台的云就可以帮你自动按需分配资源，这将极大释放程序员的生产力。

函数计算非常适合解决身份认证云中自定义密码加密的问题，以下是应用了函数计算后，用户注册的流程图：

![](http://img.staryu.cn/20190814-02.jpg)

以下是用户登录的流程图：

![](http://img.staryu.cn/20190814-03.jpg)

以上流程图是一个简化版，只展示了几个比较核心的步骤。

从开发者的角度来说，我们希望开发者只需要上传一个 index.js 文件就可以自定义密码的加密方式。如果开发者需要引入第三方包，那么仅需要将引入的 node_modules 打包为 .zip 上传即可。上传完成后，Authing 会取得一个可通过 HTTP 调用的网址，此网址不会公布给任何第三方，同时每个网址都会有独特的验证方式，最大限度的保证安全。

![](http://img.staryu.cn/20190814-04.jpg)

在 Authing 控制台中依次点击基础配置 -> 密码管理即可自定义密码加密方法

# 其他场景

除了自定义密码加密外，函数计算可以很好的和 Authing 配合，帮助开发者在后端十分容易的完成用户 Token 的验证。此外，在实际场景下，若开发者接受全部上云，完全可以基于 Authing + 函数计算完成所有业务流程：Authing 用来做用户验证，函数计算用来处理具体的逻辑，非常完美的搭配。
